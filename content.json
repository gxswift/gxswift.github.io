{"meta":{"title":"gxçš„åšå®¢","subtitle":"","description":"","author":"GX","url":"http://example.com","root":"/"},"pages":[{"title":"categories","date":"2024-12-26T06:50:26.976Z","updated":"2024-12-26T06:50:26.976Z","comments":true,"path":"categories/index.html","permalink":"http://example.com/categories/index.html","excerpt":"","text":""},{"title":"æˆ‘","date":"2024-12-27T03:30:42.575Z","updated":"2024-12-27T03:30:42.575Z","comments":true,"path":"me/index.html","permalink":"http://example.com/me/index.html","excerpt":"","text":"ç®€ä»‹åµŒå…¥å¼å¼€å‘ å•ç‰‡æœºä¸ºä¸»stm32ï¼Œstm8ï¼Œgd32ï¼Œnuvotonç­‰mcuï¼Œnrf51&#x2F;52è“ç‰™ï¼Œesp8266&#x2F;32wifièŠ¯ç‰‡ ç¼–è¯‘é“¾gccä¸ºä¸»,è°ƒè¯•å·¥å…·openocd,pyocd,rttç­‰ï¼Œç¼–è¯‘å·¥å…·makefile,cmake,ninja,IDE keil GUI:lvglï¼Œemwin lwip usb fat16&#x2F;32 opencv linux å…¶ä»– nodejs python æœ€åä»–æœ‰ä¸€åªå¯çˆ±çš„ğŸ·"},{"title":"æ ‡ç­¾","date":"2024-12-26T06:55:05.440Z","updated":"2024-12-26T06:55:05.440Z","comments":true,"path":"tags/index.html","permalink":"http://example.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"nRF52832ç¯å¢ƒ","slug":"NRF52/nrf52","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:31:16.185Z","comments":true,"path":"2024/12/26/NRF52/nrf52/","permalink":"http://example.com/2024/12/26/NRF52/nrf52/","excerpt":"","text":"nRF52832ç¯å¢ƒ windows: toolchain:arm-none-eabi-gcc make ä¿®æ”¹\\components\\toolchain\\gcc\\Makefile.windows liux:1234sudo apt install gcc-arm-none-eabi sudo apt install libnewlib-arm-none-eabiarm-none-eabi-gcclibnewlib-arm-none-eabi ä¿®æ”¹\\components\\toolchain\\gcc\\Makefile.posix å·¥ç¨‹ï¼šmakefileè·¯å¾„ï¼Œå¦‚: 12SDK_ROOT := ../../nRF5_SDK_17.0.2_d674ddePROJ_DIR := ../ armgccå’Œconfigæ–‡ä»¶å¤¹åŒä¸€çº§,æˆ–ä¿®æ”¹configè·¯å¾„SDK_CONFIG_FILE makefileä¸­çœ‹å…·ä½“æŒ‡ä»¤ SDKç»“æ„å’Œåº”ç”¨å‚è€ƒ Debugä¸²å£logï¼Œå±€é™æ€§è¾ƒå¤§ 1234#define NRF_LOG_BACKEND_UART_ENABLED 1#define NRF_LOG_BACKEND_UART_TX_PIN 13NRF_LOG_PROCESS();//ä¸€æ¬¡æ‰“å°ä¸€æ¡","categories":[{"name":"nrf","slug":"nrf","permalink":"http://example.com/categories/nrf/"}],"tags":[{"name":"nrf","slug":"nrf","permalink":"http://example.com/tags/nrf/"}]},{"title":"nRF DFU","slug":"NRF52/DFU","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:31:37.185Z","comments":true,"path":"2024/12/26/NRF52/DFU/","permalink":"http://example.com/2024/12/26/NRF52/DFU/","excerpt":"","text":"NRF52 DFUmicrc-ecc Nordicçš„DFUé‡‡ç”¨äº†micro-eccå®ç°ECDSAç®—æ³•,éœ€è¦ç”¨åˆ°micro-eccæºç ç¼–è¯‘ pc-nrfutil ç”ŸæˆåŠ å¯†å¯†é’¥ 1.ç¼–è¯‘micro-eccåº“ 1.å°†micro-eccæºç æ”¾åœ¨SDK\\external\\micro-eccä¸‹2.é€‰æ‹©å¯¹åº”ç¼–è¯‘é¡¹ç¼–è¯‘ï¼Œç”Ÿæˆå¯¹åº”çš„åº“ 2.å®‰è£…pc-nrfutil python setup.py install 3.ç”Ÿæˆprivate_keyå’Œpublic_key12nrfutil keys generate private.pemnrfutil keys display --key pk --format code private.pem --out_file dfu_public_key.c 4.ç¼–è¯‘bootloader1.ä½¿ç”¨ç”Ÿæˆçš„dfu_public_key.cæ›¿æ¢examples\\dfuä¸‹çš„æ–‡ä»¶2.ç¼–è¯‘å¯¹åº”çš„bootloaderï¼Œçƒ§å½•è¿è¡Œåï¼Œæ‰‹æœºæ‰“å¼€nRF Connectï¼Œå¯æ‰«æåˆ°DfuTarg 5.æ‰“åŒ…å‡çº§æ–‡ä»¶1.å¯¹åº”å·¥ç¨‹examples\\ble_app_buttonless_dfuç¼–è¯‘2.å°†ç¼–è¯‘åçš„hexæ–‡ä»¶å’Œprivate.pemæ”¾å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­3.è¾“å…¥å‘½ä»¤æ‰“åŒ…ä¾‹å¦‚ï¼š 1nrfutil pkg generate --hw-version 52 --application-version 1 --application nrf52832_xxaa.hex --sd-req 0xAF --key-file private.pem dfufile.zip hardware versionï¼šç¡¬ä»¶ç‰ˆæœ¬nRF52832è®¾ç½®ä¸º52softdevice firmware IDï¼šåè®®æ ˆID,è¾“å…¥å¯¹åº”ç‰ˆæœ¬çš„IDapplication-version ç¨‹åºç‰ˆæœ¬å·nrfutil pkg generate â€“help å¯æŸ¥è¯¢å‘½ä»¤ä½¿ç”¨è¯´æ˜å¯åœ¨SDK\\components\\softdevice\\s132\\doc\\s132_nrf52_7.2.0_release-notes.pdf æŸ¥çœ‹è·å–The Firmware ID of this SoftDevice7.2.0 å¯¹åº”0x0101 6.ä»£ç çš„çƒ§å†™å’Œåˆå¹¶é¢„å…ˆçƒ§å¥½åè®®æ ˆå’Œbootloaderï¼Œç„¶åé€šè¿‡DFUï¼Œå¯ä»¥æ­£å¸¸è¿è¡Œã€‚å¦‚æœç›´æ¥çƒ§å†™åè®®æ ˆbootloaderå’Œåº”ç”¨ç¨‹åºï¼Œæ˜¯æ— æ³•æ­£å¸¸è¿è¡Œçš„ï¼Œå› ä¸ºbootloaderä¼šæ£€æŸ¥settingsé¡µé¢çš„CRC,å¦‚æœsettingsé¡µé¢ä¸å­˜åœ¨ï¼Œç¨‹åºä¼šç»§ç»­åœç•™åœ¨bootloaderä¸ä¼šè·³è½¬ 1.ç”Ÿæˆsettingsæ–‡ä»¶çš„æ–¹æ³•1nrfutil settings generate --family NRF52 app.hex --application-version 1 --bootloader-version 1 --bl-settings-version 1 settings.hex 2.mergehexåˆå¹¶çƒ§å†™mergehexåœ¨command line toolsä¸­å‘½ä»¤æ ¼å¼ 1mergehex -m file1.hex file2.hex file3.hex -o output output_file.hex","categories":[{"name":"nrf","slug":"nrf","permalink":"http://example.com/categories/nrf/"}],"tags":[{"name":"nrf","slug":"nrf","permalink":"http://example.com/tags/nrf/"},{"name":"DFU","slug":"DFU","permalink":"http://example.com/tags/DFU/"}]},{"title":"Hexo åšå®¢æ­å»º","slug":"blog/blog","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:34:51.131Z","comments":true,"path":"2024/12/26/blog/blog/","permalink":"http://example.com/2024/12/26/blog/blog/","excerpt":"","text":"Hexo blog æ­å»ºHEXO å®‰è£… HEXOå®˜ç½‘ 12345npm install hexo-cli -ghexo init blogcd blognpm installhexo server æ›´æ¢ä¸»é¢˜ ä¸»é¢˜ 12345$ cd HEXO_PATH/themes$ git clone https://github.com/cocowool/wave.git$ npm install --save hexo-renderer-sass$ cd ..$ hexo s æ¨é€ å®‰è£…æ¨é€å·¥å…· 1npm install hexo-deployer-git --save _congif.ymlæ–‡ä»¶,æ‰¾åˆ° deploy å­—æ®µï¼ŒæŠŠä»¥ä¸‹ä»£ç æ”¾è¿›å»ï¼Œå¡«å†™æ–°å»ºçš„ä»“åº“åœ°å€ 123456# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy:type: gitrepo: &lt;ä½ çš„ä»“åº“åœ°å€&gt;branch: master é™æ€æ–‡ä»¶ç”Ÿæˆ 1hexo g æ¸…é™¤ 1hexo clean éƒ¨ç½² 1hexo deploy","categories":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://example.com/categories/%E5%8D%9A%E5%AE%A2/"},{"name":"hexo","slug":"åšå®¢/hexo","permalink":"http://example.com/categories/%E5%8D%9A%E5%AE%A2/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://example.com/tags/hexo/"},{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://example.com/tags/%E5%8D%9A%E5%AE%A2/"}]},{"title":"markdownè¯­æ³•","slug":"blog/grammer","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:34:40.752Z","comments":true,"path":"2024/12/26/blog/grammer/","permalink":"http://example.com/2024/12/26/blog/grammer/","excerpt":"","text":"markdownè¯­æ³•è¿”å›ä¸»é¡µ æ ‡é¢˜æ ‡é¢˜2æ ‡é¢˜3æ ‡é¢˜4æ ‡é¢˜5æ ‡é¢˜6# æ ‡é¢˜1 ## æ ‡é¢˜2 ### æ ‡é¢˜3 #### æ ‡é¢˜4 ##### æ ‡é¢˜5 ###### æ ‡é¢˜6 æ ‡é¢˜æ ‡é¢˜2æ ‡é¢˜ === æ ‡é¢˜2 --- æ–‡æœ¬æ–œä½“æ–‡æœ¬æ–œä½“æ–‡æœ¬ ç²—ä½“æ–‡æœ¬ç²—ä½“æ–‡æœ¬ ç²—æ–œä½“æ–‡æœ¬ç²—æ–œä½“æ–‡æœ¬ åˆ é™¤çº¿ *æ–œä½“æ–‡æœ¬* _æ–œä½“æ–‡æœ¬_ **ç²—ä½“æ–‡æœ¬** __ç²—ä½“æ–‡æœ¬__ ***ç²—æ–œä½“æ–‡æœ¬*** ___ç²—æ–œä½“æ–‡æœ¬___ ~~åˆ é™¤çº¿~~ åˆ—è¡¨ ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ - ç¬¬ä¸€é¡¹ - ç¬¬äºŒé¡¹ - ç¬¬ä¸‰é¡¹ - *+ç›¸åŒ åŒºå— æœ€å¤–å±‚ ç¬¬ä¸€å±‚åµŒå¥— ç¬¬äºŒå±‚åµŒå¥— &gt; æœ€å¤–å±‚ &gt; &gt; ç¬¬ä¸€å±‚åµŒå¥— &gt; &gt; &gt; ç¬¬äºŒå±‚åµŒå¥— é“¾æ¥è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ ä¸»é¡µ è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ [ä¸»é¡µ](main.md) æˆ‘ç»å¸¸å»çš„å‡ ä¸ªç½‘ç«™Googleã€Leanoteä»¥åŠè‡ªå·±çš„åšå®¢Leanote ç¬”è®°æ˜¯ä¸€ä¸ªä¸é”™çš„ç½‘ç«™ã€‚ æˆ‘ç»å¸¸å»çš„å‡ ä¸ªç½‘ç«™[Google][1]ã€[Leanote][2]ä»¥åŠ[è‡ªå·±çš„åšå®¢][3] [Leanote ç¬”è®°][2]æ˜¯ä¸€ä¸ªä¸é”™çš„[ç½‘ç«™][]ã€‚ [1]:http://www.google.com &quot;Google&quot; [2]:http://www.leanote.com &quot;Leanote&quot; [3]: &quot;ä¼šæ˜¾ç¤ºè½¬æ¢åçš„&quot; [ç½‘ç«™]:http://www.baidu.com &quot;ç™¾åº¦&quot; å›¾ç‰‡è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ è¡¨æ ¼ å·¦å¯¹é½ å³å¯¹é½ å±…ä¸­å¯¹é½ å•å…ƒæ ¼ å•å…ƒæ ¼ å•å…ƒæ ¼ å•å…ƒæ ¼ å•å…ƒæ ¼ å•å…ƒæ ¼ é”šç‚¹é”šç‚¹ä½ç½® è·³è½¬åˆ°é”šç‚¹ 123&lt;a id=&quot;index&quot;&gt;é”šç‚¹ä½ç½®&lt;/a&gt;è·³è½¬åˆ°[é”šç‚¹](#index) æ³¨é‡Š å“ˆå“ˆæˆ‘æ˜¯æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚ æˆ‘ä¹Ÿæ˜¯æ³¨é‡Šã€‚ 1234&lt;div style=&#x27;display: none&#x27;&gt;å“ˆå“ˆæˆ‘æ˜¯æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚æˆ‘ä¹Ÿæ˜¯æ³¨é‡Šã€‚&lt;/div&gt; &lt;!-- å¤šæ®µ æ³¨é‡Šï¼Œ ä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚ --&gt; æ ‡è®°æ ‡è®°1 æ ‡è®°2 æ ‡è®°3 æ ‡è®°4 `æ ‡è®°1` ``æ ‡è®°2`` ```æ ‡è®°3``` ````æ ‡è®°4```` ä»£ç 12345678/*æ³¨é‡Š*///æ³¨é‡Šint main(void)&#123; return 1;&#125; å…¶ä»–ä½¿ç”¨ Ctrl+Alt+Del é‡å¯ç”µè„‘ ç›®å‰æ”¯æŒçš„ HTML å…ƒç´ æœ‰ï¼š&lt;kbd&gt; &lt;b&gt; &lt;i&gt; &lt;em&gt; &lt;sup&gt; &lt;sub&gt; &lt;center&gt; æ”¯æŒåæ–œæ æ·»åŠ ç‰¹æ®Šç¬¦å·\\ tabæ ‡è®°æ®µ","categories":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://example.com/categories/%E5%8D%9A%E5%AE%A2/"},{"name":"markdown","slug":"åšå®¢/markdown","permalink":"http://example.com/categories/%E5%8D%9A%E5%AE%A2/markdown/"}],"tags":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://example.com/tags/%E5%8D%9A%E5%AE%A2/"},{"name":"markdown","slug":"markdown","permalink":"http://example.com/tags/markdown/"}]},{"title":"ESP8266ç¼–è¯‘ç¯å¢ƒ","slug":"esp8266/environment","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:23:47.106Z","comments":true,"path":"2024/12/26/esp8266/environment/","permalink":"http://example.com/2024/12/26/esp8266/environment/","excerpt":"","text":"esp8266ç¯å¢ƒç¼–è¯‘é€Ÿåº¦ linux windows make real 0m47.489s real 6m33.019s user 0m36.469s user 0m23.129s sys 0m10.939s sys 0m46.835s make -j4 real 0m18.424s real 2m8.387s user 0m50.240s user 0m19.590s sys 0m14.509s sys 0m44.509s linuxç¼–è¯‘é€Ÿåº¦æ¯”windowså¿«8å€å·¦å³ ç¼–è¯‘ç¯å¢ƒå‚è€ƒ ç¯å¢ƒä¸‹è½½ï¼ˆé™„å¸¦SDK Toolchainï¼‰esp32_win32_msys2_environment_and_toolchain-20180110.zip win11ä¿®æ”¹ç”¨æˆ·åwin+r è¿è¡Œ netplwiz SDKESP8266_RTOS_SDK ToolchainToolchain xtensa-lx106-elf 1python -m pip install --user -r $IDF_PATH/requirements.txt æ–°å»ºå·¥ç¨‹ç¼–è¯‘æ–°å»ºexport_path.sh 123#!/bin/bashexport IDF_PATH=~/esp/ESP8266_RTOS_SDKexport PATH=$PATH:~/esp/toolchain/xtensa-lx106-elf/bin æ‰§è¡Œ. export_path.shåŠ å…¥ç¯å¢ƒå˜é‡ ä¿®æ”¹é…ç½® 1make menuconfig ä¸‹è½½ 1make flash monitor ç¯å¢ƒå‚è€ƒ å·¥ç¨‹è‡ªå®šä¹‰æ–‡ä»¶å¤¹å‚è€ƒ å¦‚è…¾è®¯IoTå·¥ç¨‹","categories":[{"name":"esp","slug":"esp","permalink":"http://example.com/categories/esp/"}],"tags":[{"name":"esp","slug":"esp","permalink":"http://example.com/tags/esp/"}]},{"title":"ESP-IDF","slug":"esp8266/espidf","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:23:23.817Z","comments":true,"path":"2024/12/26/esp8266/espidf/","permalink":"http://example.com/2024/12/26/esp8266/espidf/","excerpt":"","text":"ESP-IDFå®‰è£…esp-idf esp-gitee-tools ä½¿ç”¨esp-gitee-toolsåŠ é€Ÿç¯å¢ƒæ­å»ºï¼Œè¯¦æƒ…çœ‹installä½¿ç”¨ cmdç¯å¢ƒä¸‹åœ¨esp-idfæ–‡ä»¶å¤¹ä¸‹è¿è¡Œexport.bat&#x2F;export.shåŠ å…¥ç¯å¢ƒå˜é‡ï¼Œç„¶åè¿è¡Œidf.py buildç¼–è¯‘ ç»„ä»¶é…ç½®ç›¸å…³æ–‡ä»¶ æ–‡ä»¶ ä½ç½® ä½œç”¨ æ¦‚æ‹¬ Kconfig ç»„ä»¶ç›®å½•ã€æ‰‹åŠ¨åˆ›å»ºã€‘ ç”¨äºç”Ÿæˆmenuconfigä¸­çš„èœå•äºComponent Configurationå­èœå• èœå•æ¨¡æ¿ Kconfig.projbuild ç»„ä»¶ç›®å½•ã€æ‰‹åŠ¨åˆ›å»ºã€‘ ç”¨äºç”Ÿæˆmenuconfigä¸­çš„èœå•äºé¡¶å±‚èœå• èœå•æ¨¡æ¿ sdkconfig é¡¹ç›®æ ¹ç›®å½•ã€è‡ªåŠ¨ç”Ÿæˆã€‘ ç”¨äºä»¥é”®å€¼å¯¹çš„å½¢å¼ä¿å­˜Kconfigè®¾ç½®æ‰‹åŠ¨æ”¹åŠ¨æ— æ•ˆ ä¿å­˜è®¾ç½® sdkconfig.h å·¥ç¨‹ç¼–è¯‘ç”Ÿæˆæ–‡ä»¶build&#x2F;config&#x2F;ã€è‡ªåŠ¨ç”Ÿæˆã€‘ Cè¯­è¨€è®¿é—®Kconfigé…ç½®çš„æ–¹å¼æ‰‹åŠ¨æ”¹åŠ¨æ— æ•ˆ Cè¯­è¨€æ¥å£ sdkconfig.default é¡¹ç›®æ ¹ç›®å½•ã€æ‰‹åŠ¨åˆ›å»ºã€‘ è‡ªå®šä¹‰sdkconfigçš„é»˜è®¤å€¼ï¼Œä¸sdkconfigæ–‡ä»¶æ ¼å¼ç›¸åŒï¼Œä¸ä¼šè¢«æ„å»ºç³»ç»Ÿæ›´æ”¹ã€‚æ„å»ºç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨æ­¤æ–‡ä»¶çš„é…ç½®å¡«å……sdkconfigä¸­æœªè®¾ç½®çš„å€¼ ç¼ºçœå€¼æ¸…å• sdkconfig.old é¡¹ç›®æ ¹ç›®å½•ã€è‡ªåŠ¨ç”Ÿæˆã€‘ å½“ä¿å­˜æ—§çš„menuconfigè®¾ç½®æ—¶ï¼Œæ„å»ºç³»ç»Ÿè‡ªåŠ¨å¤‡ä»½ä¸€ä¸ªåŸæ¥çš„sdkconfigæ–‡ä»¶ å¤‡ä»½ sdkconfig.ci è¯¥æ–‡ä»¶æ˜¯ CIï¼ˆæŒç»­é›†æˆï¼‰æµ‹è¯•æ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨æ­£å¸¸æ„å»ºè¿‡ç¨‹ä¸­ä¼šè¢«å¿½ç•¥ã€‚ å•å…ƒæµ‹è¯•æ—¶ sdkconfig.remane ç”¨äºé‡å‘½åå¼ƒç”¨çš„é…ç½®åï¼Œæ–¹ä¾¿æ—§é…ç½®æ–‡ä»¶å¿«é€Ÿç”¨äºæ–°é…ç½® å‘å‰å…¼å®¹ æ–°å»ºå·¥ç¨‹ æ–¹æ³•ä¸€é€šè¿‡idf.pyæŒ‡ä»¤1idf.py create-project projName æ–¹æ³•äºŒåœ¨esp-idfçš„example-&gt;â€™get-startedâ€™é‡Œé¢æ˜¯æœ‰ä¸€ä¸ªsample_projectçš„æ ·æ¿æ–‡ä»¶ï¼Œå¯ä»¥å¤åˆ¶ä¿®æ”¹ æ–‡ä»¶å†…å®¹ä»¥åŠä½œç”¨åˆ†æProjDir&#x2F;CMakeLists.txtæ–‡ä»¶è¿™æ˜¯å·¥ç¨‹ç›®å½•ä¸‹çš„ç»™CMakeä½¿ç”¨çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢æŒ‡å®šæˆ‘ä»¬éœ€è¦ç”¨çš„componnentè·¯å¾„ã€‚ 1234567891011# For more information about build system see# https://docs.espressif.com/projects/esp-idf/en/latest/api-guides/build-system.html# The following five lines of boilerplate have to be in your project&#x27;s# CMakeLists in this exact order for cmake to work correctlycmake_minimum_required(VERSION 3.5)set(EXTRA_COMPONENT_DIRS $ENV&#123;IDF_PATH&#125;/examples/common_components/led_strip)#è¿™ä¸€è¡Œå°±æ˜¯æŒ‡å®šé¡¹ç›®ç”¨åˆ°çš„componnentè·¯å¾„include($ENV&#123;IDF_PATH&#125;/tools/cmake/project.cmake)project(ws2812_master) ProjDir&#x2F;Makefileæ–‡ä»¶è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ç»™CMakeçš„ç¼–è¯‘æ–‡ä»¶ï¼Œè¿™é‡Œé¢çš„ä¿¡æ¯è¿˜æ˜¯æ¯”è¾ƒæœ‰ç”¨çš„ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨è¿™é‡Œé¢å£°æ˜ç”¨åˆ°çš„componnentè·¯å¾„ï¼Œç»™CMakeæŒ‡è·¯ã€‚è¦æ³¨æ„éœ€æ”¹PROJECT_NAME :&#x3D;ä¸ºä½ çš„é¡¹ç›®åç§°ã€‚ 12345678910## This is a project Makefile. It is assumed the directory this Makefile resides in is a# project subdirectory.#PROJECT_NAME := ws2812_masterEXTRA_COMPONENT_DIRS = $(IDF_PATH)/examples/common_components/led_stripinclude $(IDF_PATH)/make/project.mk ProjDir&#x2F;main&#x2F;CMakeLists.txtæ–‡ä»¶è¿™ä¸ªæ–‡ä»¶ç”¨æ¥ä¸ªCMakeæŒ‡è·¯ï¼Œå‘Šè¯‰å®ƒmainæ–‡ä»¶çš„ä½ç½®ï¼Œæ³¨æ„ä¿®æ”¹mainæ–‡ä»¶çš„åç§°ã€‚ 12idf_component_register(SRCS &quot;ws2812_master_main.c&quot; INCLUDE_DIRS &quot;.&quot;) ProjDir&#x2F;main&#x2F;Kconfig.projbuildæ–‡ä»¶è¿™ä¸æ˜¯ä¸€ä¸ªå¿…é¡»çš„æ–‡ä»¶ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠä¸€äº›å¸¸é‡æ”¾è¿›idf.config menuconfigé‡Œé¢ï¼Œå¯ä»¥æ–¹ä¾¿é’ˆå¯¹æƒ…å†µä¿®æ”¹å·¥ç¨‹ï¼Œè€Œä¸éœ€è¦è¿›å…¥åˆ°ä»£ç é‡Œé¢ã€‚å®ƒçš„æ ¼å¼è¯·å‚è€ƒä¸‹é¢çš„æ ¼å¼ï¼Œæˆ–è€…ç¤ºä¾‹å·¥ç¨‹é‡Œé¢ä¹Ÿæœ‰è¿™ä¸ªæ–‡ä»¶ã€‚åœ¨ä»£ç ä¸­ä½¿ç”¨éœ€è¦æ³¨æ„ï¼šWS2812_RMT_GPIO è¿™ä¸ªé…ç½®é¡¹åœ¨ä½¿ç”¨çš„æ—¶å€™åº”è¯¥ä¸ºCONFIG_WS2812_RMT_GPIO 12345678910111213menu &quot;WS2812 RMT Configuration&quot; config WS2812_RMT_GPIO int &quot;RMT TX GPIO&quot; default 48 help Set the GPIO numbers used for transmitting the RMT single. config WS2812_STRIP_LED_NUMBER int &quot;Number of LEDs in strip&quot; default 25 help A single RGB strip contains serveral LEDs.endmenu","categories":[{"name":"esp","slug":"esp","permalink":"http://example.com/categories/esp/"}],"tags":[{"name":"esp","slug":"esp","permalink":"http://example.com/tags/esp/"}]},{"title":"lvglä»¿çœŸ","slug":"lvgl/lvglsim","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:27:49.376Z","comments":true,"path":"2024/12/26/lvgl/lvglsim/","permalink":"http://example.com/2024/12/26/lvgl/lvglsim/","excerpt":"","text":"LVGLä»¿çœŸLinuxä¸€ã€åŸºäºSDL2 SDL2å®‰è£… å®‰è£…åœ°å€URL1234urlï¼šhttp://www.libsdl.org/download-2.0.php./configure make sudo make install æˆ–è€…1sudo apt-get update &amp;&amp; sudo apt-get install -y build-essential libsdl2-dev ä¸‹è½½åŸºäºSDL2ç¼–è¯‘çš„åŒ…1git clone --recursive https://github.com/lvgl/lv_sim_vscode_sdl ç¼–è¯‘è¿è¡Œ1./bulid/bin/demo æç¤ºerror while loading shared libraries libSDL-1.2.so.0æ²¡æ‰¾åˆ°åº“ï¼Œéœ€é‡æ–°å®‰è£…1sudo apt-get install --reinstall libsdl1.2debian æ—§çš„ä»¿çœŸç¯å¢ƒåˆ é™¤ï¼Œç”±lv_port_pc_eclipseæ›¿æ¢1https://github.com/lvgl/lv_port_pc_eclipse.git 12CFLAGS ?= -O3 -I$(LVGL_DIR)/ $(WARNINGS) -I../SDL2-2.0.14/_instal/includeLDFLAGS ?= -L../SDL2-2.0.14/_instal/lib -lSDL2 -lm -lpthread è¿è¡Œ1./demo äºŒã€åŸºäºframebuffer ä¸‹è½½æºç  1git clone --recursive https://github.com/lvgl/lv_port_linux_frame_buffer ç¼–è¯‘å æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯ 1ctrl+alt+F2 #(1234)é€€å‡ºF7 WindowsåŒlinuxåŸºäºSDL2 ä¸‹è½½windows SDL2 mingw32å®‰è£…SDL2 i686-w64-mingw32å¤åˆ¶åˆ°ç¯å¢ƒè·¯å¾„ 1where g++ è‹¥æç¤º_beginthreadex _endthreadexé”™è¯¯,åˆ™å› ä¸ºmingw32ç‰ˆæœ¬ä¸å¤Ÿï¼Œéœ€æ”¹åŠ¨main.c 123#include &lt;windows.h&gt;// SDL_CreateThread(tick_thread, &quot;tick&quot;, NULL);CreateThread(NULL,0,tick_thread,0,0,0); ä½¿ç”¨lv_port_pc_eclipse lib&#x2F;libSDL2.dll.aå’Œinclude&#x2F;SDL2æ”¾å…¥å¯¹åº”æ–‡ä»¶å¤¹ï¼Œåˆ é™¤makefileå¤šä½™è§„åˆ™ WSLæœ€ç®€æ´ å®‰è£…SDL2åº“1sudo apt install libsdl2-dev ä½¿ç”¨lv_port_pc_vscode1git clone --recursive https://github.com/lvgl/lv_port_pc_vscode ç¼–è¯‘è¿è¡Œ1cmake -B build å­—ä½“ä»¿çœŸä¿®æ”¹å–å­—åº“æ–‡ä»¶ 12345678910111213141516171819static uint8_t *__user_font_getdata(int offset, int size)&#123; //å¦‚å­—æ¨¡ä¿å­˜åœ¨SPI FLASH, SPIFLASH_Read(__g_font_buf,offset,size); //å¦‚å­—æ¨¡å·²åŠ è½½åˆ°SDRAM,ç›´æ¥è¿”å›åç§»åœ°å€å³å¯(sdram_fontddr+offset); FILE *fp; fp=fopen(&quot;/d/myFont2.bin&quot;,&quot;rb&quot;); if (fp == 0) &#123; LV_LOG_WARN(&quot;open error&quot;); &#125; else &#123; // LV_LOG_WARN(&quot;open OK&quot;); fseek(fp,offset,SEEK_SET); fread(__g_font_buf,size,1,fp); fclose(fp); &#125; return __g_font_buf;&#125;","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"lvgl","slug":"lvgl","permalink":"http://example.com/tags/lvgl/"}]},{"title":"lvglç§»æ¤","slug":"lvgl/lvgluse","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:12:29.355Z","comments":true,"path":"2024/12/26/lvgl/lvgluse/","permalink":"http://example.com/2024/12/26/lvgl/lvgluse/","excerpt":"","text":"LVGLç§»æ¤åˆå§‹åŒ–éœ€è¦1234lv_init();lv_port_disp_init(); // æ˜¾ç¤ºå™¨åˆå§‹åŒ–lv_port_indev_init(); // è¾“å…¥è®¾å¤‡åˆå§‹åŒ–ï¼ˆå¦‚æœæ²¡æœ‰å®ç°å°±æ³¨é‡Šæ‰ï¼‰lv_port_fs_init(); // æ–‡ä»¶ç³»ç»Ÿè®¾å¤‡åˆå§‹åŒ–ï¼ˆå¦‚æœæ²¡æœ‰å®ç°å°±æ³¨é‡Šæ‰ï¼‰ ä¿®æ”¹lvgl&#x2F;src&#x2F;examples&#x2F;portingä¸‹æ¥å£æ˜¾ç¤ºæ¥å£ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#include &quot;lv_port_disp.h&quot;#include &quot;lvgl/lvgl.h&quot;#include &quot;lcd.h&quot;static void disp_init(void);static void disp_flush(lv_disp_drv_t * disp_drv, const lv_area_t * area, lv_color_t * color_p);#define MY_DISP_HOR_RES (320)void lv_port_disp_init(void)&#123; /*------------------------- * Initialize your display * -----------------------*/ disp_init(); static lv_disp_draw_buf_t draw_buf_dsc_1; static lv_color_t buf_1[MY_DISP_HOR_RES * 10]; /*A buffer for 10 rows*/ lv_disp_draw_buf_init(&amp;draw_buf_dsc_1, buf_1, NULL, MY_DISP_HOR_RES * 10); /*Initialize the display buffer*/ static lv_disp_drv_t disp_drv; /*Descriptor of a display driver*/ lv_disp_drv_init(&amp;disp_drv); /*Basic initialization*/ /*Set up the functions to access to your display*/ /*Set the resolution of the display*/ disp_drv.hor_res = 320; disp_drv.ver_res = 480; /*Used to copy the buffer&#x27;s content to the display*/ disp_drv.flush_cb = disp_flush; /*Set a display buffer*/ disp_drv.draw_buf = &amp;draw_buf_dsc_1; lv_disp_drv_register(&amp;disp_drv);&#125;static void disp_init(void)&#123; /*You code here*/ LCD_Init();&#125;static void disp_flush(lv_disp_drv_t * disp_drv, const lv_area_t * area, lv_color_t * color_p)&#123; /*The most simple case (but also the slowest) to put all pixels to the screen one-by-one*/ int32_t x; int32_t y; LCD_SetWindow(area-&gt;x1, area-&gt;y1, area-&gt;x2, area-&gt;y2); for(y = area-&gt;y1; y &lt;= area-&gt;y2; y++) &#123; for(x = area-&gt;x1; x &lt;= area-&gt;x2; x++) &#123; /*Put a pixel to the display. For example:*/ /*put_px(x, y, *color_p)*/ LCD_WRITE_DATA(*(uint16_t*)color_p); color_p++; &#125; &#125; // LCD_Draw(area-&gt;x1,area-&gt;y1,area-&gt;x2,area-&gt;y2,(uint16_t *)color_p); /*IMPORTANT!!! *Inform the graphics library that you are ready with the flushing*/ lv_disp_flush_ready(disp_drv);&#125; è¾“å…¥è®¾å¤‡ 1234567891011121314151617181920212223242526272829303132333435363738static void touchpad_read(lv_indev_drv_t * indev_drv, lv_indev_data_t * data)&#123; static lv_coord_t last_x = 0; static lv_coord_t last_y = 0; /*Save the pressed coordinates and the state*/ /*Save the pressed coordinates and the state*/ if(!XPT2046_EXTI_Read()) &#123; touchpad_get_xy(&amp;last_x, &amp;last_y); data-&gt;state = LV_INDEV_STATE_PR; printf(&quot;x=%d,y=%d\\r\\n&quot;,last_x,last_y); &#125; else &#123; data-&gt;state = LV_INDEV_STATE_REL; &#125; /*Set the last pressed coordinates*/ data-&gt;point.x = last_x; data-&gt;point.y = last_y;&#125;/*Return true is the touchpad is pressed*/static bool touchpad_is_pressed(void)&#123; /*Your code comes here*/ return false;&#125;/*Get the x and y coordinates if the touchpad is pressed*/static void touchpad_get_xy(lv_coord_t * x, lv_coord_t * y)&#123; /*Your code comes here*/ (*x) = 319-XPT2046_ReadAdc_Fliter(XPT2046_CHANNEL_Y)*320/4095; (*y) = 479-XPT2046_ReadAdc_Fliter(XPT2046_CHANNEL_X)*480/4095;//4095-&#125; æ–‡ä»¶ç³»ç»Ÿ å¿ƒè·³1~10ï¼Œä¸€èˆ¬å–51234lv_tick_inc( tick );lv_task_handler();lv_conf.h GUI Guider","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"lvgl","slug":"lvgl","permalink":"http://example.com/tags/lvgl/"}]},{"title":"gitattributes","slug":"linux/gitattributes","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:00:56.018Z","comments":true,"path":"2024/12/26/linux/gitattributes/","permalink":"http://example.com/2024/12/26/linux/gitattributes/","excerpt":"","text":".gitattributesåŸºæœ¬ç”¨æ³• 1.è®¾ç½®è¡Œå°¾å­—ç¬¦ï¼š ä½ å¯ä»¥è®¾ç½®æ–‡æœ¬æ–‡ä»¶åœ¨æ£€å‡ºæ—¶åº”è¯¥ä½¿ç”¨å“ªç§è¡Œå°¾å­—ç¬¦(LFã€CRLF æˆ– auto)ã€‚è¿™å¯¹äºè·¨å¹³å°é¡¹ç›®ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸º Windows é€šå¸¸ä½¿ç”¨ CRLF è¡Œå°¾ï¼Œè€Œ Unix å’Œ Linux é€šå¸¸ä½¿ç”¨ LF è¡Œå°¾ã€‚text&#x3D;autoæˆ–è€…é’ˆå¯¹ç‰¹å®šæ–‡ä»¶æˆ–ç›®å½•ï¼š 12somefile.txt text eol=lfsubdir/ text eol=crlf 2.è¯†åˆ«æ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼š Git é»˜è®¤ä¼šå°è¯•å°†æ–‡ä»¶è¯†åˆ«ä¸ºæ–‡æœ¬æˆ–äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ .gitattributes æ–‡ä»¶æ¥æ˜ç¡®æŒ‡å®šã€‚ 12*.png binary# æˆ–è€…*.png -text 3.åˆå¹¶ç­–ç•¥ï¼š å¯¹äºåˆå¹¶å†²çªï¼Œä½ å¯ä»¥ä¸ºç‰¹å®šæ–‡ä»¶æˆ–ç›®å½•è®¾ç½®ä¸åŒçš„åˆå¹¶ç­–ç•¥ã€‚ä½¿ç”¨è‡ªå®šä¹‰çš„åˆå¹¶å·¥å…· 1*.c merge=mytool 4.å·®å¼‚ç®—æ³•ï¼š ä½ å¯ä»¥ä¸ºæŸäº›æ–‡ä»¶æŒ‡å®šç‰¹å®šçš„å·®å¼‚ç®—æ³•ï¼Œä»¥æ”¹è¿› Git æ˜¾ç¤ºçš„å·®å¼‚ã€‚ä½¿ç”¨ word-diff ç®—æ³• 1*.doc diff=word 5.å¯¼å‡ºè¿‡æ»¤å™¨ï¼š å½“ä½¿ç”¨ git archive å‘½ä»¤åˆ›å»ºå½’æ¡£æ—¶ï¼Œä½ å¯ä»¥æŒ‡å®šè¿‡æ»¤å™¨æ¥ä¿®æ”¹å¯¼å‡ºçš„æ–‡ä»¶å†…å®¹ã€‚ 6.Smudge&#x2F;Clean è¿‡æ»¤å™¨ï¼š ä½ å¯ä»¥è®¾ç½® smudge å’Œ clean è¿‡æ»¤å™¨ï¼Œè¿™äº›è¿‡æ»¤å™¨ä¼šåœ¨æ£€å‡ºå’Œæäº¤æ—¶åˆ†åˆ«åº”ç”¨ï¼Œç”¨äºä¿®æ”¹æ–‡ä»¶å†…å®¹ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™äº›è¿‡æ»¤å™¨æ¥åŠ å¯†å’Œè§£å¯†æ–‡ä»¶ï¼Œæˆ–è€…åœ¨æ£€å‡ºæ—¶è‡ªåŠ¨è½¬æ¢æ–‡ä»¶æ ¼å¼ã€‚ 7.è¯­è¨€è¯†åˆ«ï¼š é€šè¿‡ .gitattributes æ–‡ä»¶,Git å¯ä»¥æ›´å¥½åœ°è¯†åˆ«æŸäº›æ–‡ä»¶çš„è¯­è¨€ï¼Œä»è€Œæ”¹è¿›ä»£ç ç»Ÿè®¡å’Œè¯­æ³•é«˜äº®ç­‰åŠŸèƒ½ã€‚ ä¸ºäº†ä½¿ç”¨ .gitattributes æ–‡ä»¶ï¼Œä½ éœ€è¦å°†å…¶æ”¾ç½®åœ¨ä»“åº“çš„æ ¹ç›®å½•æˆ–ä»»ä½•å­ç›®å½•ä¸­ã€‚å¦‚æœæ–‡ä»¶ä½äºå­ç›®å½•ä¸­ï¼Œå®ƒåªä¼šå½±å“è¯¥å­ç›®å½•åŠå…¶å­ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚è¿˜å¯ä»¥åœ¨ .gitattributes æ–‡ä»¶ä¸­ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥æŒ‡å®šå“ªäº›æ–‡ä»¶æˆ–ç›®å½•åº”è¯¥åº”ç”¨è¿™äº›å±æ€§ã€‚ .gitattributes æ–‡ä»¶çš„æ›´æ”¹ä¸ä¼šå½±å“å·²ç»æäº¤åˆ° Git ä»“åº“çš„æ–‡ä»¶å†…å®¹ã€‚è¿™äº›æ›´æ”¹åªä¼šå½±å“æœªæ¥çš„æ£€å‡ºå’Œæäº¤æ“ä½œã€‚ gitattributesæ–‡ä»¶ç¤ºä¾‹ï¼š123456* text=auto*.txt text*.jpg -text*.vcproj text eol=crlf*.sh text eol=lf*.py eol=lf è¯´æ˜ï¼š ç¬¬1è¡Œï¼Œå¯¹ä»»ä½•æ–‡ä»¶ï¼Œè®¾ç½®text&#x3D;autoï¼Œè¡¨ç¤ºæ–‡ä»¶çš„è¡Œå°¾è‡ªåŠ¨è½¬æ¢ã€‚å¦‚æœæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œåˆ™åœ¨æ–‡ä»¶å…¥Gitåº“æ—¶ï¼Œè¡Œå°¾è‡ªåŠ¨è½¬æ¢ä¸ºLFã€‚å¦‚æœå·²ç»åœ¨å…¥Gitåº“ä¸­çš„æ–‡ä»¶çš„è¡Œå°¾ä¸ºCRLFï¼Œåˆ™è¯¥æ–‡ä»¶åœ¨å…¥Gitåº“æ—¶ï¼Œä¸å†è½¬æ¢ä¸ºLFã€‚ ç¬¬2è¡Œï¼Œå¯¹äºtxtæ–‡ä»¶ï¼Œæ ‡è®°ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œè¡Œå°¾è§„èŒƒåŒ–ã€‚ ç¬¬3è¡Œï¼Œå¯¹äºjpgæ–‡ä»¶ï¼Œæ ‡è®°ä¸ºéæ–‡æœ¬æ–‡ä»¶ï¼Œä¸è¿›è¡Œä»»ä½•çš„è¡Œå°¾è½¬æ¢ã€‚ ç¬¬4è¡Œï¼Œå¯¹äºvcprojæ–‡ä»¶ï¼Œæ ‡è®°ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å…¥Gitåº“æ—¶è¿›è¡Œè§„èŒƒåŒ–ï¼Œå³è¡Œå°¾ä¸ºLFã€‚ä½†æ˜¯åœ¨æ£€å‡ºåˆ°å·¥ä½œç›®å½•æ—¶ï¼Œè¡Œå°¾è‡ªåŠ¨è½¬æ¢ä¸ºCRLFã€‚ ç¬¬5è¡Œï¼Œå¯¹äºshæ–‡ä»¶ï¼Œæ ‡è®°ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å…¥Gitåº“æ—¶è¿›è¡Œè§„èŒƒåŒ–ï¼Œå³è¡Œå°¾ä¸ºLFã€‚åœ¨æ£€å‡ºåˆ°å·¥ä½œç›®å½•æ—¶ï¼Œè¡Œå°¾ä¹Ÿä¸ä¼šè½¬æ¢ä¸ºCRLFï¼ˆå³ä¿æŒLFï¼‰ã€‚ ç¬¬6è¡Œï¼Œå¯¹äºpyæ–‡ä»¶ï¼Œåªé’ˆå¯¹å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œè¡Œå°¾ä¸ºLFã€‚","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"git","slug":"git","permalink":"http://example.com/tags/git/"}]},{"title":"GCC lib","slug":"linux/lib","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:07:29.085Z","comments":true,"path":"2024/12/26/linux/lib/","permalink":"http://example.com/2024/12/26/linux/lib/","excerpt":"","text":"GCCåº“ç”ŸæˆåŠ¨æ€åº“å’Œé™æ€åº“ç¼–è¯‘ä½¿ç”¨main.c 12345678#include &lt;stdio.h&gt;#include &quot;max.h&quot;int main(int argc, char *argv[])&#123; int a = 10, b = -2, c = 100; printf(&quot;max among 10, -2 and 100 is %d.\\n&quot;, max(a, b, c)); return 0;&#125; max.c 123456789#include &quot;stdio.h&quot;int max(int n1, int n2, int n3)&#123; int max_num = n1; max_num = max_num &lt; n2? n2: max_num; max_num = max_num &lt; n3? n3: max_num; printf(&quot;\\nlib test makefile add path\\n&quot;); return max_num;&#125; max.h 1234#ifndef __MAX_H__#define __MAX_H__int max(int n1, int n2, int n3);#endif makefile 1234567891011121314151617.PHONY: build test cleanmax.o: max.c gcc -c -fPIC $&lt;#åŠ¨æ€åº“build1: max.o gcc -o libmax.so -shared max.otest1: main.c build1 gcc -o dynamic $&lt; -L./ -Wl,-rpath=./ -lmax#é™æ€åº“build2:max.o ar -rcs libmaxs.a max.otest2: main.c build2 gcc -o static $&lt; -L ./ -lmaxsclean: rm -f *.o *.so *.a gccå¸¸ç”¨ç¼–è¯‘é€‰é¡¹ï¼š é€‰é¡¹ å«ä¹‰ -static é“¾æ¥é™æ€åº“ï¼Œç¦æ­¢ä½¿ç”¨åŠ¨æ€åº“ -shared è¿›è¡ŒåŠ¨æ€åº“ç¼–è¯‘ï¼Œé“¾æ¥åŠ¨æ€åº“ -Ldir åœ¨åº“çš„æœç´¢è·¯å¾„ä¸­å¢åŠ dirç›®å½• -lname é“¾æ¥é™æ€åº“(libname.a)æˆ–åŠ¨æ€åº“(libname.so)çš„åº“æ–‡ä»¶ -fPIC(æˆ–fpic) ç”Ÿæˆä½¿ç”¨ç›¸å¯¹åœ°å€æ— å…³çš„ç›®æ ‡ä»£ç  -Wl,-rpath&#x3D;dir æŒ‡å®šåŠ¨æ€åº“æ–‡ä»¶ä½ç½®","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"makefile","slug":"makefile","permalink":"http://example.com/tags/makefile/"},{"name":"gcc","slug":"gcc","permalink":"http://example.com/tags/gcc/"}]},{"title":"Makefile","slug":"linux/makefile","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:20:20.601Z","comments":true,"path":"2024/12/26/linux/makefile/","permalink":"http://example.com/2024/12/26/linux/makefile/","excerpt":"","text":"Makefileè¯­æ³•å‚è€ƒ ç”Ÿæˆéƒ¨åˆ†å»ºæ–‡ä»¶å¤¹12345678910OBJECTS += $(addprefix $(BUILD_DIR)/,$(ASM_SOURCES:.s=.o))vpath %.s $(sort $(dir $(ASM_SOURCES)))$(BUILD_DIR)/%.o: %.c Makefile | $(BUILD_DIR) @mkdir -p $(dir $@) $(CC) -c $(CFLAGS) -Wa,-a,-ad,-alms=$(BUILD_DIR)/$(&lt;:.c=.lst) $&lt; -o $@ @mkdir -p $(dir $(BUILD_DIR)/$&lt;) # $(CC) -c $(CFLAGS) -Wa,-a,-ad,-alms=$(BUILD_DIR)/$(&lt;:.c=.lst) $&lt; -o $(BUILD_DIR)/$(&lt;:.c=.o) é€šé…ç¬¦ 12C_SOURCES = \\$(wildcard Template/*.c) \\ æ’é™¤ 1C_SOURCES := $(filter-out APP/glyc.c, $(C_SOURCES)) åæ±‡ç¼– 12$(TARGET_ASM): $(TARGET_AXF) arm-none-eabi-objdump -d $&lt; &gt; $@ ç”Ÿæˆåº“ 1ar -rc lib.a 1.o 2.o ... æ¡ä»¶ 123456OS = 1ifeq ($(OS),1)###else###endif å…³é”®å­— 123addprefixåŠ å‰ç¼€wildcardé€šé…filter-outæ’é™¤ å¢åŠ ç”¨é‡æ˜¾ç¤º 1-Wl,--print-memory-usage å‘½ä»¤åˆå¹¶ å…¶ä»– 12345678910111213141516171819202122232425262728all clean ocd_flash ocd_flash_softdevice: make -C $(DIR) $@openocd: openocd -f interface/ADAPTER.cfg -f board/MYBOARD.cfg# makefileæ·»åŠ debug: openocd -f openocd.cfg &amp; &quot;C:\\Program Files (x86)\\GNU Arm Embedded Toolchain\\9 2020-q2-update\\bin/arm-none-eabi-gdb&quot; ./_build/$(TARGETS).out -ex &quot;target remote localhost:3333&quot; exit: @taskkill -f -im openocd.exedownload: @echo &quot;h&quot; &gt; jlink.cfg @echo &quot;loadfile&quot; $(BUILD)/$(TARGET).hex &gt;&gt; jlink.cfg @echo &quot;r&quot; &gt;&gt; jlink.cfg @echo &quot;qc&quot; &gt;&gt; jlink.cfg @$(JLINKEXE) -device $(CHIP) -Speed 4000 -IF SWD -CommanderScript jlink.cfg @$(RM) jlink.cfg#ç³»ç»Ÿåˆ¤æ–­ï¼šifeq ($(OS),Windows_NT) RM = rmdir /s /qelse RM = rm -rfendif F303discovery123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247########################################################################################################################### File automatically-generated by tool: [projectgenerator] version: [3.11.2] date: [Fri Dec 03 14:33:59 CST 2021]########################################################################################################################### ------------------------------------------------# Generic Makefile (based on gcc)## ChangeLog :# 2017-02-10 - Several enhancements + project update mode# 2015-07-22 - first version# ------------------------------------------------####################################### target######################################TARGET = F303####################################### building variables####################################### debug build?DEBUG = 1# optimizationOPT = -Og######################################## paths######################################## Build pathBUILD_DIR = build####################################### source####################################### C sourcesC_SOURCES = \\startup_stm32.c \\Core/Src/main.c \\Core/Src/gpio.c \\Core/Src/i2c.c \\Core/Src/spi.c \\Core/Src/usb.c \\Core/Src/usart.c \\Core/Src/stm32f3xx_it.c \\Core/Src/stm32f3xx_hal_msp.c \\Core/Src/system_stm32f3xx.c \\STM32F3-Discovery/stm32f3_discovery.c \\STM32F3-Discovery/stm32f3_discovery_gyroscope.c \\STM32F3-Discovery/stm32f3_discovery_accelerometer.c# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_ll_usb.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_i2c.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_i2c_ex.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_rcc.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_rcc_ex.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_gpio.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_dma.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_cortex.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_pwr.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_pwr_ex.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_flash.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_flash_ex.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_exti.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_spi.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_spi_ex.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_tim.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_tim_ex.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_uart.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_uart_ex.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_pcd.c \\# Drivers/STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_pcd_ex.cC_SOURCES+=$(wildcard components/commmon/*.c) \\$(wildcard components/i3g4250d/*.c) \\$(wildcard components/l3gd20/*.c) \\$(wildcard components/lsm303agr/*.c) \\$(wildcard components/lsm303dlhc/*.c) \\$(wildcard imu/*.c)# ASM sourcesASM_SOURCES = \\# startup_stm32f303xc.s######################################## binaries#######################################PREFIX = arm-none-eabi-# The gcc compiler bin path can be either defined in make command via GCC_PATH variable (&gt; make GCC_PATH=xxx)# either it can be added to the PATH environment variable.GCC_PATH = &quot;C:\\Program Files (x86)\\GNU Arm Embedded Toolchain\\9 2020-q2-update\\bin&quot;ifdef GCC_PATHCC = $(GCC_PATH)/$(PREFIX)gccAS = $(GCC_PATH)/$(PREFIX)gcc -x assembler-with-cppCP = $(GCC_PATH)/$(PREFIX)objcopySZ = $(GCC_PATH)/$(PREFIX)sizeAR = $(GCC_PATH)/$(PREFIX)arMP = $(GCC_PATH)/$(PREFIX)objdumpelseCC = $(PREFIX)gccAS = $(PREFIX)gcc -x assembler-with-cppCP = $(PREFIX)objcopySZ = $(PREFIX)sizeAR = $(PREFIX)arendifHEX = $(CP) -O ihexBIN = $(CP) -O binary -S ######################################## CFLAGS######################################## cpuCPU = -mcpu=cortex-m4# fpuFPU = -mfpu=fpv4-sp-d16# float-abiFLOAT-ABI = -mfloat-abi=hard# mcuMCU = $(CPU) -mthumb $(FPU) $(FLOAT-ABI)# macros for gcc# AS definesAS_DEFS = # C definesC_DEFS = \\-DUSE_HAL_DRIVER \\-DSTM32F303xC# AS includesAS_INCLUDES = # C includesC_INCLUDES = \\-ICore/Inc \\-IDrivers/STM32F3xx_HAL_Driver/Inc \\-IDrivers/STM32F3xx_HAL_Driver/Inc/Legacy \\-IDrivers/CMSIS/Device/ST/STM32F3xx/Include \\-IDrivers/CMSIS/Include \\-ISTM32F3-Discovery \\-Icomponents/l3gd20 \\-Icomponents/lsm303agr \\-Icomponents/lsm303dlhc \\-Icomponents/i3g4250d \\-Iimu# compile gcc flagsASFLAGS = $(MCU) $(AS_DEFS) $(AS_INCLUDES) $(OPT) -Wall -fdata-sections -ffunction-sectionsCFLAGS = $(MCU) $(C_DEFS) $(C_INCLUDES) $(OPT) -Wall -fdata-sections -ffunction-sectionsifeq ($(DEBUG), 1)CFLAGS += -g -gdwarf-2endif# Generate dependency informationCFLAGS += -MMD -MP -MF&quot;$(@:%.o=%.d)&quot;######################################## LDFLAGS######################################## link scriptLDSCRIPT = STM32F303VCTx_FLASH.ld# librariesLIBS = -lc -lm -lnosys LIBS += Drivers/STM32F303VCTx.libLIBDIR =LDFLAGS = $(MCU) -specs=nano.specs -T$(LDSCRIPT) $(LIBDIR) $(LIBS) -Wl,-Map=$(BUILD_DIR)/$(TARGET).map,--cref -Wl,--gc-sections# default action: build allall: $(BUILD_DIR)/$(TARGET).elf $(BUILD_DIR)/$(TARGET).hex $(BUILD_DIR)/$(TARGET).binDrivers/STM32F303VCTx.lib: lib######################################## build the application######################################## list of objectsOBJECTS = $(addprefix $(BUILD_DIR)/,$(notdir $(C_SOURCES:.c=.o)))vpath %.c $(sort $(dir $(C_SOURCES)))# list of ASM program objectsOBJECTS += $(addprefix $(BUILD_DIR)/,$(notdir $(ASM_SOURCES:.s=.o)))vpath %.s $(sort $(dir $(ASM_SOURCES)))$(BUILD_DIR)/%.o: %.c Makefile | $(BUILD_DIR) $(CC) -c $(CFLAGS) -Wa,-a,-ad,-alms=$(BUILD_DIR)/$(notdir $(&lt;:.c=.lst)) $&lt; -o $@$(BUILD_DIR)/%.o: %.s Makefile | $(BUILD_DIR) $(AS) -c $(CFLAGS) $&lt; -o $@$(BUILD_DIR)/$(TARGET).elf: $(OBJECTS) Makefile $(CC) $(OBJECTS) $(LDFLAGS) -o $@ $(SZ) $@$(BUILD_DIR)/%.hex: $(BUILD_DIR)/%.elf | $(BUILD_DIR) $(HEX) $&lt; $@ $(BUILD_DIR)/%.bin: $(BUILD_DIR)/%.elf | $(BUILD_DIR) $(BIN) $&lt; $@ $(BUILD_DIR): mkdir $@ ######################################## clean up#######################################clean: -rm -fR $(BUILD_DIR) ocd_flash: $(BUILD_DIR)/$(TARGET).hex openocd -f openocd.cfg -c &quot;program $^ verify reset exit&quot;debug: openocd -f openocd.cfg &amp; &quot;C:\\Program Files (x86)\\GNU Arm Embedded Toolchain\\9 2020-q2-update\\bin/arm-none-eabi-gdb&quot; $(BUILD_DIR)/$(TARGET).elf -ex &quot;target remote localhost:3333&quot; exit: @taskkill -f -im openocd.exedump: $(MP) -d $(BUILD_DIR)/$(TARGET).elf &gt; dump.txtexport CFLAGS CC AR BUILD_DIRlib libclean: make -C Drivers $@ ######################################## dependencies#######################################-include $(wildcard $(BUILD_DIR)/*.d)# *** EOF *** Drivers&#x2F;makefile1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#$(wildcard STM32F3xx_HAL_Driver/Src/*.c)LIB_SOURCES+= \\STM32F3xx_HAL_Driver/Src/stm32f3xx_ll_usb.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_i2c.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_i2c_ex.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_rcc.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_rcc_ex.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_gpio.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_dma.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_cortex.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_pwr.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_pwr_ex.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_flash.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_flash_ex.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_exti.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_spi.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_spi_ex.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_tim.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_tim_ex.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_uart.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_uart_ex.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_pcd.c \\STM32F3xx_HAL_Driver/Src/stm32f3xx_hal_pcd_ex.cC_INCLUDES = \\-I../Core/Inc \\-ISTM32F3xx_HAL_Driver/Inc \\-ISTM32F3xx_HAL_Driver/Inc/Legacy \\-ICMSIS/Device/ST/STM32F3xx/Include \\-ICMSIS/Include OBJECTS = $(addprefix $(BUILD_DIR)/,$(notdir $(LIB_SOURCES:.c=.o)))vpath %.c $(sort $(dir $(LIB_SOURCES)))# list of ASM program objects$(BUILD_DIR)/%.o: %.c $(BUILD_DIR) @$(CC) -c $(CFLAGS) $(C_INCLUDES) -Wa,-a,-ad,-alms=$(BUILD_DIR)/$(notdir $(&lt;:.c=.lst)) $&lt; -o $@ @echo &quot;Compiled &quot;$&lt;&quot;\\n&quot;$(BUILD_DIR): mkdir $@ HALLIB = STM32F303VCTx.liblib: $(HALLIB)$(HALLIB):$(BUILD_DIR) $(OBJECTS) $(AR) -r $@ $(OBJECTS) libclean: rm -rf $(BUILD_DIR) rm STM32F303VCTx.lib å…¶ä»–æ“ä½œï¼Œæ‰“å°è¾“å‡ºè¾“å‡ºé¢œè‰²ï¼Œæ˜¾ç¤ºå‘½ä»¤ï¼Œå¸®åŠ©123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150C_SRCS := C_OBJS := $(patsubst %.c,$(OBJ_FOLDER)%.o,$(notdir $(C_SRCS)))CPP_SRCS := CPP_OBJS := $(patsubst %.cpp,$(OBJ_FOLDER)%.o,$(notdir $(CPP_SRCS)))S_SRCS := S_OBJS = $(patsubst %.s,$(OBJ_FOLDER)%.o,$(filter %.s,$(notdir $(S_SRCS))))S_OBJS += $(patsubst %.S,$(OBJ_FOLDER)%.o,$(filter %.S,$(notdir $(S_SRCS))))#-------------------------------------------------------------------------------# Logging options#-------------------------------------------------------------------------------# Enable color output by default.USE_COLOR ?= 1# Normally, commands in recipes are prefixed with &#x27;@&#x27; so the command itself# is not echoed by make. But if VERBOSE is defined (set to anything non-empty),# then the &#x27;@&#x27; is removed from recipes. The &#x27;at&#x27; variable is used to control# this.ifeq &quot;$(VERBOSE)&quot; &quot;1&quot;at :=elseat := @endif# These colors must be printed with the printf command. echo won&#x27;t handle the# escape sequences.color_default = \\033[00mcolor_bold = \\033[01mcolor_red = \\033[31mcolor_green = \\033[32mcolor_yellow = \\033[33mcolor_blue = \\033[34mcolor_magenta = \\033[35mcolor_cyan = \\033[36mcolor_orange = \\033[38;5;172mcolor_light_blue = \\033[38;5;039mcolor_gray = \\033[38;5;008mcolor_purple = \\033[38;5;097mifeq &quot;$(USE_COLOR)&quot; &quot;1&quot;color_build := $(color_light_blue)color_c := $(color_green)color_cxx := $(color_green)color_cpp := $(color_orange)color_asm := $(color_magenta)color_ar := $(color_yellow)color_link := $(color_cyan)color_convert := $(color_gray)endif# Used in printmessage if the color args are not present.color_ :=# Use in recipes to print color messages if printing to a terminal. If# USE_COLOR is not set to 1, this reverts to a simple uncolorized printf.# A newline is added to the end of the printed message.## Arguments:# 1 - name of the color variable (see above), minus the &quot;color_&quot; prefix# 2 - first colorized part of the message# 3 - first uncolorized part of the message# 4 - color name for second colorized message# 5 - second colorized message# 6 - second uncolorized part of the message# 7 - uncolorized prefix on the whole line; this is last because it is expected to be used rarely## All arguments are optional.## Use like:# $(call printmessage,cyan,Building, remainder of the message...)ifeq &quot;$(USE_COLOR)&quot; &quot;1&quot;define printmessageif [ -t 1 ]; then printf &quot;$(7)$(color_$(1))$(2)$(color_default)$(3)$(color_$(4))$(5)$(color_default)$(6)\\n&quot; ; \\else printf &quot;$(7)$(2)$(3)$(5)$(6)\\n&quot; ; fiendefelsedefine printmessageprintf &quot;$(7)$(2)$(3)$(5)$(6)\\n&quot;endefendif#-------------------------------------------------------------------------------# Recipes#-------------------------------------------------------------------------------# Compile C sources.$(OBJ_FOLDER)%.o : %.c @$(call printmessage,c,Compiling, $&lt;) $(at)$(CC) $(CFLAGS) $(COMMON_FLAGS) $&lt; -o $@# Compile C++ sources.$(OBJ_FOLDER)%.o : %.cpp @$(call printmessage,cxx,Compiling, $&lt;) $(at)$(CXX) $(CXXFLAGS) $(COMMON_FLAGS) $&lt; -o $@# Preprocess and assemble .S sources.$(OBJ_FOLDER)%.o : %.S @$(call printmessage,asm,Assembling, $&lt;) $(at)$(AS) $(ASFLAGS) $(COMMON_FLAGS) $&lt; -o $@# Assemble .s sources.$(OBJ_FOLDER)%.o : %.s @$(call printmessage,asm,Assembling, $&lt;) $(at)$(AS) $(ASFLAGS) $(COMMON_FLAGS) $&lt; -o $@$(OUT_DIR):ifeq ($(OS),Windows_NT) $(at)-mkdir $(OUT_DIR)else $(at)$(shell mkdir $(OBJ_FOLDER) 2&gt;/dev/null)endif# Tool invocations$(LD_SCRIPT): $(LD_SCRIPT_IN) @$(call printmessage,cpp,Preprocessing, $&lt;) $(at)$(CPP) $(CPP_FLAGS) $(LD_CPP_FLAGS) $(INC_DIRS_F) $(CC_SYMBOLS) -MMD $&lt; -o $@$(TARGET_OUT): $(LD_SCRIPT) $(C_OBJS) $(CPP_OBJS) $(S_OBJS) @$(call printmessage,link,Linking, $@) $(at)$(LD) $(LIB_PATHS) -o $@ $(CPP_OBJS) $(C_OBJS) $(S_OBJS) $(O_OBJS) $(LIBS) $(LD_OPTIONS) $(at)$(SIZE) --totals $(TARGET_OUT) $(at)-$(NM) $(NMFLAGS) $(TARGET_OUT) &gt; $(OBJ_FOLDER)$(TARGET)-symbol-table.txt$(TARGET_HEX): $(TARGET_OUT) @$(call printmessage,convert,Converting, $@) $(at)@$(OBJCOPY) -O ihex $(TARGET_OUT) $(TARGET_HEX)$(TARGET_BIN): $(TARGET_OUT) @$(call printmessage,convert,Converting, $@) $(at)@$(OBJCOPY) -O binary $(TARGET_OUT) $(TARGET_BIN)help: @echo &quot;Useful targets:&quot; @echo &quot; - all (default)&quot; @echo &quot; - clean&quot; @echo &quot; - help&quot; @echo @echo &quot;Options:&quot; @echo &quot; - VERBOSE=&#123;0|1&#125; to show full command lines.&quot; @echo &quot; - USE_COLOR=&#123;0|1&#125; to override color output.&quot;","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"Makefile","slug":"Makefile","permalink":"http://example.com/tags/Makefile/"}]},{"title":"æ ‘è“æ´¾","slug":"linux/raspberrypi","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:07:41.087Z","comments":true,"path":"2024/12/26/linux/raspberrypi/","permalink":"http://example.com/2024/12/26/linux/raspberrypi/","excerpt":"","text":"å¼€æœº æ ¼å¼åŒ–SDå¡ é•œåƒçƒ§å½•ï¼ˆå¦‚æœå¤±è´¥éœ€è¦è¦†ç›–æ ¼å¼åŒ–SDå¡ï¼‰ bootæ–‡ä»¶å¤¹ä¸‹æ·»åŠ sshç©ºæ–‡ä»¶ sshè¿æ¥ ssh pi@ip è¿œç¨‹æ¡Œé¢sodu apt-get install xrdp wifi ç¼–è¾‘ wpa_supplicant.conf1sudo nano /etc/wpa_supplicant/wpa_supplicant.conf æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆæ›¿æ¢ä¸ºä½ çš„ Wi-Fi ä¿¡æ¯ï¼‰ï¼š1network=&#123; ssid=&quot;ä½ çš„Wi-Fiåç§°&quot; psk=&quot;ä½ çš„Wi-Fiå¯†ç &quot; key_mgmt=WPA-PSK &#125; é‡å¯ç½‘ç»œæœåŠ¡1sudo wpa_cli -i wlan0 reconfigure æ—¶åŒºè¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¯ç”¨æ—¶åŒºåˆ—è¡¨ï¼š 12timedatectl list-timezonestimedatectl list-timezones | grep Asia æ‰¾åˆ°æ‚¨æƒ³è¦è®¾ç½®çš„æ—¶åŒºï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œè®¾ç½®ï¼Œå°†Europe&#x2F;Berlinæ›¿æ¢ä¸ºæ‚¨çš„æ—¶åŒºï¼š 1sudo timedatectl set-timezone Asia/Shanghai è®¾ç½®å®Œæˆåï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¡®è®¤æ—¶åŒºå·²ç»æ›´æ”¹ï¼š 1timedatectl å¯»æ‰¾ä¸»æœºåraspberrypi 1ping raspberrypi","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"raspberrypi","slug":"raspberrypi","permalink":"http://example.com/tags/raspberrypi/"}]},{"title":"RTMP","slug":"linux/rtmp","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:07:45.331Z","comments":true,"path":"2024/12/26/linux/rtmp/","permalink":"http://example.com/2024/12/26/linux/rtmp/","excerpt":"","text":"Nginx RTMPæ¨æµç¼–è¯‘é€‰ç‰ˆæœ¬nginx-1.20.1,rtmp-module v1.2.0 ä¸‹è½½123wget http://nginx.org/download/nginx-1.20.1.tar.gztar -zxvf nginx-1.20.1.tar.gzgit clone https://github.com/arut/nginx-rtmp-module.git ç¼–è¯‘1./configure --add-module=../nginx-rtmp-module é…ç½®1234567891011rtmp &#123; server &#123; listen 1935; # é»˜è®¤çš„RTMPç›‘å¬ç«¯å£ chunk_size 4096; application live &#123; live on; record off; &#125; &#125;&#125; æ¨æµ12345ffmpeg -re -i 123.mp4 -vcodec copy -acodec copy -f flv rtmp://192.168.1.49:1935/live# ç®€æ˜“æŒ‡ä»¤ffmpeg -i 123.mp4 -f flv rtmp://192.168.1.49:1935/live# æ¨æµæ‘„åƒå¤´ffmpeg -f v4l2 -video_size 320x240 -framerate 15 -i /dev/video2 -q 10 -f flv rtmp://127.0.0.1/live/mytest -re å‚æ•°æ§åˆ¶è¯»å– AVpacket çš„é€Ÿåº¦ï¼ŒæŒ‰ç…§å¸§ç‡é€Ÿåº¦è¯»å–æ–‡ä»¶ AVpacketã€‚å¦‚æœæœ‰å¤šä¸ªæµï¼Œä»¥æœ€æ…¢çš„å¸§ç‡ä¸ºå‡†ã€‚ -vcodec copy å’Œ -acodec copy ç”¨äºæŒ‡ç¤º FFmpeg åœ¨è½¬æ¢è§†é¢‘æ–‡ä»¶æ—¶ä¸åº”é‡æ–°ç¼–ç è§†é¢‘å’ŒéŸ³é¢‘æµï¼Œè€Œæ˜¯ç›´æ¥å¤åˆ¶è¿™äº›æµã€‚è¿™å¯ä»¥æé«˜è½¬æ¢é€Ÿåº¦ï¼Œå¹¶ä¿æŒåŸå§‹è´¨é‡ã€‚ æ‹‰æµ1ffplay rtmp://192.168.1.49:1935/live","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"ffmpeg","slug":"ffmpeg","permalink":"http://example.com/tags/ffmpeg/"},{"name":"nginx","slug":"nginx","permalink":"http://example.com/tags/nginx/"}]},{"title":"lvglä»¿çœŸ","slug":"linux/lvgl_linux","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:07:34.592Z","comments":true,"path":"2024/12/26/linux/lvgl_linux/","permalink":"http://example.com/2024/12/26/linux/lvgl_linux/","excerpt":"","text":"lvgl linuxç¼–è¯‘æŠ¥é”™å¤„ä¿®æ”¹ makefile lv_conf.h 123#define LV_USE_ASSERT_MEM_INTEGRITY 0#define LV_USE_LOTTIE 0#define LV_USE_VECTOR_GRAPHIC 0 æ·»åŠ è§¦æ‘¸1#define LV_USE_EVDEV 1 1lv_indev_t *touch = lv_evdev_create(LV_INDEV_TYPE_POINTER, &quot;/dev/input/event1&quot;);","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"lvgl","slug":"lvgl","permalink":"http://example.com/tags/lvgl/"}]},{"title":"sqlite","slug":"linux/sqlite","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:07:50.785Z","comments":true,"path":"2024/12/26/linux/sqlite/","permalink":"http://example.com/2024/12/26/linux/sqlite/","excerpt":"","text":"Sqliteä¸‹è½½é“¾æ¥SQLite3 C&#x2F;C++ æ¥å£ API1sqlite3_open(const char *filename, sqlite3 **ppDb) è¯¥ä¾‹ç¨‹æ‰“å¼€ä¸€ä¸ªæŒ‡å‘ SQLite æ•°æ®åº“æ–‡ä»¶çš„è¿æ¥ï¼Œè¿”å›ä¸€ä¸ªç”¨äºå…¶ä»– SQLite ç¨‹åºçš„æ•°æ®åº“è¿æ¥å¯¹è±¡ã€‚å¦‚æœ filename å‚æ•°æ˜¯ NULL æˆ– â€˜:memory:â€™ï¼Œé‚£ä¹ˆ sqlite3_open() å°†ä¼šåœ¨ RAM ä¸­åˆ›å»ºä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œè¿™åªä¼šåœ¨ session çš„æœ‰æ•ˆæ—¶é—´å†…æŒç»­ã€‚å¦‚æœæ–‡ä»¶å filename ä¸ä¸º NULLï¼Œé‚£ä¹ˆ sqlite3_open() å°†ä½¿ç”¨è¿™ä¸ªå‚æ•°å€¼å°è¯•æ‰“å¼€æ•°æ®åº“æ–‡ä»¶ã€‚å¦‚æœè¯¥åç§°çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œsqlite3_open() å°†åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½åä¸ºè¯¥åç§°çš„æ•°æ®åº“æ–‡ä»¶å¹¶æ‰“å¼€ã€‚ 1sqlite3_exec(sqlite3*, const char *sql, sqlite_callback, void *data, char **errmsg) è¯¥ä¾‹ç¨‹æä¾›äº†ä¸€ä¸ªæ‰§è¡Œ SQL å‘½ä»¤çš„å¿«æ·æ–¹å¼ï¼ŒSQL å‘½ä»¤ç”± sql å‚æ•°æä¾›ï¼Œå¯ä»¥ç”±å¤šä¸ª SQL å‘½ä»¤ç»„æˆã€‚åœ¨è¿™é‡Œï¼Œç¬¬ä¸€ä¸ªå‚æ•° sqlite3 æ˜¯æ‰“å¼€çš„æ•°æ®åº“å¯¹è±¡ï¼Œsqlite_callback æ˜¯ä¸€ä¸ªå›è°ƒï¼Œdata ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œerrmsg å°†è¢«è¿”å›ç”¨æ¥è·å–ç¨‹åºç”Ÿæˆçš„ä»»ä½•é”™è¯¯ã€‚sqlite3_exec() ç¨‹åºè§£æå¹¶æ‰§è¡Œç”± sql å‚æ•°æ‰€ç»™çš„æ¯ä¸ªå‘½ä»¤ï¼Œç›´åˆ°å­—ç¬¦ä¸²ç»“æŸæˆ–è€…é‡åˆ°é”™è¯¯ä¸ºæ­¢ã€‚ 1sqlite3_close(sqlite3*) è¯¥ä¾‹ç¨‹å…³é—­ä¹‹å‰è°ƒç”¨ sqlite3_open() æ‰“å¼€çš„æ•°æ®åº“è¿æ¥ã€‚æ‰€æœ‰ä¸è¿æ¥ç›¸å…³çš„è¯­å¥éƒ½åº”åœ¨è¿æ¥å…³é—­ä¹‹å‰å®Œæˆã€‚å¦‚æœè¿˜æœ‰æŸ¥è¯¢æ²¡æœ‰å®Œæˆï¼Œsqlite3_close() å°†è¿”å› SQLITE_BUSY ç¦æ­¢å…³é—­çš„é”™è¯¯æ¶ˆæ¯ã€‚ è¿æ¥æ•°æ®åº“ä¸‹é¢çš„ C ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•è¿æ¥åˆ°ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“ã€‚å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šè¢«åˆ›å»ºï¼Œæœ€åå°†è¿”å›ä¸€ä¸ªæ•°æ®åº“å¯¹è±¡ã€‚ 12345678910111213141516171819#include &lt;stdio.h&gt;#include &lt;sqlite3.h&gt;int main(int argc, char* argv[])&#123; sqlite3 *db; char *zErrMsg = 0; int rc; rc = sqlite3_open(&quot;test.db&quot;, &amp;db); if( rc )&#123; fprintf(stderr, &quot;Can&#x27;t open database: %s\\n&quot;, sqlite3_errmsg(db)); exit(0); &#125;else&#123; fprintf(stderr, &quot;Opened database successfully\\n&quot;); &#125; sqlite3_close(db);&#125; ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥ç¼–è¯‘å’Œè¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œåœ¨å½“å‰ç›®å½•ä¸­åˆ›å»ºæˆ‘ä»¬çš„æ•°æ®åº“ test.dbã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦æ”¹å˜è·¯å¾„ã€‚ $gcc test.c -l sqlite3 $./a.out Opened database successfully å¦‚æœè¦ä½¿ç”¨ C++ æºä»£ç ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹åˆ—æ‰€ç¤ºç¼–è¯‘ä»£ç ï¼š $g++ test.c -l sqlite3 åœ¨è¿™é‡Œï¼ŒæŠŠæˆ‘ä»¬çš„ç¨‹åºé“¾æ¥ä¸Š sqlite3 åº“ï¼Œä»¥ä¾¿å‘ C ç¨‹åºæä¾›å¿…è¦çš„å‡½æ•°ã€‚è¿™å°†åœ¨æ‚¨çš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ test.dbï¼Œæ‚¨å°†å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š -rwxr-xr-x. 1 root root 7383 May 8 02:06 a.out -rw-r--r--. 1 root root 323 May 8 02:05 test.c -rw-r--r--. 1 root root 0 May 8 02:06 test.db åˆ›å»ºè¡¨ä¸‹é¢çš„ C ä»£ç æ®µå°†ç”¨äºåœ¨å…ˆå‰åˆ›å»ºçš„æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªè¡¨ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sqlite3.h&gt; static int callback(void *NotUsed, int argc, char **argv, char **azColName)&#123; int i; for(i=0; i&lt;argc; i++)&#123; printf(&quot;%s = %s\\n&quot;, azColName[i], argv[i] ? argv[i] : &quot;NULL&quot;); &#125; printf(&quot;\\n&quot;); return 0;&#125;int main(int argc, char* argv[])&#123; sqlite3 *db; char *zErrMsg = 0; int rc; char *sql; /* Open database */ rc = sqlite3_open(&quot;test.db&quot;, &amp;db); if( rc )&#123; fprintf(stderr, &quot;Can&#x27;t open database: %s\\n&quot;, sqlite3_errmsg(db)); exit(0); &#125;else&#123; fprintf(stdout, &quot;Opened database successfully\\n&quot;); &#125; /* Create SQL statement */ sql = &quot;CREATE TABLE COMPANY(&quot; \\ &quot;ID INT PRIMARY KEY NOT NULL,&quot; \\ &quot;NAME TEXT NOT NULL,&quot; \\ &quot;AGE INT NOT NULL,&quot; \\ &quot;ADDRESS CHAR(50),&quot; \\ &quot;SALARY REAL );&quot;; /* Execute SQL statement */ rc = sqlite3_exec(db, sql, callback, 0, &amp;zErrMsg); if( rc != SQLITE_OK )&#123; fprintf(stderr, &quot;SQL error: %s\\n&quot;, zErrMsg); sqlite3_free(zErrMsg); &#125;else&#123; fprintf(stdout, &quot;Table created successfully\\n&quot;); &#125; sqlite3_close(db); return 0;&#125; ä¸Šè¿°ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šåœ¨ test.db æ–‡ä»¶ä¸­åˆ›å»º COMPANY è¡¨ï¼Œæœ€ç»ˆæ–‡ä»¶åˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š -rwxr-xr-x. 1 root root 9567 May 8 02:31 a.out -rw-r--r--. 1 root root 1207 May 8 02:31 test.c -rw-r--r--. 1 root root 3072 May 8 02:31 test.db INSERT æ“ä½œä¸‹é¢çš„ C ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•åœ¨ä¸Šé¢åˆ›å»ºçš„ COMPANY è¡¨ä¸­åˆ›å»ºè®°å½•ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sqlite3.h&gt;static int callback(void *NotUsed, int argc, char **argv, char **azColName)&#123; int i; for(i=0; i&lt;argc; i++)&#123; printf(&quot;%s = %s\\n&quot;, azColName[i], argv[i] ? argv[i] : &quot;NULL&quot;); &#125; printf(&quot;\\n&quot;); return 0;&#125;int main(int argc, char* argv[])&#123; sqlite3 *db; char *zErrMsg = 0; int rc; char *sql; /* Open database */ rc = sqlite3_open(&quot;test.db&quot;, &amp;db); if( rc )&#123; fprintf(stderr, &quot;Can&#x27;t open database: %s\\n&quot;, sqlite3_errmsg(db)); exit(0); &#125;else&#123; fprintf(stderr, &quot;Opened database successfully\\n&quot;); &#125; /* Create SQL statement */ sql = &quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) &quot; \\ &quot;VALUES (1, &#x27;Paul&#x27;, 32, &#x27;California&#x27;, 20000.00 ); &quot; \\ &quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) &quot; \\ &quot;VALUES (2, &#x27;Allen&#x27;, 25, &#x27;Texas&#x27;, 15000.00 ); &quot; \\ &quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)&quot; \\ &quot;VALUES (3, &#x27;Teddy&#x27;, 23, &#x27;Norway&#x27;, 20000.00 );&quot; \\ &quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)&quot; \\ &quot;VALUES (4, &#x27;Mark&#x27;, 25, &#x27;Rich-Mond &#x27;, 65000.00 );&quot;; /* Execute SQL statement */ rc = sqlite3_exec(db, sql, callback, 0, &amp;zErrMsg); if( rc != SQLITE_OK )&#123; fprintf(stderr, &quot;SQL error: %s\\n&quot;, zErrMsg); sqlite3_free(zErrMsg); &#125;else&#123; fprintf(stdout, &quot;Records created successfully\\n&quot;); &#125; sqlite3_close(db); return 0;&#125; ä¸Šè¿°ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šåœ¨ COMPANY è¡¨ä¸­åˆ›å»ºç»™å®šè®°å½•ï¼Œå¹¶ä¼šæ˜¾ç¤ºä»¥ä¸‹ä¸¤è¡Œï¼š Opened database successfully Records created successfully SELECT æ“ä½œåœ¨æˆ‘ä»¬å¼€å§‹è®²è§£è·å–è®°å½•çš„å®ä¾‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸‹å›è°ƒå‡½æ•°çš„ä¸€äº›ç»†èŠ‚ï¼Œè¿™å°†åœ¨æˆ‘ä»¬çš„å®ä¾‹ä½¿ç”¨åˆ°ã€‚è¿™ä¸ªå›è°ƒæä¾›äº†ä¸€ä¸ªä» SELECT è¯­å¥è·å¾—ç»“æœçš„æ–¹å¼ã€‚å®ƒå£°æ˜å¦‚ä¸‹ï¼š 123456typedef int (*sqlite3_callback)(void*, /* Data provided in the 4th argument of sqlite3_exec() */int, /* The number of columns in row */char**, /* An array of strings representing fields in the row */char** /* An array of strings representing column names */); å¦‚æœä¸Šé¢çš„å›è°ƒåœ¨ sqlite_exec() ç¨‹åºä¸­ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆ SQLite å°†ä¸º SQL å‚æ•°å†…æ‰§è¡Œçš„æ¯ä¸ª SELECT è¯­å¥ä¸­å¤„ç†çš„æ¯ä¸ªè®°å½•è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚ ä¸‹é¢çš„ C ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•ä»å‰é¢åˆ›å»ºçš„ COMPANY è¡¨ä¸­è·å–å¹¶æ˜¾ç¤ºè®°å½•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sqlite3.h&gt;static int callback(void *data, int argc, char **argv, char **azColName)&#123; int i; fprintf(stderr, &quot;%s: &quot;, (const char*)data); for(i=0; i&lt;argc; i++)&#123; printf(&quot;%s = %s\\n&quot;, azColName[i], argv[i] ? argv[i] : &quot;NULL&quot;); &#125; printf(&quot;\\n&quot;); return 0;&#125;int main(int argc, char* argv[])&#123; sqlite3 *db; char *zErrMsg = 0; int rc; char *sql; const char* data = &quot;Callback function called&quot;; /* Open database */ rc = sqlite3_open(&quot;test.db&quot;, &amp;db); if( rc )&#123; fprintf(stderr, &quot;Can&#x27;t open database: %s\\n&quot;, sqlite3_errmsg(db)); exit(0); &#125;else&#123; fprintf(stderr, &quot;Opened database successfully\\n&quot;); &#125; /* Create SQL statement */ sql = &quot;SELECT * from COMPANY&quot;; /* Execute SQL statement */ rc = sqlite3_exec(db, sql, callback, (void*)data, &amp;zErrMsg); if( rc != SQLITE_OK )&#123; fprintf(stderr, &quot;SQL error: %s\\n&quot;, zErrMsg); sqlite3_free(zErrMsg); &#125;else&#123; fprintf(stdout, &quot;Operation done successfully\\n&quot;); &#125; sqlite3_close(db); return 0;&#125; ä¸Šè¿°ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š Opened database successfully Callback function called: ID = 1 NAME = Paul AGE = 32 ADDRESS = California SALARY = 20000.0 Callback function called: ID = 2 NAME = Allen AGE = 25 ADDRESS = Texas SALARY = 15000.0 Callback function called: ID = 3 NAME = Teddy AGE = 23 ADDRESS = Norway SALARY = 20000.0 Callback function called: ID = 4 NAME = Mark AGE = 25 ADDRESS = Rich-Mond SALARY = 65000.0 Operation done successfully UPDATE æ“ä½œä¸‹é¢çš„ C ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ UPDATE è¯­å¥æ¥æ›´æ–°ä»»ä½•è®°å½•ï¼Œç„¶åä» COMPANY è¡¨ä¸­è·å–å¹¶æ˜¾ç¤ºæ›´æ–°çš„è®°å½•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sqlite3.h&gt; static int callback(void *data, int argc, char **argv, char **azColName)&#123; int i; fprintf(stderr, &quot;%s: &quot;, (const char*)data); for(i=0; i&lt;argc; i++)&#123; printf(&quot;%s = %s\\n&quot;, azColName[i], argv[i] ? argv[i] : &quot;NULL&quot;); &#125; printf(&quot;\\n&quot;); return 0;&#125;int main(int argc, char* argv[])&#123; sqlite3 *db; char *zErrMsg = 0; int rc; char *sql; const char* data = &quot;Callback function called&quot;; /* Open database */ rc = sqlite3_open(&quot;test.db&quot;, &amp;db); if( rc )&#123; fprintf(stderr, &quot;Can&#x27;t open database: %s\\n&quot;, sqlite3_errmsg(db)); exit(0); &#125;else&#123; fprintf(stderr, &quot;Opened database successfully\\n&quot;); &#125; /* Create merged SQL statement */ sql = &quot;UPDATE COMPANY set SALARY = 25000.00 where ID=1; &quot; \\ &quot;SELECT * from COMPANY&quot;; /* Execute SQL statement */ rc = sqlite3_exec(db, sql, callback, (void*)data, &amp;zErrMsg); if( rc != SQLITE_OK )&#123; fprintf(stderr, &quot;SQL error: %s\\n&quot;, zErrMsg); sqlite3_free(zErrMsg); &#125;else&#123; fprintf(stdout, &quot;Operation done successfully\\n&quot;); &#125; sqlite3_close(db); return 0;&#125; ä¸Šè¿°ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š Opened database successfully Callback function called: ID = 1 NAME = Paul AGE = 32 ADDRESS = California SALARY = 25000.0 Callback function called: ID = 2 NAME = Allen AGE = 25 ADDRESS = Texas SALARY = 15000.0 Callback function called: ID = 3 NAME = Teddy AGE = 23 ADDRESS = Norway SALARY = 20000.0 Callback function called: ID = 4 NAME = Mark AGE = 25 ADDRESS = Rich-Mond SALARY = 65000.0 Operation done successfully DELETE æ“ä½œä¸‹é¢çš„ C ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ DELETE è¯­å¥åˆ é™¤ä»»ä½•è®°å½•ï¼Œç„¶åä» COMPANY è¡¨ä¸­è·å–å¹¶æ˜¾ç¤ºå‰©ä½™çš„è®°å½•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sqlite3.h&gt; static int callback(void *data, int argc, char **argv, char **azColName)&#123; int i; fprintf(stderr, &quot;%s: &quot;, (const char*)data); for(i=0; i&lt;argc; i++)&#123; printf(&quot;%s = %s\\n&quot;, azColName[i], argv[i] ? argv[i] : &quot;NULL&quot;); &#125; printf(&quot;\\n&quot;); return 0;&#125;int main(int argc, char* argv[])&#123; sqlite3 *db; char *zErrMsg = 0; int rc; char *sql; const char* data = &quot;Callback function called&quot;; /* Open database */ rc = sqlite3_open(&quot;test.db&quot;, &amp;db); if( rc )&#123; fprintf(stderr, &quot;Can&#x27;t open database: %s\\n&quot;, sqlite3_errmsg(db)); exit(0); &#125;else&#123; fprintf(stderr, &quot;Opened database successfully\\n&quot;); &#125; /* Create merged SQL statement */ sql = &quot;DELETE from COMPANY where ID=2; &quot; \\ &quot;SELECT * from COMPANY&quot;; /* Execute SQL statement */ rc = sqlite3_exec(db, sql, callback, (void*)data, &amp;zErrMsg); if( rc != SQLITE_OK )&#123; fprintf(stderr, &quot;SQL error: %s\\n&quot;, zErrMsg); sqlite3_free(zErrMsg); &#125;else&#123; fprintf(stdout, &quot;Operation done successfully\\n&quot;); &#125; sqlite3_close(db); return 0;&#125; ä¸Šè¿°ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š Opened database successfully Callback function called: ID = 1 NAME = Paul AGE = 32 ADDRESS = California SALARY = 20000.0 Callback function called: ID = 3 NAME = Teddy AGE = 23 ADDRESS = Norway SALARY = 20000.0 Callback function called: ID = 4 NAME = Mark AGE = 25 ADDRESS = Rich-Mond SALARY = 65000.0 Operation done successfully ä½¿ç”¨sqlite3æŒ‡ä»¤SELECT * FROM COMPANY;å¯ä»¥æŸ¥çœ‹æ•°æ®åˆ—è¡¨ Select è¯­å¥SQLite çš„ SELECT è¯­å¥ç”¨äºä» SQLite æ•°æ®åº“è¡¨ä¸­è·å–æ•°æ®ï¼Œä»¥ç»“æœè¡¨çš„å½¢å¼è¿”å›æ•°æ®ã€‚è¿™äº›ç»“æœè¡¨ä¹Ÿè¢«ç§°ä¸ºç»“æœé›†ã€‚ è¯­æ³•SQLite çš„ SELECT è¯­å¥çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š SELECT column1, column2, columnN FROM table_name; SELECT * FROM table_name; Schema ä¿¡æ¯å› ä¸ºæ‰€æœ‰çš„ç‚¹å‘½ä»¤åªåœ¨ SQLite æç¤ºç¬¦ä¸­å¯ç”¨ï¼Œæ‰€ä»¥å½“æ‚¨è¿›è¡Œå¸¦æœ‰ SQLite çš„ç¼–ç¨‹æ—¶ï¼Œæ‚¨è¦ä½¿ç”¨ä¸‹é¢çš„å¸¦æœ‰ sqlite_master è¡¨çš„ SELECT è¯­å¥æ¥åˆ—å‡ºæ‰€æœ‰åœ¨æ•°æ®åº“ä¸­åˆ›å»ºçš„è¡¨ï¼š 1sqlite&gt; SELECT tbl_name FROM sqlite_master WHERE type = &#x27;table&#x27;; æ‚¨å¯ä»¥åˆ—å‡ºå…³äº COMPANY è¡¨çš„å®Œæ•´ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1sqlite&gt; SELECT sql FROM sqlite_master WHERE type = &#x27;table&#x27; AND tbl_name = &#x27;COMPANY&#x27;; Like å­å¥SQLite çš„ LIKE è¿ç®—ç¬¦æ˜¯ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼ŒLIKE è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªé€šé…ç¬¦ä¸ LIKE è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼š ç™¾åˆ†å· ï¼ˆ%ï¼‰ ä¸‹åˆ’çº¿ ï¼ˆ_ï¼‰ ç™¾åˆ†å·ï¼ˆ%ï¼‰ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨ã€‚ Glob å­å¥SQLite çš„ GLOB è¿ç®—ç¬¦æ˜¯ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼ŒGLOB è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚ä¸ LIKE è¿ç®—ç¬¦ä¸åŒçš„æ˜¯ï¼ŒGLOB æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œå¯¹äºä¸‹é¢çš„é€šé…ç¬¦ï¼Œå®ƒéµå¾ª UNIX çš„è¯­æ³•ã€‚ æ˜Ÿå· ï¼ˆ*ï¼‰ é—®å· ï¼ˆ?ï¼‰ æ˜Ÿå·ï¼ˆ*ï¼‰ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚é—®å·ï¼ˆ?ï¼‰ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ã€‚è¿™äº›ç¬¦å·å¯ä»¥è¢«ç»„åˆä½¿ç”¨ã€‚ Where å­å¥SQLiteçš„ WHERE å­å¥ç”¨äºæŒ‡å®šä»ä¸€ä¸ªè¡¨æˆ–å¤šä¸ªè¡¨ä¸­è·å–æ•°æ®çš„æ¡ä»¶ã€‚ å¦‚æœæ»¡è¶³ç»™å®šçš„æ¡ä»¶ï¼Œå³ä¸ºçœŸï¼ˆtrueï¼‰æ—¶ï¼Œåˆ™ä»è¡¨ä¸­è¿”å›ç‰¹å®šçš„å€¼ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ WHERE å­å¥æ¥è¿‡æ»¤è®°å½•ï¼Œåªè·å–éœ€è¦çš„è®°å½•ã€‚ WHERE å­å¥ä¸ä»…å¯ç”¨åœ¨ SELECT è¯­å¥ä¸­ï¼Œå®ƒä¹Ÿå¯ç”¨åœ¨ UPDATEã€DELETE è¯­å¥ä¸­ï¼Œç­‰ç­‰ Update è¯­å¥SQLite çš„ UPDATE æŸ¥è¯¢ç”¨äºä¿®æ”¹è¡¨ä¸­å·²æœ‰çš„è®°å½•ã€‚å¯ä»¥ä½¿ç”¨å¸¦æœ‰ WHERE å­å¥çš„ UPDATE æŸ¥è¯¢æ¥æ›´æ–°é€‰å®šè¡Œï¼Œå¦åˆ™æ‰€æœ‰çš„è¡Œéƒ½ä¼šè¢«æ›´æ–°ã€‚ Distinct å…³é”®å­—SQLite çš„ DISTINCT å…³é”®å­—ä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥æ¶ˆé™¤æ‰€æœ‰é‡å¤çš„è®°å½•ï¼Œå¹¶åªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ã€‚ æœ‰å¯èƒ½å‡ºç°ä¸€ç§æƒ…å†µï¼Œåœ¨ä¸€ä¸ªè¡¨ä¸­æœ‰å¤šä¸ªé‡å¤çš„è®°å½•ã€‚å½“æå–è¿™æ ·çš„è®°å½•æ—¶ï¼ŒDISTINCT å…³é”®å­—å°±æ˜¾å¾—ç‰¹åˆ«æœ‰æ„ä¹‰ï¼Œå®ƒåªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ï¼Œè€Œä¸æ˜¯è·å–é‡å¤è®°å½•ã€‚ äº‹åŠ¡æ§åˆ¶ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æ§åˆ¶äº‹åŠ¡ï¼š BEGIN ï¼šå¼€å§‹äº‹åŠ¡å¤„ç†ã€‚ COMMITï¼šä¿å­˜æ›´æ”¹ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨ END TRANSACTION å‘½ä»¤ã€‚ ROLLBACKï¼šå›æ»šæ‰€åšçš„æ›´æ”¹ã€‚ äº‹åŠ¡æ§åˆ¶å‘½ä»¤åªä¸ DML å‘½ä»¤ INSERTã€UPDATE å’Œ DELETE ä¸€èµ·ä½¿ç”¨ã€‚ä»–ä»¬ä¸èƒ½åœ¨åˆ›å»ºè¡¨æˆ–åˆ é™¤è¡¨æ—¶ä½¿ç”¨ï¼Œå› ä¸ºè¿™äº›æ“ä½œåœ¨æ•°æ®åº“ä¸­æ˜¯è‡ªåŠ¨æäº¤çš„ã€‚ BEGIN å‘½ä»¤äº‹åŠ¡ï¼ˆTransactionï¼‰å¯ä»¥ä½¿ç”¨BEGIN å‘½ä»¤æ¥å¯åŠ¨ã€‚æ­¤ç±»äº‹åŠ¡é€šå¸¸ä¼šæŒç»­æ‰§è¡Œä¸‹å»ï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª COMMIT æˆ– ROLLBACK å‘½ä»¤ã€‚ä¸è¿‡åœ¨æ•°æ®åº“å…³é—­æˆ–å‘ç”Ÿé”™è¯¯æ—¶ï¼Œäº‹åŠ¡å¤„ç†ä¹Ÿä¼šå›æ»šã€‚ COMMIT å‘½ä»¤COMMIT å‘½ä»¤æ˜¯ç”¨äºæŠŠäº‹åŠ¡è°ƒç”¨çš„æ›´æ”¹ä¿å­˜åˆ°æ•°æ®åº“ä¸­çš„äº‹åŠ¡å‘½ä»¤ã€‚è‡ªä¸Šæ¬¡ COMMIT æˆ– ROLLBACK å‘½ä»¤ä»¥å¤–çš„æ‰€æœ‰äº‹åŠ¡ä¿å­˜åˆ°æ•°æ®åº“ã€‚ ROLLBACK å‘½ä»¤ROLLBACK å‘½ä»¤æ˜¯ç”¨äºæ’¤æ¶ˆå°šæœªä¿å­˜åˆ°æ•°æ®åº“çš„äº‹åŠ¡çš„äº‹åŠ¡å‘½ä»¤ã€‚ ROLLBACK å‘½ä»¤åªèƒ½ç”¨äºæ’¤é”€è‡ªä¸Šæ¬¡å‘å‡º COMMIT æˆ– ROLLBACK å‘½ä»¤ä»¥å¤–çš„äº‹åŠ¡ã€‚ å®ä¾‹å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ï¼Œå¹¶ä»è¡¨ä¸­åˆ é™¤ age &#x3D; 25 çš„è®°å½•ï¼Œæœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ ROLLBACK å‘½ä»¤æ’¤æ¶ˆæ‰€æœ‰çš„æ›´æ”¹ã€‚ 123sqlite&gt; BEGIN;sqlite&gt; DELETE FROM COMPANY WHERE AGE = 25;sqlite&gt; ROLLBACK; æ£€æŸ¥ COMPANY è¡¨ï¼Œä»ç„¶æœ‰è®°å½• å¼€å§‹å¦ä¸€ä¸ªäº‹åŠ¡ï¼Œä»è¡¨ä¸­åˆ é™¤ age &#x3D; 25 çš„è®°å½•ï¼Œæœ€åæˆ‘ä»¬ä½¿ç”¨ COMMIT å‘½ä»¤æäº¤æ‰€æœ‰çš„æ›´æ”¹ã€‚ 123sqlite&gt; BEGIN;sqlite&gt; DELETE FROM COMPANY WHERE AGE = 25;sqlite&gt; COMMIT; åŸºç¡€æ“åš æ˜¾ç¤ºè¡¨1.tables æ˜¾ç¤ºæ¦‚è¦1.schema sqlite_master æ ¼å¼åŒ–æ˜¾ç¤º123456789æ˜¾ç¤ºå¤´sqlite&gt;.header onæŒ‰åˆ—æ˜¾ç¤ºsqlite&gt;.mode columnæ˜¾ç¤ºè¿è¡Œæ—¶é—´sqlite&gt;.timer onè®¾ç½®è¾“å‡ºåˆ—çš„å®½åº¦sqlite&gt;.width 10, 20, 10sqlite&gt;SELECT * FROM COMPANY; ä¸»é”®è‡ªåŠ¨å¢åŠ &#x2F;&#x2F;å†å²æœ€å¤§å€¼å¢åŠ 1ID INTEGER PRIMARY KEY AUTOINCREMENT åˆ é™¤è¡¨1drop table company; å¢åŠ åˆ—12alter table company add column DATE char(20);alter table company add column TIME char(10); åˆ é™¤åˆ—1alter table company drop column test; æ·»åŠ æ—¶é—´æ—¥æœŸ1insert into company values(6,&#x27;huang&#x27;,31,&#x27;guangzhou&#x27;,8999,date(&#x27;now&#x27;,&#x27;localtime&#x27;),time(&#x27;now&#x27;,&#x27;localtime&#x27;)); è‡ªåŠ¨æ—¶é—´123...DATE TIMESTAMP NOT NULL DEFAULT(date(&#x27;now&#x27;,&#x27;localtime&#x27;)),TIME TIMESTAMP NOT NULL DEFAULT(time(&#x27;now&#x27;,&#x27;localtime&#x27;)) ç­›é€‰æ—¶é—´1select * from company where time &gt;time(&#x27;12:00:00&#x27;); ä¿®æ”¹å†…å®¹1update company set name=&#x27;gcc&#x27; where id=18; å»é‡1SELECT DISTINCT name FROM COMPANY; ç­›é€‰è®¡æ•°1SELECT * FROM COMPANY GROUP BY name HAVING count(name) &lt; 2; æ’åº1SELECT * FROM COMPANY ORDER BY SALARY ASC; å­—ç¬¦åŠ å‰ç¼€1update work set date=&#x27;2024-&#x27;||date; åˆ—æ±‚å’Œ1select sum(time) from work;","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"}]},{"title":"sshå’Œgit","slug":"linux/ssh","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:07:54.195Z","comments":true,"path":"2024/12/26/linux/ssh/","permalink":"http://example.com/2024/12/26/linux/ssh/","excerpt":"","text":"sshå…å¯†ç™»å½•ç§˜é’¥åŠ å…¥ä¸»æœº1ssh-copy-id é‡å¯æœåŠ¡123sudo systemctl restart sshsudo server ssh restart æµ‹è¯•è¿æ¥server 1/usr/sbin/sshd -d -p 2222 client 1ssh ... -p 2222 æ–°ç”¨æˆ·sshç™»å½•123456sudo useradd gitsudo passwd gitsudo chmod 700 .sshsudo chmod 600 authorized_keyssudo chmod 755 /home/username GitæœåŠ¡ æ–°å»ºä»“åº“1git init --bare test å®¢æˆ·ç«¯1git clone git@192.168.1.10ï¼š/home/git/test å®¢æˆ·ç«¯ç°æœ‰æ–‡ä»¶å¤¹1234git add --all .git commit -m &quot;test project init&quot;git remote add origin git@192.168.1.10ï¼š/home/git/testgit push origin master Gitlabå‚è€ƒ æ ‘è“æ´¾gitlabä¸‹è½½ å®‰è£…ä¾èµ– 1sudo apt-get install curl openssh-server ca-certificates postfix apt-transport-https å®‰è£…åŒ… 1sudo dpkg -i gitlab-ce_8.13.0-ce.0_armhf.deb è¿è¡Œ 1sudo gitlab-ctl reconfigure ä¿®æ”¹æœåŠ¡ç«¯å£é»˜è®¤ä½¿ç”¨80ç«¯å£ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹ï¼Œå¯ä»¥ä¿®æ”¹&#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb å¸¸ç”¨ç»´æŠ¤æŒ‡ä»¤ 1234567891011121314151617181920#ä¿®æ”¹ä»»ä½•é…ç½®æ–‡ä»¶åéƒ½è¦è¾“å…¥å¦‚ä¸‹å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆã€‚sudo gitlab-ctl reconfigure #é¡µé¢ç¼“å­˜æ¸…é™¤ï¼šsudo gitlab-rake cache:clear RAILS_ENV=production #GitLabå„ç»„ä»¶å¯åŠ¨ï¼šsudo gitlab-ctl start #GitLabå„ç»„ä»¶åœæ­¢ï¼šsudo gitlab-ctl stop #GitLabå„ç»„ä»¶é‡å¯ï¼šsudo gitlab-ctl restart #ç¦ç”¨GitLabå¼€æœºè‡ªå¯åŠ¨ï¼šsudo systemctl disable gitlab-runsvdir #å¯ç”¨GitLabå¼€æœºè‡ªå¯åŠ¨ï¼šsudo systemctl enable gitlab-runsvdir Giteaè½»é‡åŒ–ï¼Œå ç”¨èµ„æºå°‘,åœ¨æ ‘è“æ´¾ä¸Šå®‰è£…å’Œè¿è¡ŒGiteaï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š æ›´æ–°ç³»ç»ŸåŒ…å¹¶å®‰è£…å¿…è¦çš„ä¾èµ–ï¼š 12sudo apt-get updatesudo apt-get install -y curl policycoreutils openssh-server ä¸‹è½½GiteaäºŒè¿›åˆ¶æ–‡ä»¶ï¼š 1curl -L https://github.com/go-gitea/gitea/releases/download/v1.20.0/gitea-linux-arm64 -o gitea ä½¿äºŒè¿›åˆ¶æ–‡ä»¶å¯æ‰§è¡Œï¼š 1chmod +x gitea ç§»åŠ¨Giteaåˆ°&#x2F;usr&#x2F;local&#x2F;binç›®å½•å¹¶åˆ›å»ºä¸€ä¸ªsystemdæœåŠ¡æ–‡ä»¶ï¼š 12sudo mv gitea /usr/local/bin/giteasudo nano /etc/systemd/system/gitea.service åœ¨gitea.serviceæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 123456789101112131415[Unit]Description=Gitea (Git with a cup of tea)After=syslog.targetAfter=network.target [Service]RestartSec=2sType=simpleUser=rootExecStart=/usr/local/bin/gitea web --config /etc/gitea/app.iniRestart=alwaysEnvironment=USER=root [Install]WantedBy=multi-user.target é‡æ–°åŠ è½½systemdå®ˆæŠ¤è¿›ç¨‹ï¼Œä½¿å…¶è¯†åˆ«æ–°çš„æœåŠ¡æ–‡ä»¶ï¼Œå¹¶å¯åŠ¨GiteaæœåŠ¡ï¼š 123sudo systemctl daemon-reloadsudo systemctl start giteasudo systemctl enable gitea é…ç½®é˜²ç«å¢™å…è®¸è®¿é—®Giteaï¼š 12sudo ufw allow &#x27;Nginx Full&#x27;sudo ufw enable è®¿é—®http:&#x2F;&#x2F;:3000æ¥è®¾ç½®å’Œè¿è¡ŒGiteaã€‚ ä¿®æ”¹é…ç½®åˆæ¬¡ä¿®æ”¹ï¼Œé€šè¿‡ç½‘é¡µé€‰æ‹©custom&#x2F;conf&#x2F;app.ini æ–‡ä»¶å¤¹å¤§å° 1du -sh Gitea ä¿®æ”¹è¿œç¨‹ä»“åº“ 1git remote set-url origin https://gitee.com/gxswift/ctest.git","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"git","slug":"git","permalink":"http://example.com/tags/git/"},{"name":"ssh","slug":"ssh","permalink":"http://example.com/tags/ssh/"}]},{"title":"TFTP NFS","slug":"linux/tftp","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:18:23.755Z","comments":true,"path":"2024/12/26/linux/tftp/","permalink":"http://example.com/2024/12/26/linux/tftp/","excerpt":"","text":"NFS å®‰è£…NFSè½¯ä»¶åŒ…12sudo apt-get install nfs-kernel-server #å®‰è£…æœåŠ¡å™¨sudo apt-get install nfs-common #å®‰è£…å®¢æˆ·ç«¯ æ·»åŠ å…±äº«ç›®å½•12sudo vi /etc/exports #æ‰“å¼€æ–‡ä»¶/nfsroot *(rw,sync,no_root_squash)#å°†/nfsroot ç›®å½•è®¾ç½®ä¸ºNFSå…±äº«ç›®å½• ï¼Œ*ä»£è¡¨å…è®¸ä»»æ„IPè®¿é—® å»ºç«‹æ–‡ä»¶å¤¹ï¼Œè®¾ç½®æƒé™123sudo mkdir /nfsrootsudo chmod -R 777 /nfsrootsudo chown -R nobody /nfsroot å¯åŠ¨NFSæœåŠ¡1sudo /etc/init.d/nfs-kernel-server start #é‡å¯restart å®¢æˆ·ç«¯æŒ‚è½½1sudo mount -t nfs -o vers=4 192.168.123.123:/nfs /mnt -o nolock TFTPtftpdæˆ–xinetd å®‰è£…è½¯ä»¶åŒ…1sudo apt-get install tftpd-hpa tftp-hpa #å®‰è£…æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ é…ç½®12345678910111213141516sudo vi /etc/default/tftp-hpa #æ‰“å¼€æ–‡ä»¶sudo vi /etc/xinetd.d/tftpservice tftp&#123; socket_type = dgram protocol = udp wait = yes user = root server = /usr/sbin/in.tftpd server_args = -s /tftpboot disable = no per_source = 11 cps = 100 2 flags = IPv4&#125; å»ºç«‹æ–‡ä»¶å¤¹ï¼Œè®¾ç½®æƒé™123sudo mkdir /tftpsudo chmod -R 777 /tftpsudo chown -R nobody /tftp å¯åŠ¨NFSæœåŠ¡123sudo service tftpd-hpa start #é‡å¯restartsudo service xinetd start å®¢æˆ·ç«¯æŒ‚è½½1234&gt;tftp ip#è¿æ¥&gt;get file#ä¸‹è½½&gt;put file#ä¸Šä¼ &gt;q#é€€å‡º","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"TFTP","slug":"TFTP","permalink":"http://example.com/tags/TFTP/"},{"name":"NFS","slug":"NFS","permalink":"http://example.com/tags/NFS/"}]},{"title":"æ€è€ƒ","slug":"linux/think","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T10:50:55.891Z","comments":true,"path":"2024/12/26/linux/think/","permalink":"http://example.com/2024/12/26/linux/think/","excerpt":"é¢˜ç›®å†œæ°‘æŠŠ3000æ–¤èåœé€åˆ°1000å…¬é‡Œå¤–å»å–,éª†é©¼æœ€é«˜è½½é‡1000æ–¤,è€Œéª†é©¼æ¯èµ°ä¸€å…¬é‡Œå°±è¦åƒæ‰ä¸€æ–¤èåœ,é—®å†œæ°‘æœ€å¤šå¯ä»¥å–æ‰å¤šå°‘æ–¤èåœ?","text":"é¢˜ç›®å†œæ°‘æŠŠ3000æ–¤èåœé€åˆ°1000å…¬é‡Œå¤–å»å–,éª†é©¼æœ€é«˜è½½é‡1000æ–¤,è€Œéª†é©¼æ¯èµ°ä¸€å…¬é‡Œå°±è¦åƒæ‰ä¸€æ–¤èåœ,é—®å†œæ°‘æœ€å¤šå¯ä»¥å–æ‰å¤šå°‘æ–¤èåœ? è¿™é“é¢˜ä¸€å¼€å§‹çœ‹ä¸Šå»å¥½åƒæ˜¯æ— è§£çš„ï¼Œå› ä¸ºä½ çš„éª†é©¼æ¯ä¸€å…¬é‡Œå°±è¦æ¶ˆè€—ä¸€æ–¤èåœï¼Œè€Œåˆ°ç›®çš„åœ°æœ‰1000å…¬é‡Œï¼Œè€Œéª†é©¼æœ€å¤šåªèƒ½è£…1000æ–¤èåœã€‚å¦‚æœä½ çš„éª†é©¼å¯ä»¥å…¨éƒ¨è£…ä¸‹ï¼Œåˆ°ç›®çš„åœ°ä¹Ÿä¼šè¢«å…¨éƒ¨åƒå…‰ï¼Œä¸€ä¸ç‚¹ä¹Ÿä¸å‰©ã€‚æ‰€ä»¥ï¼Œå¾ˆå¤šäººçš„ç¬¬ä¸€ååº”éƒ½æ˜¯è§‰å¾—è¿™ä¸ªä¸å¤ªå¯èƒ½ã€‚ å¦‚æœä¸€å¼€å§‹å°±è§‰å¾—ä¸å¤ªå¯èƒ½çš„è¯ï¼Œè¿™æ˜¯å¾ˆæ­£å¸¸çš„ã€‚æˆ‘ä¸€å¼€å§‹ä¹Ÿè§‰å¾—ä¸å¯èƒ½ï¼Œæ€è€ƒä¸‹å»ï¼Œåæ¥æƒ³åˆ°ä¸€ä¸ªè§£æ³•å¯ä»¥è¿é€500æ–¤èåœåˆ°å¸‚åœºæ–¹æ³•å¦‚ä¸‹: 1ã€è£…1000æ–¤èåœï¼Œèµ°250å…¬é‡Œï¼Œæ‰”ä¸‹500æ–¤å›å» 2ã€è£…1000æ–¤èåœï¼Œèµ°250å…¬é‡Œï¼Œæ‹¿èµ·250æ–¤èåœï¼Œèµ°åˆ°500å…¬é‡Œå¤„ï¼Œæ‰”ä¸‹500æ–¤å›å» 3ã€è£…1000æ–¤èåœï¼Œèµ°åˆ°500å…¬é‡Œå¤„ï¼Œè£…ä¸Š500æ–¤èµ°åˆ°ç›®çš„åœ°**äºæ˜¯æœ‰äº†500æ–¤è¿åˆ°å¸‚åœº å¥½åƒå¾ˆä¸é”™äº†ï¼Œä¸è¿‡è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•èƒ½è¿æ›´å¤šèåœã€‚ è§£ç­”:æŠ½è±¡è§£ç­”ä½¿ç”¨é€’æ¨å…¬å¼: 12345f(1) = 1 f(2) = f(1) + 1/3 f(3) = f(2) + 1/5 â€¦ f(n) = f(n-1) + 1/(2*n+1) é€šé¡¹å…¬å¼: f(n) = Î£(1/(2*i)+1) (1 &lt;= i &lt;=n) é¢˜ç›®å¯¹åº”æ˜¯èƒ½èµ°çš„æœ€è¿œè·ç¦»å‡å»å·²çŸ¥çš„è·ç¦»ï¼Œå³ (f(3) â€“ 1) * 1000 &#x3D; 533 å°±æ˜¯è¯´æœ€å¤šå¯ä»¥è¿533æ–¤èåœå…·ä½“å¦‚ä¸‹ï¼š 1ã€è£…1000æ–¤èåœï¼Œèµ°200å…¬é‡Œï¼Œæ‰”ä¸‹600æ–¤å›å» 2ã€è£…1000æ–¤èåœï¼Œèµ°200å…¬é‡Œï¼Œè£…200æ–¤ï¼Œå†èµ°333å…¬é‡Œï¼Œæ‰”ä¸‹334æ–¤ï¼Œå¾€å›èµ° 3ã€èµ°åˆ°200å…¬é‡Œå¤„ï¼Œè£…ä¸Š200æ–¤ï¼Œå›å»ï¼Œæ­¤æ—¶200å…¬é‡Œå¤„è¿˜å‰©200æ–¤ 4ã€è£…1000æ–¤èåœï¼Œèµ°è‡³200å…¬é‡Œå¤„ï¼Œè£…200æ–¤ï¼Œèµ°è‡³533å…¬é‡Œå¤„ï¼Œè£…334æ–¤ï¼Œèµ°åˆ°ç»ˆç‚¹ï¼Œå‰©533æ–¤ è¿™æ˜¯ä¹‹å‰é‡åˆ°çš„ä¸€ä¸ªé¢è¯•é¢˜","categories":[],"tags":[{"name":"æ€è€ƒ","slug":"æ€è€ƒ","permalink":"http://example.com/tags/%E6%80%9D%E8%80%83/"}]},{"title":"VIM","slug":"linux/vim","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:08:03.934Z","comments":true,"path":"2024/12/26/linux/vim/","permalink":"http://example.com/2024/12/26/linux/vim/","excerpt":"","text":"vimæ“ä½œ ç§»åŠ¨è¿½åŠ åˆ é™¤å¤åˆ¶ç²˜è´´æŸ¥æ‰¾å¤šæ–‡ä»¶æ“ä½œå…¶ä»– æŒ‡ä»¤ å«ä¹‰ ä¾‹å­ ç§»åŠ¨ l or å³ç®­å¤´ å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ h or å·¦ç®­å¤´ å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ j or ä¸‹ç®­å¤´ å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ k or ä¸Šç®­å¤´ å‘ä¸Šç§»åŠ¨ä¸€è¡Œ 0 (é›¶æŒ‰é”®) ç§»åŠ¨åˆ°å½“å‰è¡Œçš„è¡Œé¦–ã€‚ ^ ç§»åŠ¨åˆ°å½“å‰è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ã€‚ $ ç§»åŠ¨åˆ°å½“å‰è¡Œçš„æœ«å°¾ã€‚ w ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯æˆ–æ ‡ç‚¹ç¬¦å·çš„å¼€å¤´ã€‚ W ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ï¼Œå¿½ç•¥æ ‡ç‚¹ç¬¦å·ã€‚ b ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯æˆ–æ ‡ç‚¹ç¬¦å·çš„å¼€å¤´ã€‚ B ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯çš„å¼€å¤´ï¼Œå¿½ç•¥æ ‡ç‚¹ç¬¦å·ã€‚ Ctrl-f or Page Down å‘ä¸‹ç¿»ä¸€é¡µ Ctrl-b or Page Up å‘ä¸Šç¿»ä¸€é¡µ Ctrl-d å‘ä¸‹ç¿»åŠé¡µ Ctrl-u å‘ä¸Šç¿»åŠé¡µ numberG or number ç§»åŠ¨åˆ°ç¬¬number è¡Œã€‚ 1(G) ç§»åŠ¨åˆ°æ–‡ä»¶çš„ç¬¬ä¸€è¡Œ,å‘½ä»¤å‰åŠ æ•°å­—ï¼Œä¸ºå‘½ä»¤æ‰§è¡Œæ¬¡æ•° G ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾ã€‚ è¿½åŠ  i å…‰æ ‡å‰æ’å…¥ I è¡Œå‰æ’å…¥ a å…‰æ ‡åæ’å…¥ A è¡Œåæ’å…¥ o å½“å‰è¡Œçš„ä¸‹æ–¹æ‰“å¼€ä¸€è¡Œã€‚ O å½“å‰è¡Œçš„ä¸Šæ–¹æ‰“å¼€ä¸€è¡Œã€‚ åˆ é™¤ x å½“å‰å­—ç¬¦ 3xå½“å‰å­—ç¬¦åŠå…¶åçš„ä¸¤ä¸ªå­—ç¬¦ã€‚ dd å½“å‰è¡Œã€‚ 5dd å½“å‰è¡ŒåŠéšåçš„å››è¡Œæ–‡æœ¬ã€‚ dW ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ã€‚ d$ ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°å½“å‰è¡Œçš„è¡Œå°¾ã€‚ d0 ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°å½“å‰è¡Œçš„è¡Œé¦–ã€‚ d^ ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°æ–‡æœ¬è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ã€‚ dG ä»å½“å‰è¡Œåˆ°æ–‡ä»¶çš„æœ«å°¾ã€‚ d20G ä»å½“å‰è¡Œåˆ°æ–‡ä»¶çš„ç¬¬20 è¡Œã€‚ å¤åˆ¶ç²˜è´´ yy å½“å‰è¡Œã€‚ 5yy å½“å‰è¡ŒåŠéšåçš„å››è¡Œæ–‡æœ¬ã€‚ yW ä»å½“å‰å…‰æ ‡ä½ç½®åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ã€‚ y$ ä»å½“å‰å…‰æ ‡ä½ç½®åˆ°å½“å‰è¡Œçš„æœ«å°¾ã€‚ y0 ä»å½“å‰å…‰æ ‡ä½ç½®åˆ°è¡Œé¦–ã€‚ y^ ä»å½“å‰å…‰æ ‡ä½ç½®åˆ°æ–‡æœ¬è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ã€‚ yG ä»å½“å‰è¡Œåˆ°æ–‡ä»¶æœ«å°¾ã€‚ y20G ä»å½“å‰è¡Œåˆ°æ–‡ä»¶çš„ç¬¬20 è¡Œã€‚ p ç²˜è´´åˆ°å½“å‰è¡Œçš„ä¸‹é¢ æŸ¥æ‰¾å’Œæ›¿æ¢ &#x2F; æŸ¥æ‰¾ &#x2F;fooæŸ¥æ‰¾fooï¼Œ\\cè¡¨ç¤ºå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾ï¼Œ\\Cè¡¨ç¤ºå¤§å°å†™æ•æ„ŸæŸ¥æ‰¾ n ä¸‹ä¸€ä¸ª N å‰ä¸€ä¸ª s æ›¿æ¢{ä½œç”¨èŒƒå›´}s&#x2F;{ç›®æ ‡}&#x2F;{æ›¿æ¢}&#x2F;{æ›¿æ¢æ ‡å¿—} %s&#x2F;foo&#x2F;bar&#x2F;gä¼šåœ¨å…¨å±€èŒƒå›´(%)æŸ¥æ‰¾fooå¹¶æ›¿æ¢ä¸ºbarï¼Œæ‰€æœ‰å‡ºç°éƒ½ä¼šè¢«æ›¿æ¢(g) s&#x2F;foo&#x2F;bar&#x2F;gæ›¿æ¢å½“å‰è¡Œ %s&#x2F;foo&#x2F;bar&#x2F;iã€‚iè¡¨ç¤ºå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾ï¼ŒIè¡¨ç¤ºå¤§å°å†™æ•æ„Ÿï¼Œ%è¡¨ç¤ºç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œï¼Œæˆ–è€…ç”¨1,5ä»£æ›¿ å¤šæ–‡ä»¶æ“ä½œ n ä¸‹ä¸€ä¸ªæ–‡ä»¶ N å‰ä¸€ä¸ªæ–‡ä»¶ buffers æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨ å…¶ä»– J åˆ é™¤å½“å‰è¡Œæœ€åå›è½¦ï¼Œè¿æ¥ä¸‹ä¸€è¡Œ w å†™å…¥ q é€€å‡º ! å¼ºåˆ¶","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"vim","slug":"vim","permalink":"http://example.com/tags/vim/"}]},{"title":"i.mx6ullå¼€å‘æ¿","slug":"linux/zdyz","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:22:22.481Z","comments":true,"path":"2024/12/26/linux/zdyz/","permalink":"http://example.com/2024/12/26/linux/zdyz/","excerpt":"","text":"æ­£ç‚¹åŸå­i.mx6ullå¼€å‘æ¿ç»ƒä¹ WIFIå¼€å¯ç½‘å¡12ifconfig wlan0 up // è‹¥é»˜è®¤æ²¡æ‰“å¼€ wlan0 åˆ™éœ€è¦æ‰§è¡Œæ­¤é¡¹ã€‚ifconfig æœç´¢12wpa_cli -i wlan0 scan_result // æ­¤æŒ‡ä»¤éœ€è¦å¯åŠ¨è¿›å…¥åå†æ’ WIFI æ‰ç”Ÿæ•ˆï¼Œéœ€è¦ wpa_supplicant åœ¨è¿è¡Œã€‚ è¿æ¥1source ./alientek_usb_wifi_setup.sh -m station -i ALIENTEK-YF -p 1590202**** -d wlan0 å‚æ•°è§£é‡Šï¼š -m station ï¼šè®¾ç½®æˆ station æ¨¡å¼ -i ALIENTEK-YF ï¼šæ— çº¿ç½‘ç»œåç§°(ssid)ã€‚ -p 1590202**** ï¼šæ— çº¿ç½‘ç»œå¯†ç (psk)ã€‚ -d wlan0 ï¼šUSB WIFI èŠ‚ç‚¹ ä¾‹å¦‚: 1source ./shell/wifi/alientek_usb_wifi_setup.sh -m station -i senmun2022 -p senmun150@ -d wlan0 Ubuntuæ¡¥æ¥,è®¾ç½®ipä¸ºåŒç½‘æ®µ 1sudo mount -t nfs 192.168.1.100:/home/alientek/linux/nfs /mnt -o nolock æç¤ºmount.nfs: an incorrect mount option was specified 1sudo mount -t nfs -o vers=4 192.168.1.100:/home/alientek/linux/nfs /mnt æè¿°1/home/alientek/linux/nfs *(rw,sync,no_root_squash) ç¼–è¯‘ç¯å¢ƒ 1source /opt/fsl-imx-x11/4.1.15-2.1.0/environment-setup-cortexa7hf-neon-poky-linux-gnueabi ç¼–è¯‘æ–‡ä»¶è·¯å¾„ å¼€æœºå¯åŠ¨é¡¹&#x2F;etc&#x2F;rc.local å¼€æœºå¯åŠ¨ç¨‹åº#æ³¨é‡Š 1/opt/QDesktop &gt;/dev/null 2&gt;&amp;1 è®¾ç½®IP1234PATH=/sbin:/bin:/usr/sbin:/usr/binifconfig eth0 192.168.1.115 netmask 255.255.255.0route add default gw 192.168.1.1echo &quot;nameserver 114.114.114.114&quot; &gt; /etc/resolv.conf QTæ‘„åƒå¤´äººè„¸è¯†åˆ«12345678910111213141516171819202122232425262728int main()&#123; //-------------------------------------------------- //æ·»åŠ äººè„¸è¯†åˆ« cv::CascadeClassifier faceCascade; // çº§è”åˆ†ç±»å™¨ faceCascade.load(&quot;Resources/haarcascade_frontalface_default.xml&quot;); // åŠ è½½è®­ç»ƒå¥½çš„haaräººè„¸æ­£è„¸xmlé…ç½®æ–‡ä»¶ if (faceCascade.empty()) &#123; printf( &quot;XML file not loaded\\n&quot;); &#125; else &#123; std::vector&lt;cv::Rect&gt; faces; // äººè„¸çš„çŸ©å½¢æ•°ç»„ faceCascade.detectMultiScale(frame, faces, 1.1, 3); // æ¯”ä¾‹å› å­ äººè„¸å¤§å° if(faces.size() &gt; 0) &#123; for (int i = 0; i &lt; faces.size(); i++) &#123; rectangle(frame, faces[i].tl(), faces[i].br(), cv::Scalar(255, 0, 255), 2); // åœ¨åŸå›¾ä¸Šç»˜åˆ¶äººè„¸çŸ©å½¢åŒºåŸŸï¼Œé¢œè‰²ä¸ºç²‰è‰²ï¼Œçº¿æ¡åšåº¦ä¸º3åƒç´  &#125; &#125; &#125; //--------------------------------------------------&#125;-lopencv_objdetect æ–‡ä»¶é¢œè‰²ç™½è‰²ï¼šè¡¨ç¤ºæ™®é€šæ–‡ä»¶ è“è‰²ï¼šè¡¨ç¤ºç›®å½•ï¼ˆæ–‡ä»¶å¤¹ï¼‰ ç»¿è‰²ï¼šè¡¨ç¤ºå¯æ‰§è¡Œæ–‡ä»¶ çº¢è‰²ï¼šè¡¨ç¤ºå‹ç¼©æ–‡ä»¶ï¼Œæ–‡ä»¶åŒ…ã€‚ ç²‰çº¢è‰²ï¼šå›¾ç‰‡ï¼›Socketæ–‡ä»¶ æµ…è“è‰²ï¼šé“¾æ¥æ–‡ä»¶ï¼ˆè½¯é“¾æ¥ï¼Œç¡¬é“¾æ¥ï¼‰ çº¢è‰²é—ªçƒï¼šè¡¨ç¤ºé“¾æ¥çš„æ–‡ä»¶æœ‰é—®é¢˜ é»„è‰²ï¼šè¡¨ç¤ºè®¾å¤‡æ–‡ä»¶ï¼ˆ /devç›®å½•ä¸‹ï¼šç‰©ç†å—è®¾å¤‡(b)ã€å­—ç¬¦ç»ˆç«¯è®¾å¤‡?ï¼‰ ç°è‰²ï¼šè¡¨ç¤ºå…¶ä»–æ–‡ä»¶ é’é»„è‰² ï¼šç®¡é“æ–‡ä»¶ ( p)","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"}]},{"title":"express","slug":"nodejs/express","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-27T03:07:12.257Z","comments":true,"path":"2024/12/26/nodejs/express/","permalink":"http://example.com/2024/12/26/nodejs/express/","excerpt":"","text":"ä¸€ã€å®‰è£…Node.jsè¿›å…¥Node.jså®˜ç½‘ä¸‹è½½å¹¶å®‰è£…ï¼Œé€‰exe,æ·»åŠ ç¯å¢ƒå˜é‡ åœ¨ä½¿ç”¨npmå‘½ä»¤æ—¶ï¼Œå¦‚æœç›´æ¥ä»å›½å¤–çš„ä»“åº“ä¸‹è½½ä¾èµ–ï¼Œæœ‰æ—¶å€™ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œç”šè‡³ä¼šä¸‹è½½ä¸ä¸‹æ¥ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥æ›´æ¢npmçš„ä»“åº“æºï¼Œæé«˜ä¸‹è½½é€Ÿåº¦ã€‚ æŸ¥çœ‹npmæºåœ°å€ï¼š 1npm config get registry æ›´æ¢npmæºä¸ºæ·˜å®é•œåƒï¼š 1npm config set registry https://registry.npm.taobao.org/ å¦‚æœè®¾ç½®äº†npmä¸ºæ·˜å®é•œåƒï¼Œéœ€è¦æ¢å¤ä¸ºé»˜è®¤æºæ—¶ï¼š 1npm config set registry https://registry.npmjs.org/ è®¾ç½®å¥½ä¹‹åï¼Œè®°å¾—é€šè¿‡ npm config get registry æŸ¥çœ‹æºæ˜¯å¦è®¾ç½®æˆåŠŸã€‚ æ³¨æ„ï¼šå¦‚æœåªæ˜¯æƒ³ä¸´æ—¶æ›´æ¢æºåœ°å€ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œ: 1npm install packagname -g --registry=https://registry.npm.taobao.org å›½å†…npmæºåœ°å€ 12345678npm å®˜æ–¹åŸå§‹é•œåƒï¼šhttps://registry.npmjs.org/æ·˜å® NPM é•œåƒï¼šhttps://registry.npm.taobao.orgé˜¿é‡Œäº‘ NPM é•œåƒï¼šhttps://npm.aliyun.comè…¾è®¯äº‘ NPM é•œåƒï¼šhttps://mirrors.cloud.tencent.com/npm/åä¸ºäº‘ NPM é•œåƒï¼šhttps://mirrors.huaweicloud.com/repository/npm/ç½‘æ˜“ NPM é•œåƒï¼šhttps://mirrors.163.com/npm/ä¸­ç§‘é™¢å¤§å­¦å¼€æºé•œåƒç«™ï¼šhttp://mirrors.ustc.edu.cn/æ¸…åå¤§å­¦å¼€æºé•œåƒç«™ï¼šhttps://mirrors.tuna.tsinghua.edu.cn/ äºŒã€å®‰è£…expresså’Œexpress-generator12npm install -g expressnpm install -g express-generator ä¸‰ã€ç”Ÿæˆé¡¹ç›®åœ¨é¡¹ç›®åç§°çš„åé¢æ·»åŠ  -e é‚£ä¹ˆåˆ›å»ºå‡ºæ¥çš„æ¨¡æ¿æ–‡ä»¶å°±æ˜¯.ejsç±»å‹ï¼Œè¯­æ³•æ˜¯ä¸htmlç›¸åŒ 1express APP_NAME -e å››ã€ä½¿ç”¨æ¡†æ¶index.ejså†…å®¹ä¿®æ”¹ï¼Œè·³è½¬html 12345678&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt; &lt;script&gt; window.location.replace(&quot;index.html&quot;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; æ¨¡æ¿webç½‘é¡µå…¨éƒ¨æ”¾å…¥publicæ–‡ä»¶å¤¹ä¸‹ å…¶ä»–å°†ejsæ–‡ä»¶æ”¹ä¸ºhtmlè‹¥å¸Œæœ›æ¨¡æ¿æ–‡ä»¶çš„åç¼€ä¸º.html(é€šå¸¸åªæ˜¯ä¸ºäº†çœ‹ç€æ›´èˆ’æœ)ï¼Œé‚£ä¹ˆåœ¨æ‰‹åŠ¨å°†.ejsæ¢æˆ.htmlåï¼Œè¿˜éœ€è¦å¯¹app.jsæ–‡ä»¶è¿›è¡Œè®¾ç½® 123// view engine setupapp.set(&#x27;views&#x27;, path.join(__dirname, &#x27;views&#x27;));app.set(&#x27;view engine&#x27;, &#x27;ejs&#x27;); 12345app.set(&#x27;views&#x27;, path.join(__dirname, &#x27;views&#x27;));app.engine(&#x27;.html&#x27;, require(&#x27;ejs&#x27;).__express);app.set(&#x27;view engine&#x27;, &#x27;html&#x27;); //app.set(&#x27;view engine&#x27;, &#x27;ejs&#x27;); æ¸²æŸ“å°†éœ€è¦æ¸²æŸ“çš„æ–‡ä»¶æ”¾å…¥viewsæ–‡ä»¶ï¼Œé™æ€æ–‡ä»¶æ”¾å…¥publicæ–‡ä»¶å¤¹æ”¾å…¥viewsçš„æ–‡ä»¶ï¼Œéœ€è¦åœ¨index.jsä¸­æ·»åŠ è·¯ç”±ï¼Œç±»ä¼¼ 1234567891011router.get(&#x27;/&#x27;, function(req, res, next) &#123; res.render(&#x27;index&#x27;, &#123; title: &#x27;Express /&#x27; &#125;);&#125;);router.get(&#x27;/index.html&#x27;, function(req, res, next) &#123; res.render(&#x27;index&#x27;, &#123; title: &#x27;Express index&#x27; &#125;);&#125;);router.get(&#x27;/services.html&#x27;, function(req, res, next) &#123; res.render(&#x27;services&#x27;, &#123; title: &#x27;Express2&#x27; &#125;);&#125;); æ˜¾ç¤ºæ‰€æœ‰å›¾ç‰‡ç¤ºä¾‹123&lt;% for(let i = 0 ; i&lt;image.length ; i++)&#123; %&gt;&lt;img loading=&quot;lazy&quot; src=&lt;%= image[i] %&gt; alt=&quot;Smiley face&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;% &#125; %&gt; 12345678910111213/* GET home page. */router.get(&#x27;/&#x27;, function (req, res, next) &#123; res.render(&#x27;index&#x27;, &#123; title: &#x27;Express&#x27;, display: &quot;image&quot;, image: function () &#123; var re = fs.readdirSync(&#x27;public/images&#x27;) for (i = 0; i &lt; re.length; i++) re[i] = &#x27;images/&#x27; + re[i]; return re; &#125;(), &#125;);&#125;);","categories":[{"name":"nodejs","slug":"nodejs","permalink":"http://example.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"http://example.com/tags/nodejs/"},{"name":"express","slug":"express","permalink":"http://example.com/tags/express/"}]},{"title":"nodejsä¼ æ–‡ä»¶","slug":"nodejs/sendfile","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:30:14.638Z","comments":true,"path":"2024/12/26/nodejs/sendfile/","permalink":"http://example.com/2024/12/26/nodejs/sendfile/","excerpt":"","text":"nodejsä¼ æ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435const fs = require(&#x27;fs&#x27;)const pathLib = require(&#x27;path&#x27;)var objMulter = multer(&#123;dest: &#x27;./upload/&#x27;&#125;)// åŸºäºexpressæ¡†æ¶çš„nodeæœåŠ¡å™¨var server = express()// å…è®¸æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶ä¼ é€’è¿‡æ¥server.use(objMulter.any())server.post(&#x27;/&#x27;, function(req,res)&#123; // å› ä¸ºä¸Šä¼ è¿‡æ¥çš„æ–‡ä»¶åç§°æ¯”è¾ƒå¤æ‚,æˆ‘ä»¬éœ€è¦ç»™æ–‡ä»¶é‡æ–°å‘½å var newName = req.files[0].path+pathLib.parse(req.files[0].originalname).ext // åˆ©ç”¨fsæ¨¡å—çš„æ–‡ä»¶é‡å‘½å // req.files[0].pathè¿™ä¸ªæ˜¯æ–‡ä»¶çš„åœ¨ä¼ é€’ä¸­è¢«ä¿®æ”¹çš„åå­—ï¼ŒnewNameæ˜¯æ–‡ä»¶åŸåç§°,functionå›è°ƒå‡½æ•° fs.rename(req.files[0].path, newName, function(err)&#123; if(err)&#123; res.send(&#x27;å¤±è´¥&#x27;) &#125;else&#123; res.send(&#x27;æˆåŠŸ&#x27;) &#125; &#125;)&#125;)server.get(&#x27;/&#x27;, function (req, res) &#123; /*res.send(&quot;./upload.html&quot;);*/ console.log(&quot;connect&quot;); res.sendFile(&quot;index.html&quot;,&#123;root:__dirname&#125;);&#125;) // ç›‘å¬ç«¯å£var app = server.listen(8081,&#x27;192.168.168.238&#x27;,function()&#123; var host = app.address().address var port = app.address().port console.log(&quot;åœ°å€ä¸º http://%s:%s&quot;, host, port) &#125;); 123456789101112131415&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; æ–‡ä»¶ï¼š&lt;input type=&quot;file&quot; name=&quot;f1&quot; /&gt;&lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;ä¸Šä¼ &quot;&gt; &lt;/form&gt; &lt;/body&gt;&lt;/html&gt;","categories":[{"name":"nodejs","slug":"nodejs","permalink":"http://example.com/categories/nodejs/"}],"tags":[{"name":"nodejs","slug":"nodejs","permalink":"http://example.com/tags/nodejs/"},{"name":"express","slug":"express","permalink":"http://example.com/tags/express/"}]},{"title":"gdb","slug":"openocd/arm-none-eabi-gdb","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:48:09.350Z","comments":true,"path":"2024/12/26/openocd/arm-none-eabi-gdb/","permalink":"http://example.com/2024/12/26/openocd/arm-none-eabi-gdb/","excerpt":"","text":"arm-none-eabi-gdbä½¿ç”¨è¯´æ˜æ–‡æ¡£1C:\\Program Files (x86)\\GNU Arm Embedded Toolchain\\9 2020-q2-update\\share\\doc\\gcc-arm-none-eabi\\pdf\\gdb.pdf ä½¿ç”¨12345#-exä½¿ç”¨å¤–éƒ¨æŒ‡ä»¤arm-none-eabi-gdb *.elf -ex &quot;target remote localhost:3333&quot;#ä¹Ÿå¯æŒ‡ä»¤åˆ†å¼€arm-none-eabi-gdb *.elftarget remote localhost:3333 å¸¸ç”¨æŒ‡ä»¤ æŒ‡ä»¤ å«ä¹‰ ä¾‹å­ å¤‡æ³¨ monitor cmd æ‰§è¡ŒæŒ‡ä»¤ reset halt load c continue ç»§ç»­æ‰§è¡Œ s step å•æ­¥æ‰§è¡Œ b break æ–­ç‚¹ b main.c:111 main.c 111è¡Œ b test å‡½æ•°test b if a == 1 æ¡ä»¶ b if a = 1 èµ‹å€¼ n next ä¸‹ä¸€æ–­ç‚¹ u until åˆ°è¾¾æŒ‡å®šä½ç½® f frame å½“å‰æ–­ç‚¹ finish é€€å‡ºå‡½æ•° i info æ˜¾ç¤ºä¿¡æ¯ d delete åˆ é™¤æ˜¾ç¤º æ–­ç‚¹ display æ˜¾ç¤ºå˜é‡ï¼Œæ¯æ¬¡åœé¡¿éƒ½æ˜¾ç¤º p print æ‰“å°å˜é‡ q quit é€€å‡º where ä½ç½® list æ˜¾ç¤ºä»£ç ","categories":[{"name":"OCD","slug":"OCD","permalink":"http://example.com/categories/OCD/"},{"name":"gdb","slug":"OCD/gdb","permalink":"http://example.com/categories/OCD/gdb/"}],"tags":[{"name":"OpenOCD","slug":"OpenOCD","permalink":"http://example.com/tags/OpenOCD/"},{"name":"gdb","slug":"gdb","permalink":"http://example.com/tags/gdb/"}]},{"title":"OpenOCD","slug":"openocd/openocd","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:48:27.752Z","comments":true,"path":"2024/12/26/openocd/openocd/","permalink":"http://example.com/2024/12/26/openocd/openocd/","excerpt":"","text":"OpenOCDè¿”å›ä¸»é¡µ å‚è€ƒ1 å‚è€ƒ2 å‚è€ƒ3 openocdä¸dapè¿æ¥æµ‹è¯•1openocd -f interface/cmsis-dap.cfg ä½¿ç”¨1openocd -f &lt;æ¥å£é…ç½®æ–‡ä»¶&gt; -f &lt;èŠ¯ç‰‡é…ç½®æ–‡ä»¶&gt; -c &lt;æ‰§è¡Œå‘½ä»¤&gt; openocd -f openocd.cfg 1234567#openocd.cfg#é€‰æ‹©è°ƒè¯•å™¨source [find interface/cmsis-dap.cfg]# é€‰æ‹©æ¥å£ä¸ºSWDtransport select swd# é€‰æ‹©ç›®æ ‡èŠ¯ç‰‡source [find target/stm32f4x.cfg] openocdè¿è¡Œæµ‹è¯• è¿æ¥æœ¬æœºç«¯å£ 1telnet localhost 4444 æŒ‡ä»¤resetï¼Œhaltï¼Œflash write_image,exitopenocdè¿è¡Œåï¼Œshellè¢«å ç”¨ï¼Œå¦å¼€ç»ˆç«¯ 1flash write_image *.hex å¯åŠ¨GDB 1arm-none-eabi-gdb *.elf GDBè¿æ¥openocd 1target remote localhost:3333 monitor reset,halt,loadå¼€å§‹GDBè°ƒè¯•123456openocd -f openocd.cfg -c init -c halt -c &quot;flash write_image erase E:/MCU/STM32L431RC-BearPi/usart1-fpu-test/build/usart1-fpu-test.bin 0x08000000&quot;//æˆ–openocd -f board/stm32f3discovery.cfg -c &quot;program filename.elf verify reset exit&quot;openocd -f interface/stlink.cfg -f target/stm32f2x.cfg -c init -c halt -c &quot;program $^ verify reset exit&quot; 12345678910111213141516171819PREFIX = arm-none-eabi-CC = $(GCC_PATH)/$(PREFIX)gccAS = $(GCC_PATH)/$(PREFIX)gcc -x assembler-with-cppCP = $(GCC_PATH)/$(PREFIX)objcopySZ = $(GCC_PATH)/$(PREFIX)sizeDB = $(GCC_PATH)/$(PREFIX)gdbflash: $(BUILD_DIR)/$(TARGET).hex openocd -f openocd.cfg -c init -c halt -c &quot;program $^ verify reset exit&quot;# &quot;flash write_image erase build/F407.hex&quot; -c reset -c exit# &quot;flash write_image erase E:/MCU/STM32L431RC-BearPi/usart1-fpu-test/build/usart1-fpu-test.bin&quot;#&quot;*.bin 0x08000000&quot;debug: #$(BUILD_DIR)/$(TARGET).hex openocd -f interface/cmsis-dap.cfg -f target/stm32f4x.cfg -c &quot;transport select swd&quot; &amp; $(DB) $(BUILD_DIR)/$(TARGET).elf -ex &quot;target remote localhost:3333&quot;exit: taskkill -f -im openocd.exe openocd program telnetåŠŸèƒ½æ‰“å¼€ï¼šwindowsåŠŸèƒ½-&gt;telnet client1telnet localhost 4444 SVDæ–‡ä»¶ï¼šèŠ¯ç‰‡å¯„å­˜å™¨æè¿° SVD æ–‡ä»¶ä¸‹è½½ GDBä½¿ç”¨ RTT viewer bæ‰“æ–­ç‚¹12b if a = 10#å¼ºè¡Œèµ‹å€¼a=10b if a == 10#ç­‰åˆ°a=10æ—¶åœæ­¢ å¯ç”¨ä½œæ¡ä»¶ï¼Œå¦‚a%5 == 0ï¼Œå±€éƒ¨å˜é‡éœ€è¦è¿è¡Œåˆ°å‡½æ•°å†…éƒ¨ linuxä¸‹å®‰è£… libtool hidapiå®‰è£…12sudo apt-get install libtool-binsudo apt-get install hidapi-dev VScodeä»¿çœŸlaunch.jsoncortex-debug 1234567891011121314151617181920212223&#123; // ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚ // æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚ // æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387 &quot;version&quot;: &quot;0.2.0&quot;, &quot;configurations&quot;: [ &#123; &quot;name&quot;: &quot;Cortex Debug&quot;, &quot;cwd&quot;: &quot;$&#123;workspaceRoot&#125;&quot;, &quot;executable&quot;: &quot;$&#123;workspaceRoot&#125;/build/F407.elf&quot;, &quot;request&quot;: &quot;launch&quot;, &quot;type&quot;: &quot;cortex-debug&quot;, &quot;device&quot;:&quot;STM32F407VE&quot;, //ä½¿ç”¨J-link GDB Serveræ—¶å¿…é¡»ï¼›å…¶ä»–GBD Serveræ—¶å¯é€‰ï¼ˆæœ‰å¯èƒ½å¸®åŠ©è‡ªåŠ¨é€‰æ‹©SVDæ–‡ä»¶ï¼‰ã€‚æ”¯æŒçš„è®¾å¤‡è§ https://www.segger.com/downloads/supported-devices.php &quot;svdFile&quot;: &quot;./STM32F407.svd&quot;, //svdæ–‡ä»¶ï¼Œæœ‰è¿™ä¸ªæ–‡ä»¶æ‰èƒ½æŸ¥çœ‹å¯„å­˜å™¨çš„å€¼ï¼Œæ¯ä¸ªå•ç‰‡æœºéƒ½ä¸åŒã€‚å¯ä»¥åœ¨ä»¥ä¸‹åœ°å€æ‰¾åˆ° https://github.com/posborne/cmsis-svd &quot;servertype&quot;: &quot;openocd&quot;, //ä½¿ç”¨çš„GDB Server &quot;configFiles&quot;: [ &quot;$&#123;workspaceRoot&#125;/openocd.cfg&quot; ], //&quot;preLaunchTask&quot;: &quot;build&quot; &#125; ]&#125; gdb &#123; &quot;version&quot;: &quot;0.2.0&quot;, &quot;configurations&quot;: [ &#123; &quot;name&quot;: &quot;ARM Debug&quot;, &quot;type&quot;: &quot;cppdbg&quot;, &quot;request&quot;: &quot;launch&quot;, &quot;program&quot;: &quot;$&#123;workspaceFolder&#125;/build/F407.elf&quot;, // è¦è°ƒè¯•çš„ç¨‹åºï¼ˆåœ¨ä¸‹é¢çš„å‚æ•°ä¸­æŒ‡å®šäº†ï¼Œè¿™é‡Œçš„æ²¡æœ‰æ„ä¹‰ï¼‰ &quot;args&quot;: [], &quot;stopAtEntry&quot;: false, &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;, &quot;environment&quot;: [], &quot;externalConsole&quot;: true, // è°ƒè¯•æ—¶æ˜¯å¦æ˜¾ç¤ºæ§åˆ¶å°çª—å£ &quot;MIMode&quot;: &quot;gdb&quot;, &quot;miDebuggerPath&quot;: &quot;C:\\\\Program Files (x86)\\\\GNU Arm Embedded Toolchain\\\\9 2020-q2-update\\\\bin\\\\arm-none-eabi-gdb.exe&quot;, //è°ƒè¯•å·¥å…·åŸå§‹è·¯å¾„ &quot;targetArchitecture&quot;: &quot;arm&quot;, //ç›®æ ‡æ¶æ„ï¼Œæ­¤å‚æ•°å¿…é¡»è¦æœ‰ &quot;setupCommands&quot;: [ // è¿›å…¥GDBä»¥åï¼Œè‡ªåŠ¨æ‰§è¡Œçš„ä¸€äº›é…ç½® &#123; &quot;description&quot;: &quot;é€‰æ‹©è°ƒè¯•æ–‡ä»¶(.elf)åˆ°gdb&quot;, &quot;text&quot;: &quot;file D:/practise/F407_Disc/build/F407.elf&quot;, //æ­¤å¤„ä¸èƒ½ä½¿ç”¨$&#123;workspaceFolder&#125;ï¼Œå› ä¸ºwindowsä¸‹åˆ†éš”ç¬¦æ˜¯&#39;\\\\&#39;ï¼Œgdbè¯†åˆ«ä¸å‡ºæ¥ &quot;ignoreFailures&quot;: false &#125;, &#123; &quot;description&quot;: &quot;è¿æ¥GDB Server&quot;, &quot;text&quot;: &quot;target remote localhost:3333&quot;, &quot;ignoreFailures&quot;: false &#125;, &#123; &quot;description&quot;: &quot;Reset MCU&quot;, &quot;text&quot;: &quot;monitor reset&quot;, &quot;ignoreFailures&quot;: false &#125;, &#123; &quot;description&quot;: &quot;Halt&quot;, &quot;text&quot;: &quot;monitor halt&quot;, &quot;ignoreFailures&quot;: false &#125;, &#123; &quot;description&quot;:&quot;ä¸‹è½½ä»£ç åˆ°MCU&quot;, &quot;text&quot;: &quot;load&quot; , &quot;ignoreFailures&quot;: false &#125; ], //&quot;preLaunchTask&quot;: &quot;build&quot;, // åœ¨è°ƒè¯•å‰é¢„å…ˆæ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ­¤å¤„æ˜¯tasks.jsonä¸­çš„ &#125; ] &#125; `","categories":[{"name":"OCD","slug":"OCD","permalink":"http://example.com/categories/OCD/"},{"name":"OpenOCD","slug":"OCD/OpenOCD","permalink":"http://example.com/categories/OCD/OpenOCD/"}],"tags":[{"name":"OpenOCD","slug":"OpenOCD","permalink":"http://example.com/tags/OpenOCD/"},{"name":"OCD","slug":"OCD","permalink":"http://example.com/tags/OCD/"}]},{"title":"pyocd","slug":"openocd/pyocd","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:48:23.590Z","comments":true,"path":"2024/12/26/openocd/pyocd/","permalink":"http://example.com/2024/12/26/openocd/pyocd/","excerpt":"","text":"pyocdè¿”å›ä¸»é¡µ åˆ—è¡¨ æŒ‡ä»¤ åˆ—å‡ºå¯ç”¨çš„æ¢é’ˆ pyocd list â€“probes åˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„ç›®æ ‡æ¿ pyocd list â€“targets åˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„å¼€å‘æ¿ pyocd list â€“boards jsonåˆ—å‡ºå¯ç”¨çš„æ¢é’ˆ pyocd json â€“probes jsonåˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„ç›®æ ‡æ¿ pyocd json â€“targets jsonåˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„å¼€å‘æ¿ pyocd json â€“boards çƒ§å½•pyocd cmd â€“command load template.hex â€“target stm32f103rc è¿æ¥pyocd cmd â€“connect halt â€“target stm32f103rc è®¾ç½®æ–­ç‚¹pyocd cmd â€“command break 0x0800029e â€“target stm32f103rc æŒ‡ä»¤ åŠŸèƒ½ go è¿è¡Œ reset å¤ä½ halt æš‚åœ reg æŸ¥çœ‹å¯„å­˜å™¨ status çŠ¶æ€ step å•æ­¥ break æ–­ç‚¹ lsbreak æŸ¥çœ‹æ–­ç‚¹ rmbreak åˆ é™¤æ–­ç‚¹ load ä¸‹è½½ erase æ“¦é™¤","categories":[{"name":"OCD","slug":"OCD","permalink":"http://example.com/categories/OCD/"},{"name":"pyocd","slug":"OCD/pyocd","permalink":"http://example.com/categories/OCD/pyocd/"}],"tags":[{"name":"OCD","slug":"OCD","permalink":"http://example.com/tags/OCD/"},{"name":"pyocd","slug":"pyocd","permalink":"http://example.com/tags/pyocd/"}]},{"title":"vscodeé…ç½®","slug":"openocd/vscode","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:15:37.861Z","comments":true,"path":"2024/12/26/openocd/vscode/","permalink":"http://example.com/2024/12/26/openocd/vscode/","excerpt":"","text":"vscodeé…ç½®é…ç½®ç”¨æˆ·ä»»åŠ¡ï¼ˆä¸‹æ‹‰èœå•ï¼‰1-tasks.jsonå¹²å•¥ç”¨çš„åœ¨è¿™é‡Œï¼ˆ Tasks in Visual Studio Codeï¼‰äº†è§£å…³äºtasks.jsonçš„ä½œç”¨ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯vscodeè®¾è®¡çš„ä¸“é—¨é…ç½®å¦‚ä½•è°ƒç”¨å¤–éƒ¨åŠŸèƒ½çš„æ¥å£ï¼Œå› ä¸ºè¿™äº›å¤–éƒ¨çš„åŠŸèƒ½å¦‚make, lintç­‰æ˜¯å¼€å‘ç¯èŠ‚ä¸­çš„é‡è¦éƒ¨åˆ†ï¼Œè€Œä¸”å¤§éƒ¨åˆ†æ˜¯å‘½ä»¤è¡Œå¼çš„ã€‚è¿™ä¸€æ®µæ‰€æè¿°çš„æ‰€æœ‰å†…å®¹éƒ½å¯ä»¥åœ¨è¿™ä¸ªé“¾æ¥é‡Œæ‰¾åˆ°ï¼Œå»ºè®®è®¤çœŸé˜…è¯»åŸæ–‡ï¼Œè¦æŸ¥çœ‹å…·ä½“å­—æ®µå¦‚â€groupâ€ä½¿ç”¨è¯´æ˜å¯ä»¥ç›´æ¥åœ¨ç½‘é¡µé‡Œæœç´¢ã€‚å†ç®€å•æ¥è¯´ï¼Œæœ‰äº†tasks.jsonå°±å¯ä»¥é…ç½®ç”¨æˆ·è‡ªå·±çš„ä¸‹æ¥èœå•ã€‚ 2-å¦‚ä½•åˆ›å»ºtasks.jsonï¼Ÿæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ã€æ‰‹åŠ¨è‡ªå·±åˆ›å»º.vscode&#x2F;tasks.json, å› ä¸ºæ–‡ä»¶å†…å®¹æ¯”è¾ƒç®€å•æ‰€ä»¥å®Œå…¨å¯ä»¥è‡ªå·±åˆ›å»ºï¼Œçœå¾—è®°å¿†ä¸‹é¢æåˆ°åˆ›å»ºæ–¹æ³•è·¯å¾„ï¼Œ äºŒã€èœå•çš„Terminal-&gt;configure tasksâ€¦ æˆ–è€…ç”¨CTRL+P å¼¹å‡ºè¾“å…¥æ¡†ï¼Œè¾“å…¥â€˜&gt;Taskâ€™åˆ—è¡¨æ˜¾ç¤ºä¸€å †ï¼Œé€‰æ‹©â€œTasks:Config Taskâ€ç»§ç»­é€‰æ‹©Creat tasks.json file from template ã€‚ è¿™é‡Œå·®åˆ«ä¸å¤§ï¼Œå› ä¸ºæˆ‘ä»¬åªæ˜¯è¦ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åé‡Œé¢å†…å®¹åˆ æ‰é‡å†™ã€‚ 3-tasks.jsonçš„æ–‡ä»¶ç¼–è¾‘é’ˆå¯¹stm32å¼€å‘çš„ç”¨åˆ°çš„åŠŸèƒ½åªæ˜¯tasks.jsonä¸­å¾ˆç®€å•çš„ä¸€å—ï¼Œè¿™é‡Œä¸€å…±å®šä¹‰äº†6ä¸ªtaskï¼Œåˆ†åˆ«è¯´æ˜å¦‚ä¸‹ï¼Œ è°ƒç”¨makeæŒ‡ä»¤æ‰§è¡Œç¼–è¯‘ï¼Œå®é™…æ‰§è¡Œçš„å‘½ä»¤è¡Œæ˜¯â€˜make all -j4â€™è°ƒç”¨4æ ¸å…¨åŠ›æ‰§è¡Œ è°ƒç”¨makeæŒ‡ä»¤æ‰§è¡Œæ¸…ç†å·¥ç¨‹ï¼Œå®é™…æ‰§è¡Œâ€˜make cleanâ€™,åˆ é™¤buildç›®å½•åŠå†…å®¹ jlinkçš„ä¸‹è½½ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯â€˜make -j4 jflashâ€™ jlinkçš„æ“¦é™¤ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯â€˜make jeraseâ€™ stlinkçš„ä¸‹è½½ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯ â€˜make -j4 stflashâ€™ stlinkçš„æ“¦é™¤ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯â€˜st-flash â€“freq&#x3D;4000 eraseâ€™ è¿™é‡Œæ³¨æ„ï¼Œç¬¬6ä¸ªtaskæ²¡æœ‰é€šè¿‡makefileæ‰§è¡Œï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨st-flashæŒ‡ä»¤ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»makefileé‡Œæ‰§è¡Œï¼Œè°ƒç”¨â€™make steraseâ€™å³å¯ã€‚è¿™è¡¨æ˜tasks.jsonå¯ä»¥è®©vscodeè°ƒç”¨ä»»æ„å¤–éƒ¨åŠŸèƒ½ï¼Œå¦‚make.exeå’Œst-flash.exeã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&#123; &quot;version&quot;: &quot;2.0.0&quot;, &quot;tasks&quot;: [ // MAKE(BUILD + CLEAN) &#123; &quot;label&quot;: &quot;task-build&quot;, &quot;group&quot;: &quot;build&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;make&quot;, &quot;args&quot;: [ &quot;all&quot;, &quot;-j4&quot; ] &#125;, &#123; &quot;label&quot;: &quot;task-clean&quot;, &quot;group&quot;: &quot;build&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;make&quot;, &quot;args&quot;: [&quot;clean&quot;] &#125;, // JLINK (FLASH + ERASE) &#123; &quot;label&quot;: &quot;task-jflash&quot;, &quot;group&quot;: &quot;build&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;make&quot;, &quot;args&quot;: [ &quot;-j4&quot;, &quot;jflash&quot; ] &#125;, &#123; &quot;label&quot;: &quot;task-jerase&quot;, &quot;group&quot;: &quot;build&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;make&quot;, &quot;args&quot;: [&quot;jerase&quot;] &#125;, // STLINK (FLASH+ERASE) &#123; &quot;label&quot;: &quot;task-stflash&quot;, &quot;group&quot;: &quot;build&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;make&quot;, &quot;args&quot;: [&quot;-j4&quot;, &quot;stflash&quot;] &#125;, &#123; &quot;label&quot;: &quot;task-sterase&quot;, &quot;group&quot;: &quot;build&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;st-flash&quot;, &quot;args&quot;: [&quot;--freq=4000&quot;,&quot;erase&quot;] &#125;, ]&#125; 4-tasksçš„ä½¿ç”¨æ–¹æ³•CTRL+SHIFT+B æˆ– Terminal-&gt;Run Build Taskâ€¦ å³å¯è°ƒå‡ºâ€˜ä¸‹æ‹‰èœå•â€™ï¼Œé€šè¿‡æ–¹å‘é”®é€‰æ‹©å¹¶æŒ‰å›è½¦æ‰§è¡Œã€‚â€˜ä¸‹æ‹‰èœå•â€™ä¸­å„é¡¹åç§°å°±æ˜¯tasks.jsonä¸­å¯¹åº”çš„â€labelâ€å‚æ•°é…ç½®çš„ã€‚â€˜ä¸‹æ‹‰èœå•â€™çš„æ‰§è¡Œæ•ˆæœç­‰åŒäºé”®å…¥å¯¹åº”çš„å‘½ä»¤è¡Œã€‚ è‡ªå®šä¹‰vscodeå‘½ä»¤å¿«æ·é”®æ‰“å¼€ VS Code å¹¶è¿›å…¥å‘½ä»¤é¢æ¿ã€‚ä½ å¯ä»¥æŒ‰ä¸‹ F1 æˆ– Ctrl+Shift+Pï¼ˆWindows å’Œ Linuxï¼‰&#x2F; Cmd+Shift+Pï¼ˆMacï¼‰æ‰“å¼€å‘½ä»¤é¢æ¿ã€‚ åœ¨å‘½ä»¤é¢æ¿ä¸­è¾“å…¥â€œPreferences: Open Keyboard Shortcutsï¼ˆJSONï¼‰â€ï¼Œç„¶åé€‰æ‹©æ‰“å¼€ã€‚è¿™å°†æ‰“å¼€ä¸€ä¸ªåä¸º keybindings.json çš„æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä½ çš„è‡ªå®šä¹‰é”®ç»‘å®šã€‚ ç‚¹å‡»Define Keybindingè¾“å…¥è‡ªå®šä¹‰é”® 12345678910111213141516// Place your key bindings in this file to override the defaults[&#123; &quot;key&quot;: &quot;ctrl+l&quot;, &quot;command&quot;: &quot;workbench.action.terminal.sendSequence&quot;, &quot;args&quot;: &#123; &quot;text&quot;: &quot;make\\n&quot; &#125;, &quot;when&quot;: &quot;editorTextFocus&quot;&#125;, &#123; &quot;key&quot;: &quot;ctrl+f7&quot;, &quot;command&quot;: &quot;workbench.action.tasks.runTask&quot;, &quot;args&quot;: &quot;task-jerase&quot; &#125;] è§£é‡Šï¼šæŒ‰é”®ctrl+låœ¨ç»ˆç«¯ä¸‹è¾“å…¥makeæ¢è¡Œï¼Œå³è¾“å…¥æ‰§è¡ŒmakeæŒ‡ä»¤æŒ‰é”®ctrl+f7åœ¨ä¸Šè¿°ä»»åŠ¡é‡è¿è¡Œtask-jerase vscode debugadd configuration 123456789101112&#123; &quot;cwd&quot;: &quot;$&#123;workspaceRoot&#125;&quot;, &quot;executable&quot;: &quot;./bin/executable.elf&quot;, &quot;name&quot;: &quot;Debug with OpenOCD&quot;, &quot;request&quot;: &quot;launch&quot;, &quot;type&quot;: &quot;cortex-debug&quot;, &quot;servertype&quot;: &quot;openocd&quot;, &quot;configFiles&quot;: [], &quot;searchDir&quot;: [], &quot;runToEntryPoint&quot;: &quot;main&quot;, &quot;showDevDebugOutput&quot;: &quot;none&quot;&#125;, ä¿®æ”¹executable,configFilesexecutable:ç¼–è¯‘ç»“æœï¼Œelfæ–‡ä»¶comfigFiles:openocdé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å¤šä¸ª æ’é™¤æœç´¢settings.json12345678910&#123; &quot;search.exclude&quot;: &#123; &quot;**/modules&quot;:true, &#125;, &quot;files.exclude&quot;: &#123; &quot;*/.git&quot;:true, &#125;&#125;","categories":[{"name":"vscode","slug":"vscode","permalink":"http://example.com/categories/vscode/"}],"tags":[{"name":"vscode","slug":"vscode","permalink":"http://example.com/tags/vscode/"}]},{"title":"Matplotlib","slug":"python/Matplotlib","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:43:40.270Z","comments":true,"path":"2024/12/26/python/Matplotlib/","permalink":"http://example.com/2024/12/26/python/Matplotlib/","excerpt":"","text":"Matplotlib æ˜¯ä¸€æ¬¾ç”¨äºæ•°æ®å¯è§†åŒ–çš„ Python è½¯ä»¶åŒ…ï¼Œæ”¯æŒè·¨å¹³å°è¿è¡Œå®‰è£…è¯´æ˜é“¾æ¥ 1pip install matplotlib ä½¿ç”¨Aggæ— æ³•æ˜¾ç¤ºï¼Œä½¿ç”¨12print (matplotlib.get_backend())matplotlib.use(&#x27;TkAgg&#x27;) ç»˜å›¾ç±»å‹ å‡½æ•°åç§° æè¿° Bar ç»˜åˆ¶æ¡å½¢å›¾ Barh ç»˜åˆ¶æ°´å¹³æ¡å½¢å›¾ Boxplot ç»˜åˆ¶ç®±å‹å›¾ Hist ç»˜åˆ¶ç›´æ–¹å›¾ his2d ç»˜åˆ¶2Dç›´æ–¹å›¾ Pie ç»˜åˆ¶é¥¼çŠ¶å›¾ Plot åœ¨åæ ‡è½´ä¸Šç”»çº¿æˆ–è€…æ ‡è®° Polar ç»˜åˆ¶æåæ ‡å›¾ Scatter ç»˜åˆ¶xä¸yçš„æ•£ç‚¹å›¾ Stackplot ç»˜åˆ¶å †å å›¾ Stem ç”¨æ¥ç»˜åˆ¶äºŒç»´ç¦»æ•£æ•°æ®ç»˜åˆ¶ï¼ˆåˆç§°ä¸ºâ€œç«æŸ´å›¾â€ï¼‰ Step ç»˜åˆ¶é˜¶æ¢¯å›¾ Quiver ç»˜åˆ¶ä¸€ä¸ªäºŒç»´æŒ‰ç®­å¤´ Imageå‡½æ•° å‡½æ•°åç§° æè¿° Imread ä»æ–‡ä»¶ä¸­è¯»å–å›¾åƒçš„æ•°æ®å¹¶å½¢æˆæ•°ç»„ã€‚ Imsave å°†æ•°ç»„å¦å­˜ä¸ºå›¾åƒæ–‡ä»¶ã€‚ Imshow åœ¨æ•°è½´åŒºåŸŸå†…æ˜¾ç¤ºå›¾åƒã€‚ Axiså‡½æ•° å‡½æ•°åç§° æè¿° Axes åœ¨ç”»å¸ƒ(Figure)ä¸­æ·»åŠ è½´ Text å‘è½´æ·»åŠ æ–‡æœ¬ Title è®¾ç½®å½“å‰è½´çš„æ ‡é¢˜ Xlabel è®¾ç½®xè½´æ ‡ç­¾ Xlim è·å–æˆ–è€…è®¾ç½®xè½´åŒºé—´å¤§å° Xscale è®¾ç½®xè½´ç¼©æ”¾æ¯”ä¾‹ Xticks è·å–æˆ–è®¾ç½®xè½´åˆ»æ ‡å’Œç›¸åº”æ ‡ç­¾ Ylabel è®¾ç½®yè½´çš„æ ‡ç­¾ Ylim è·å–æˆ–è®¾ç½®yè½´çš„åŒºé—´å¤§å° Yscale è®¾ç½®yè½´çš„ç¼©æ”¾æ¯”ä¾‹ Yticks è·å–æˆ–è®¾ç½®yè½´çš„åˆ»æ ‡å’Œç›¸åº”æ ‡ç­¾ Figureå‡½æ•° å‡½æ•°åç§° æè¿° Figtext åœ¨ç”»å¸ƒä¸Šæ·»åŠ æ–‡æœ¬ Figure åˆ›å»ºä¸€ä¸ªæ–°ç”»å¸ƒ Show æ˜¾ç¤ºæ•°å­— Savefig ä¿å­˜å½“å‰ç”»å¸ƒ Close å…³é—­ç”»å¸ƒçª—å£ ä¸­æ–‡123import matplotlib.pyplot as pltplt.rcParams[&quot;font.sans-serif&quot;]=[&quot;SimHei&quot;] #è®¾ç½®å­—ä½“plt.rcParams[&quot;axes.unicode_minus&quot;]=False #è¯¥è¯­å¥è§£å†³å›¾åƒä¸­çš„â€œ-â€è´Ÿå·çš„ä¹±ç é—®é¢˜ 1234567891011121314151617#ç»˜åˆ¶æŠ˜çº¿å›¾import matplotlib.pyplot as pltplt.rcParams[&quot;font.sans-serif&quot;]=[&quot;SimHei&quot;] #è®¾ç½®å­—ä½“plt.rcParams[&quot;axes.unicode_minus&quot;]=False #æ­£å¸¸æ˜¾ç¤ºè´Ÿå·year = [2017, 2018, 2019, 2020]people = [20, 40, 60, 70]#ç”Ÿæˆå›¾è¡¨plt.plot(year, people)plt.xlabel(&#x27;å¹´ä»½&#x27;)plt.ylabel(&#x27;äººå£&#x27;)plt.title(&#x27;äººå£å¢é•¿&#x27;)#è®¾ç½®çºµåæ ‡åˆ»åº¦plt.yticks([0, 20, 40, 60, 80])#è®¾ç½®å¡«å……é€‰é¡¹ï¼šå‚æ•°åˆ†åˆ«å¯¹åº”æ¨ªåæ ‡ï¼Œçºµåæ ‡ï¼Œçºµåæ ‡å¡«å……èµ·å§‹å€¼ï¼Œå¡«å……é¢œè‰²plt.fill_between(year, people, 20, color = &#x27;green&#x27;)#æ˜¾ç¤ºå›¾è¡¨plt.show() è®¾ç½®åˆ»åº¦12345678910111213141516171819import matplotlib.pyplot as pltimport numpy as npimport mathx = np.arange(0, math.pi*2, 0.05)#ç”Ÿæˆç”»å¸ƒå¯¹è±¡fig = plt.figure()#æ·»åŠ ç»˜å›¾åŒºåŸŸax = fig.add_axes([0.1, 0.1, 0.8, 0.8])y = np.sin(x)ax.plot(x, y)#è®¾ç½®xè½´æ ‡ç­¾ax.set_xlabel(&#x27;angle&#x27;)ax.set_title(&#x27;sine&#x27;)ax.set_xticks([0,2,4,6])#è®¾ç½®xè½´åˆ»åº¦æ ‡ç­¾ax.set_xticklabels([&#x27;zero&#x27;,&#x27;two&#x27;,&#x27;four&#x27;,&#x27;six&#x27;])#è®¾ç½®yè½´åˆ»åº¦ax.set_yticks([-1,0,1])plt.show() åæ ‡è½´åœ¨ä¸€ä¸ªå‡½æ•°å›¾åƒä¸­ï¼Œæœ‰æ—¶è‡ªå˜é‡ x ä¸å› å˜é‡ y æ˜¯æŒ‡æ•°å¯¹åº”å…³ç³»ï¼Œè¿™æ—¶éœ€è¦å°†åæ ‡è½´åˆ»åº¦è®¾ç½®ä¸ºå¯¹æ•°åˆ»åº¦ã€‚Matplotlib é€šè¿‡ axes å¯¹è±¡çš„xscaleæˆ–yscaleå±æ€§æ¥å®ç°å¯¹åæ ‡è½´çš„æ ¼å¼è®¾ç½®ã€‚ 12345678910111213141516171819import matplotlib.pyplot as pltimport numpy as npimport mathx = np.arange(0, math.pi*2, 0.05)#ç”Ÿæˆç”»å¸ƒå¯¹è±¡fig = plt.figure()#æ·»åŠ ç»˜å›¾åŒºåŸŸax = fig.add_axes([0.1, 0.1, 0.8, 0.8])y = np.sin(x)ax.plot(x, y)#è®¾ç½®xè½´æ ‡ç­¾ax.set_xlabel(&#x27;angle&#x27;)ax.set_title(&#x27;sine&#x27;)ax.set_xticks([0,2,4,6])#è®¾ç½®xè½´åˆ»åº¦æ ‡ç­¾ax.set_xticklabels([&#x27;zero&#x27;,&#x27;two&#x27;,&#x27;four&#x27;,&#x27;six&#x27;])#è®¾ç½®yè½´åˆ»åº¦ax.set_yticks([-1,0,1])plt.show() csvæ•°æ®æ˜¾ç¤ºä¾‹å­ 12345678910111213141516171819202122232425262728import matplotlibimport csvimport matplotlib.pyplot as plt# import pandas_profilingmatplotlib.use(&#x27;TkAgg&#x27;)# print (matplotlib.get_backend())datafile = open(&quot;./data.csv&quot;)dataread = csv.reader(datafile)datalist = list(dataread)dataline = len(datalist)datarow = len(datalist[0])x = list()y = list()z = list()for i in range(0,dataline): x.append(float(datalist[i][0])) y.append(float(datalist[i][1])) z.append(float(datalist[i][2]))# squares = [1, 4, 9, 16, 25]# x = [1,3,4,5,6]# å®ƒæ˜¯ç”¨æ¥åˆ›å»º æ€»ç”»å¸ƒ/figureâ€œçª—å£â€çš„ï¼Œæœ‰figureå°±å¯ä»¥åœ¨ä¸Šè¾¹ï¼ˆæˆ–å…¶ä¸­ä¸€ä¸ªå­ç½‘æ ¼/subplotä¸Šï¼‰ä½œå›¾äº†ï¼Œï¼ˆfigï¼šæ˜¯figureçš„ç¼©å†™ï¼‰fig,ax = plt.subplots()ax.plot(x,y,&#x27;r.-&#x27;)ax.plot(x,z,&#x27;b.-&#x27;)plt.show()","categories":[{"name":"python","slug":"python","permalink":"http://example.com/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://example.com/tags/python/"}]},{"title":"pythonæ–‡ä»¶","slug":"python/file","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:36:32.153Z","comments":true,"path":"2024/12/26/python/file/","permalink":"http://example.com/2024/12/26/python/file/","excerpt":"","text":"æ–‡ä»¶æ“ä½œ123with open(fileName,&#x27;wb&#x27;) as f: for chunk in resp.iter_content(128): f.write(chunk) ç›¸å…³å‚æ•°ï¼š r ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ rb ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºåªè¯»ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ r+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚ rb+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚ w æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ wb ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ w+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ wb+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ a æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚ ab ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚ a+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚æ–‡ä»¶æ‰“å¼€æ—¶ä¼šæ˜¯è¿½åŠ æ¨¡å¼ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚ ab+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚ fileå¯¹è±¡çš„å±æ€§ file.read([size]) å°†æ–‡ä»¶æ•°æ®ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ï¼Œå¯é€‰å‚æ•°sizeæ§åˆ¶è¯»å–çš„å­—èŠ‚æ•° file.readlines([size]) è¿”å›æ–‡ä»¶ä¸­è¡Œå†…å®¹çš„åˆ—è¡¨ï¼Œsizeå‚æ•°å¯é€‰ file.write(str) å°†å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ file.writelines(strings) å°†å­—ç¬¦ä¸²åºåˆ—å†™å…¥æ–‡ä»¶ file.close() å…³é—­æ–‡ä»¶ file.closed è¡¨ç¤ºæ–‡ä»¶å·²ç»è¢«å…³é—­ï¼Œå¦åˆ™ä¸ºFalse file.mode Accessæ–‡ä»¶æ‰“å¼€æ—¶ä½¿ç”¨çš„è®¿é—®æ¨¡å¼ file.encoding æ–‡ä»¶æ‰€ä½¿ç”¨çš„ç¼–ç  file.name æ–‡ä»¶å file.newlines æœªè¯»å–åˆ°è¡Œåˆ†éš”ç¬¦æ—¶ä¸ºNoneï¼Œåªæœ‰ä¸€ç§è¡Œåˆ†éš”ç¬¦æ—¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“æ–‡ä»¶æœ‰å¤šç§ç±»å‹çš„è¡Œç»“æŸç¬¦æ—¶ï¼Œåˆ™ä¸ºä¸€ä¸ªåŒ…å«æ‰€æœ‰å½“å‰æ‰€é‡åˆ°çš„è¡Œç»“æŸçš„åˆ—è¡¨ file.softspace ä¸º0è¡¨ç¤ºåœ¨è¾“å‡ºä¸€æ•°æ®åï¼Œè¦åŠ ä¸Šä¸€ä¸ªç©ºæ ¼ç¬¦ï¼Œ1è¡¨ç¤ºä¸åŠ ã€‚è¿™ä¸ªå±æ€§ä¸€èˆ¬ç¨‹åºå‘˜ç”¨ä¸ç€ï¼Œç”±ç¨‹åºå†…éƒ¨ä½¿ç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950onelogosize = 500*375*2+24f=open (&quot;SOURCE00.bf5&quot;,&quot;rb&quot;)head = f.read(16)logo1 = f.read(onelogosize)logo2 = f.read(onelogosize)logo3 = f.read(onelogosize)logo4 = f.read(onelogosize)logo5 = f.read(onelogosize)logo6 = f.read(onelogosize)logo7 = f.read(onelogosize)f.closenum = bytearray(head)print(num)print(&quot;åŸèµ„æºæ–‡ä»¶æœ‰%sä¸ªlogo&quot;%num[6])# arr[6] = arr[6]+1print(&quot;logo1 = %.18s&quot;%(logo1))print(&quot;logo2 = %.18s&quot;%(logo2))print(&quot;logo3 = %.18s&quot;%(logo3))print(&quot;logo4 = %.18s&quot;%(logo4))print(&quot;logo5 = %.18s&quot;%(logo5))print(&quot;logo6 = %.18s&quot;%(logo6))print(&quot;logo7 = %.18s&quot;%(logo7))# å¤´éƒ¨é•¿åº¦headsize = 72# #logoè¯»å– å†…å®¹375K# #æ–¹æ³•1ï¼šå–ä¸Šä¸‹ç¿»è½¬ çº¢è“å¯¹æ¢çš„bmpæ–‡ä»¶# #æ–¹æ³•2ï¼šå–åŸå›¾è½¬æ¢åçš„dtaæ–‡ä»¶bmp=open (&quot;LOGO-2021.12.06_1.bmp&quot;,&quot;rb&quot;)bmp.seek(headsize)bmparr = bmp.read(onelogosize)# logosize = bmp.tell()bmp.close# print(bmparr)print(&quot;è¯»å–logo&quot;)# #å†™å…¥æ–°æ–‡ä»¶nf=open(&quot;SOURCE00_new.bf5&quot;,&quot;wb+&quot;)nf.write(head+logo1+logo2+logo3+logo5+logo6+logo7)nf.write(b&quot;\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00&quot;)logoname = b&quot;FALCON\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00&quot;nf.write(logoname)nf.write(bmparr)size = nf.tell()nf.closeprint(&quot;åˆ›å»ºæ–°çš„BF5èµ„æºæ–‡ä»¶,å¤§å° = %så­—èŠ‚&quot;%size) head logo1 bytes(0) logo2 bytes(0) logo3 â€¦ 16 375016 8 375016 8 375016 â€¦ logoname logodata 375000 16","categories":[{"name":"python","slug":"python","permalink":"http://example.com/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://example.com/tags/python/"}]},{"title":"python html","slug":"python/headers","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:37:10.192Z","comments":true,"path":"2024/12/26/python/headers/","permalink":"http://example.com/2024/12/26/python/headers/","excerpt":"","text":"HTML headersæµè§ˆå™¨æŸ¥çœ‹HTTP headers 1ã€æ‰“å¼€æµè§ˆå™¨ï¼ŒF12æ‰“å¼€æ§åˆ¶å°2ã€è¾“å…¥è®¿é—®URL3ã€ç‚¹å‡»Network ç‚¹å‡»è¯·æ±‚ ç‚¹å‡»Headers HTTP header å¸¸ç”¨å±æ€§(1) Hostï¼šè¯·æ±‚æŠ¥å¤´åŸŸä¸»è¦ç”¨äºæŒ‡å®šè¢«è¯·æ±‚èµ„æºçš„Internetä¸»æœºå’Œç«¯å£å·ï¼Œå®ƒé€šå¸¸ä»HTTP URLä¸­æå–å‡ºæ¥çš„ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼šhttps://www.baidu.comï¼Œæµè§ˆå™¨å‘é€çš„è¯·æ±‚æ¶ˆæ¯ä¸­ï¼Œå°±ä¼šåŒ…å«Hostè¯·æ±‚æŠ¥å¤´åŸŸï¼Œå¦‚ä¸‹ï¼š Hostï¼šwww.baidu.com(æ­¤å¤„ä½¿ç”¨ç¼ºçœç«¯å£å·443ï¼Œè‹¥æŒ‡å®šäº†ç«¯å£å·ï¼Œåˆ™å˜æˆï¼šHostï¼šæŒ‡å®šç«¯å£å· (2)Refererå½“æµè§ˆå™¨å‘webæœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸ŠRefererï¼Œå‘Šè¯‰æœåŠ¡å™¨è¯¥è¯·æ±‚æ˜¯ä»å“ªä¸ªé¡µé¢é“¾æ¥è¿‡æ¥çš„ï¼ŒæœåŠ¡å™¨å€Ÿæ­¤å¯ä»¥è·å¾—ä¸€äº›ä¿¡æ¯ç”¨äºå¤„ç†ã€‚æ¯”å¦‚ä»æˆ‘ä¸»é¡µä¸Šé“¾æ¥åˆ°ä¸€ä¸ªæœ‹å‹é‚£é‡Œï¼Œä»–çš„æœåŠ¡å™¨å°±èƒ½å¤Ÿä»HTTP Refererä¸­ç»Ÿè®¡å‡ºæ¯å¤©æœ‰å¤šå°‘ç”¨æˆ·ç‚¹å‡»æˆ‘ä¸»é¡µä¸Šçš„é“¾æ¥è®¿é—®ä»–çš„ç½‘ç«™ã€‚ (3)User-Agentè¿™ä¸ªå¯¹äºçˆ¬è™«æ¯”è¾ƒé‡è¦ å› ä¸ºä¸€ç­éƒ½éœ€è¦æ·»åŠ è¯¥å±æ€§ï¼Œå¦åˆ™ç¨å¾®å¤„ç†è¿‡çš„ç½‘ç«™ï¼Œéƒ½æ— æ³•çˆ¬å–ã€‚ å‘Šè¯‰HTTPæœåŠ¡å™¨ï¼Œ å®¢æˆ·ç«¯ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿå’Œæµè§ˆå™¨çš„åç§°å’Œç‰ˆæœ¬ã€‚ æˆ‘ä»¬ä¸Šç½‘ç™»é™†è®ºå›çš„æ—¶å€™ï¼Œå¾€å¾€ä¼šçœ‹åˆ°ä¸€äº›æ¬¢è¿ä¿¡æ¯ï¼Œå…¶ä¸­åˆ—å‡ºäº†ä½ çš„æ“ä½œç³»ç»Ÿçš„åç§°å’Œç‰ˆæœ¬ï¼Œè¿™å¾€å¾€è®©å¾ˆå¤šäººæ„Ÿåˆ°å¾ˆç¥å¥‡ï¼Œå®é™…ä¸Šï¼ŒæœåŠ¡å™¨åº”ç”¨ç¨‹åºå°±æ˜¯ä»User-Agentè¿™ä¸ªè¯·æ±‚æŠ¥å¤´åŸŸä¸­è·å–åˆ°è¿™äº›ä¿¡æ¯ã€‚User-Agentè¯·æ±‚æŠ¥å¤´åŸŸå…è®¸å®¢æˆ·ç«¯å°†å®ƒçš„æ“ä½œç³»ç»Ÿã€æµè§ˆå™¨å’Œå…¶å®ƒå±æ€§å‘Šè¯‰æœåŠ¡å™¨ã€‚ ä¾‹å¦‚ï¼š User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; CIBA; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; InfoPath.2; .NET4.0E) åº”ç”¨ç¨‹åºç‰ˆæœ¬â€œMozilla/4.0â€è¡¨baiç¤ºï¼šä½ ä½¿ç”¨Maxthon 2.0 æµè§ˆduå™¨ä½¿ç”¨ IE8 å†…æ ¸ï¼› ç‰ˆæœ¬æ ‡è¯†â€œzhiMSIE 8.0â€ å¹³å°è‡ªèº«çš„daoè¯†åˆ«ä¿¡æ¯â€œWindows NT 5.1â€è¡¨ç¤ºâ€œæ“ä½œç³»ç»Ÿä¸ºzhuan Windows XPâ€ Tridentå†…æ ¸ç‰ˆæœ¬â€œTrident/4.0â€ï¼Œæµè§ˆå™¨çš„ä¸€ç§å†…æ ¸ï¼Œè¿˜æœ‰ä¸€ç§å°±æ˜¯WebKitå†…æ ¸ ï¼ˆ4ï¼‰Content-typeè¡¨ç¤ºåé¢çš„æ–‡æ¡£å±äºä»€ä¹ˆMIMEç±»å‹ã€‚Servleté»˜è®¤ä¸ºtext/plainï¼Œä½†é€šå¸¸éœ€è¦æ˜¾å¼åœ°æŒ‡å®šä¸ºtext/htmlã€‚ç”±äºç»å¸¸è¦è®¾ç½®Content-Typeï¼Œå› æ­¤HttpServletResponseæä¾›äº†ä¸€ä¸ªä¸“ç”¨çš„æ–¹æ³•setContentTypeã€‚ å¸¸è§çš„åª’ä½“æ ¼å¼ç±»å‹å¦‚ä¸‹ï¼š text&#x2F;html HTMLæ ¼å¼ text&#x2F;plain çº¯æ–‡æœ¬æ ¼å¼ text&#x2F;xml XMLæ ¼å¼ image&#x2F;gif gifå›¾ç‰‡æ ¼å¼ image&#x2F;jpeg jpgå›¾ç‰‡æ ¼å¼ image&#x2F;png pngå›¾ç‰‡æ ¼å¼ ä»¥applicationå¼€å¤´çš„åª’ä½“æ ¼å¼ç±»å‹ï¼š application&#x2F;xhtml+xml XHTMLæ ¼å¼ application&#x2F;xml XMLæ•°æ®æ ¼å¼ application&#x2F;atom+xml Atom XMLèšåˆæ ¼å¼ application&#x2F;json JSONæ•°æ®æ ¼å¼ application&#x2F;pdf pdfæ ¼å¼ application&#x2F;msword Wordæ–‡æ¡£æ ¼å¼ application&#x2F;octet-stream äºŒè¿›åˆ¶æµæ•°æ®ï¼ˆå¦‚å¸¸è§çš„æ–‡ä»¶ä¸‹è½½ï¼‰ application&#x2F;x-www-form-urlencoded ä¸­é»˜è®¤çš„encTypeï¼Œformè¡¨å•æ•°æ®è¢«ç¼–ç ä¸ºkey&#x2F;valueæ ¼å¼å‘é€åˆ°æœåŠ¡å™¨ï¼ˆè¡¨å•é»˜è®¤çš„æäº¤æ•°æ®çš„æ ¼å¼ï¼‰ å¦å¤–ä¸€ç§å¸¸è§çš„åª’ä½“æ ¼å¼æ˜¯ä¸Šä¼ æ–‡ä»¶ä¹‹æ—¶ä½¿ç”¨çš„ï¼š multipart&#x2F;form-data éœ€è¦åœ¨è¡¨å•ä¸­è¿›è¡Œæ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨è¯¥æ ¼å¼ã€‚ ï¼ˆ5ï¼‰Accept-LanguageAccept-Langeuageï¼šæŒ‡å‡ºæµè§ˆå™¨å¯ä»¥æ¥å—çš„è¯­è¨€ç§ç±»ï¼Œå¦‚enæˆ–en-usæŒ‡è‹±è¯­ï¼Œzhæˆ–è€…zh-cnæŒ‡ä¸­æ–‡ï¼Œå½“æœåŠ¡å™¨èƒ½å¤Ÿæä¾›ä¸€ç§ä»¥ä¸Šçš„è¯­è¨€ç‰ˆæœ¬æ—¶è¦ç”¨åˆ°ã€‚ ï¼ˆ6ï¼‰CookieCookieï¼šæµè§ˆå™¨ç”¨è¿™ä¸ªå±æ€§å‘æœåŠ¡å™¨å‘é€Cookieã€‚Cookieæ˜¯åœ¨æµè§ˆå™¨ä¸­å¯„å­˜çš„å°å‹æ•°æ®ä½“ï¼Œå®ƒå¯ä»¥è®°è½½å’ŒæœåŠ¡å™¨ç›¸å…³çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ä¼šè¯åŠŸèƒ½ã€‚ é˜²åçˆ¬ user-agent å¿…é¡» referer é˜²ç›—é“¾ï¼Œçœ‹ç½‘ç«™æœºåˆ¶ cookie ç”¨æˆ·ç™»é™†æ•°æ® å…¶ä»– çœ‹å…·ä½“å›å¤ 123456789101112headers = &#123;&#x27;accept&#x27;:&#x27;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#x27;,&#x27;cookie&#x27;: &#x27;_ntes_nnid=34d30980bda87343a01de676455caf23,1631167819959; _ntes_nuid=34d30980bda87343a01de676455caf23; UM_distinctid=17c0c4d974ac0-0ba38bbbaac2f6-5d462912-1fa400-17c0c4d9751fb; _iuqxldmzr_=32; NMTID=00Om6TxDNkNyCDUr0gNqt6nB6FaFhkAAAF87eurOQ; WNMCID=psyebj.1636079184756.01.0; WEVNSM=1.0.0; WM_TID=VMJqpPoVcjlBAQAFRFJutLnIBScu5%2FUN; WM_NI=rJ2Na1%2FOiVw4gOtZ9mXjaTEzi%2FWy2Z58sYTJb2RnIhKorYLEsi%2BIwQFZmj9yWrsA5RhEnkhGUrpreF4SKlgVT8K1LjzaQZ53Fg7zksmX3DBX2%2BlB5ySte0Ih9CsZiUfWWlk%3D; WM_NIKE=9ca17ae2e6ffcda170e2e6eeb5b841f388a6aab67caba88ea2d85b929e9abbf87ca3e9b6b6b6469a98a7aaf52af0fea7c3b92ab296feafe43bed91a7b7f640a591bcbbbc679cb6afb5c872abf1999ab152f7e8bdbad742a2ee9e8fcc6489b1bebacf4fb1b7e5aaf65b8686a38bbc7395aebda2b85aac9ba28ceb4d97aec093e84ef88d858de65e98e885d2cf62babf9fbbb83986b9f99bea79af88fda5c154f2f5a4a3b87391acabd1cc64fb9dbdbbec5fa689998dea37e2a3; JSESSIONID-WYYY=bs0%5CC%5Cv7UnBn8U6MnZGPeKf4v0m40UEWk4bb1k9%5CwCqBgmhc6ckHWvuaxxNy7wDjGpdg6Vx7TK9XbWVnoToHYNomM3wh44tHcVdDmcUyX5UJzF%5CEhrT38j%5C1%2Bi5OI1Q%5Ct6xxn%5CWO9DRUnh6tATDSp9UM%5Cxq65%5CljyyewOwXaZ9F2Zhw0%3A1636341503070&#x27;,&#x27;referer&#x27;: &#x27;https://music.163.com/&#x27;,&#x27;sec-fetch-dest&#x27;: &#x27;document&#x27;,&#x27;sec-fetch-mode&#x27;: &#x27;navigate&#x27;,&#x27;sec-fetch-site&#x27;: &#x27;none&#x27;,&#x27;sec-fetch-user&#x27;: &#x27;?1&#x27;,&#x27;upgrade-insecure-requests&#x27;: &#x27;1&#x27;,&#x27;user-agent&#x27;:&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.97 Safari/537.36&#x27;,&#125;","categories":[{"name":"python","slug":"python","permalink":"http://example.com/categories/python/"},{"name":"çˆ¬è™«","slug":"python/çˆ¬è™«","permalink":"http://example.com/categories/python/%E7%88%AC%E8%99%AB/"}],"tags":[{"name":"python","slug":"python","permalink":"http://example.com/tags/python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://example.com/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"pyqt5","slug":"python/pyqt5","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:38:36.948Z","comments":true,"path":"2024/12/26/python/pyqt5/","permalink":"http://example.com/2024/12/26/python/pyqt5/","excerpt":"","text":"pyqt5UIç”Ÿæˆå‘½ä»¤ 1pyuic5.exe .\\untitled.ui -o data_analysis.py èµ„æºæ–‡ä»¶qrcæ–‡ä»¶æ ¼å¼ 12345678&lt;RCC&gt; &lt;qresource prefix=&quot;/&quot;&gt; &lt;file&gt;main.qml&lt;/file&gt; &lt;file&gt;BasicComponentDemo.qml&lt;/file&gt; &lt;file&gt;BasicInputComponent.qml&lt;/file&gt; &lt;file&gt;CustomComponentDemo.qml&lt;/file&gt; &lt;/qresource&gt;&lt;/RCC&gt; å‘½ä»¤ 1pyrcc5 -o src.py src.qrc å¼•ç”¨ 12#è·¯å¾„ä¸ºï¼šå†’å·+prefixè·¯å¾„å‰ç¼€+fileç›¸å¯¹è·¯å¾„ QPixmap(&quot;:/imgA.jpg&quot;) ä½¿ç”¨ä¾‹å­123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174from PyQt5 import QtCore, QtGui, QtWidgetsfrom PyQt5.QtWidgets import QLabel, QMessageBox,QFileDialogfrom PyQt5.QtGui import QIconfrom PyQt5.QtCore import QTimer# from mainui import Ui_MainWindowfrom mainui import Ui_MainWindowimport sysimport jpgfuncfrom PIL import Imageimport osimport jpgfuncclass MainWindow(QtWidgets.QMainWindow, Ui_MainWindow): def __init__(self, parent=None): super(MainWindow, self).__init__(parent) self.setupUi(self) # è®¾ç½®åº”ç”¨ç¨‹åºçš„çª—å£å›¾æ ‡ self.setWindowIcon(QIcon(&quot;:/apple.ico&quot;)) self.setFixedSize(self.width(),self.height()) self.setWindowTitle(&quot;å›¾ç‰‡ç®€æ˜“å¤„ç†å°å·¥å…· ä½œè€…ï¼šgx&quot;) # self.setWindowFlags(QtCore.Qt.WindowMinimizeButtonHint) self.label.setText(&quot;&quot;) # self.setStyleSheet(&quot;#MainWindow&#123;background-color:lightblue&#125;&quot;) self.setStyleSheet(&quot;#MainWindow&#123;border-image:url(:/back.jpg)&#125;&quot;) # self.layout = QtWidgets.QWidget() # self.layout.setStyleSheet(&#x27;&#x27;&#x27;QWidget&#123;background-color:rgb(245, 245, 245);&#125;&#x27;&#x27;&#x27;) self.statusBar.showMessage(&quot;å›¾ç‰‡ç®€æ˜“å¤„ç†å°å·¥å…·,ä¸“é—¨ä¸ºåŠå…¬å®¤ç”µè„‘å°ç™½è®¾è®¡ï¼Œæ»¡è¶³åŸºæœ¬å›¾ç‰‡å¤„ç†éœ€æ±‚&quot;) self.comboBox.addItem(&quot;æ°´å¹³&quot;) self.comboBox.addItem(&quot;å‚ç›´&quot;) self.pushButton.clicked.connect(self.selectfile) self.pushButton_2.clicked.connect(self.ConvertImage) self.radioButton.clicked.connect(self.func1) self.radioButton_2.clicked.connect(self.func2) self.radioButton_3.clicked.connect(self.func3) self.radioButton_4.clicked.connect(self.func4) self.radioButton_5.clicked.connect(self.func5) self.radioButton_6.clicked.connect(self.func6) self.radioButton_7.clicked.connect(self.func7) self.radioButton_8.clicked.connect(self.func8) self.radioButton_9.clicked.connect(self.func9) self.horizontalSlider.valueChanged.connect(self.sliderchange) self.horizontalSlider_2.valueChanged.connect(self.sliderchange) self.horizontalSlider_3.valueChanged.connect(self.sliderchange) self.horizontalSlider_4.valueChanged.connect(self.sliderchange) def sliderchange(self): R = self.horizontalSlider.value() G = self.horizontalSlider_2.value() B = self.horizontalSlider_3.value() self.label_12.setStyleSheet(&quot;background-color:rgb(&#123;&#125;, &#123;&#125;, &#123;&#125;)&quot;.format(R,G,B)) # self.statusBar.hide() def alldisable(self): self.groupBox_2.setEnabled(0) self.groupBox_3.setEnabled(0) def func1(self): if self.radioButton.isChecked(): # self.statusBar.show() self.statusBar.showMessage(&quot;å‰ªè£&quot;) self.alldisable() def func2(self): if self.radioButton_2.isChecked(): self.groupBox_2.setEnabled(1) self.textEdit_20.setEnabled(1) self.statusBar.showMessage(&quot;æ ¼å¼&quot;) def func3(self): if self.radioButton_3.isChecked(): self.statusBar.showMessage(&quot;å°ºå¯¸&quot;) def func4(self): if self.radioButton_4.isChecked(): self.statusBar.showMessage(&quot;å‹ç¼©&quot;) def func5(self): if self.radioButton_5.isChecked(): self.statusBar.showMessage(&quot;æ—‹è½¬&quot;) def func6(self): if self.radioButton_6.isChecked(): self.statusBar.showMessage(&quot;é•œåƒ&quot;) def func7(self): if self.radioButton_7.isChecked(): self.statusBar.showMessage(&quot;æ‰‹ç»˜&quot;) def func8(self): if self.radioButton_8.isChecked(): self.statusBar.showMessage(&quot;æ¨¡ç³Š&quot;) def func9(self): if self.radioButton_9.isChecked(): self.statusBar.showMessage(&quot;é»‘ç™½&quot;) def selectfile(self): print(&quot;button 1 clicked&quot;) selectfilename = QFileDialog.getOpenFileName() self.filename = selectfilename[0] self.textEdit.setText(self.filename) im = Image.open(self.filename) info = &quot;å›¾ç‰‡ä¿¡æ¯ï¼š&quot; info+=&quot; å°ºå¯¸ï¼š&quot;+str(im.width)+&quot;x&quot;+str(im.height) info+=&quot; æ ¼å¼ï¼š&quot;+im.mode info+=&quot; å¤§å°ï¼š&quot;+str(os.path.getsize(self.filename))+&quot;B&quot; self.label.setText(info) def ConvertImage(self): print(&quot;button 2 clicked&quot;) if self.radioButton.isChecked(): self.statusBar.showMessage(&quot;å‰ªè£è½¬æ¢å¼€å§‹&quot;) x = self.textEdit_6.toPlainText() x = int(x) y = self.textEdit_7.toPlainText() y = int(y) w = self.textEdit_13.toPlainText() w = int(w) h = self.textEdit_14.toPlainText() h = int(h) jpgfunc.Cut(self.filename,x,y,w,h) if self.radioButton_2.isChecked(): self.statusBar.showMessage(&quot;æ ¼å¼è½¬æ¢å¼€å§‹&quot;) format = self.textEdit_18.toPlainText() jpgfunc.Format(self.filename,format) if self.radioButton_3.isChecked(): self.statusBar.showMessage(&quot;å°ºå¯¸è½¬æ¢å¼€å§‹&quot;) x = self.textEdit_16.toPlainText() x = int(x) y = self.textEdit_17.toPlainText() y = int(y) jpgfunc.Resize(self.filename,x,y) if self.radioButton_4.isChecked(): self.statusBar.showMessage(&quot;å‹ç¼©è½¬æ¢å¼€å§‹&quot;) mb = self.textEdit_4.toPlainText() mb = int(mb) step = self.textEdit_15.toPlainText() step = int(step) quality = self.textEdit_5.toPlainText() quality = int(quality) jpgfunc.Compress(self.filename,mb,step,quality) if self.radioButton_5.isChecked(): self.statusBar.showMessage(&quot;æ—‹è½¬è½¬æ¢å¼€å§‹&quot;) angle = self.textEdit_20.toPlainText() angle = int(angle) jpgfunc.Rotate(self.filename,angle) if self.radioButton_6.isChecked(): self.statusBar.showMessage(&quot;é•œåƒè½¬æ¢å¼€å§‹&quot;) select = self.comboBox.currentIndex() select = int(select) jpgfunc.Transpose(self.filename,select) if self.radioButton_7.isChecked(): self.statusBar.showMessage(&quot;æ‰‹ç»˜è½¬æ¢å¼€å§‹&quot;) jpgfunc.Draw(self.filename) if self.radioButton_8.isChecked(): self.statusBar.showMessage(&quot;æ¨¡ç³Šè½¬æ¢å¼€å§‹&quot;) cnt = self.textEdit_23.toPlainText() cnt = int(cnt) jpgfunc.Dim(self.filename,cnt) if self.radioButton_9.isChecked(): self.statusBar.showMessage(&quot;é»‘ç™½è½¬æ¢å¼€å§‹&quot;) jpgfunc.Covert(self.filename) self.statusBar.showMessage(&quot;å¤„ç†å®Œæ¯•&quot;)if __name__ == &quot;__main__&quot;: app = QtWidgets.QApplication(sys.argv) mainWindow = MainWindow() mainWindow.show() sys.exit(app.exec_())","categories":[{"name":"python","slug":"python","permalink":"http://example.com/categories/python/"},{"name":"qt","slug":"python/qt","permalink":"http://example.com/categories/python/qt/"}],"tags":[{"name":"python","slug":"python","permalink":"http://example.com/tags/python/"},{"name":"qt","slug":"qt","permalink":"http://example.com/tags/qt/"}]},{"title":"requirements.txt","slug":"python/requirements","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:37:59.313Z","comments":true,"path":"2024/12/26/python/requirements/","permalink":"http://example.com/2024/12/26/python/requirements/","excerpt":"","text":"requirements.txtå®‰è£…pipreqs12pip install pipreqspipreqs ./ --encoding utf-8 é€šè¿‡requirements.txtå®‰è£…1pip install -r requirements.txt ç»„ä»¶ä¸‹è½½æŒ‡å®šé•œåƒ 1pip install scripy -i https://pypi.tuna.tsinghua.edu.cn/simple â€“userå®‰è£…åœ¨åœ¨ç”¨æˆ·ç³»ç»Ÿç›®å½•ä¸‹ ä¸€èˆ¬ä¸ç”¨ ä¿®æ”¹ä¸‹è½½æºuserè·¯å¾„ä¸‹æ–°å»ºpip&#x2F;pip.ini,æ·»åŠ å†…å®¹ 12345[global]index-url=http://mirrors.aliyun.com/pypi/simple/[install]trusted-host=mirrors.aliyun.com è™šæ‹Ÿç©ºé—´12345678pip install virtualenvvirtualenv venvvenv/Scripts/activate (For Linux)venv/Scripts/activate.bat (For Windows)# windowsæ— æ³•å¼€å¯è™šæ‹Ÿç©ºé—´ï¼Œéœ€ç®¡ç†å‘˜è¿›å…¥shellSet-ExecutionPolicy -ExecutionPolicy UNRESTRICTED å¿«é€Ÿå¸è½½æ‰€æœ‰åŒ…12pip freeze &gt; python_modules.txt #è·å–æ‰€æœ‰åŒ…pip uninstall -r python_modules.txt -y #å¸è½½ï¼ŒYç¡®è®¤ DAPLink developåˆ†æ”¯ GCC1234(venv) &gt; pip install -r requirements.txt(venv) &gt; pip uninstall -y project-generator(venv) &gt; pip install --upgrade --user git+https://github.com/mbrossard/project_generator.git@development(venv) &gt; python tools\\progen_compile.py --clean -v stm32f103xb_if","categories":[{"name":"python","slug":"python","permalink":"http://example.com/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://example.com/tags/python/"}]},{"title":"æ­£åˆ™è¡¨è¾¾å¼","slug":"python/æ­£åˆ™è¡¨è¾¾å¼","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:02:38.275Z","comments":true,"path":"2024/12/26/python/æ­£åˆ™è¡¨è¾¾å¼/","permalink":"http://example.com/2024/12/26/python/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","excerpt":"","text":"æ­£åˆ™è¡¨è¾¾å¼ä¸€ã€re.findallå‡½æ•°ä»‹ç»å®ƒåœ¨re.pyä¸­æœ‰å®šä¹‰ï¼š 12345678910def findall(pattern, string, flags=0): &quot;&quot;&quot;Return a list of all non-overlapping matches in the string. If one or more capturing groups are present in the pattern, return a list of groups; this will be a list of tuples if the pattern has more than one group. Empty matches are included in the result.&quot;&quot;&quot; return _compile(pattern, flags).findall(string) è¿”å›stringä¸­æ‰€æœ‰ä¸patternåŒ¹é…çš„å…¨éƒ¨å­—ç¬¦ä¸²,è¿”å›å½¢å¼ä¸ºæ•°ç»„ã€‚ findall()å‡½æ•°çš„ä¸¤ç§è¡¨ç¤ºå½¢å¼ 123456789import rekk = re.compile(r&#x27;\\d+&#x27;)kk.findall(&#x27;one1two2three3four4&#x27;)#[1,2,3,4] #æ³¨æ„æ­¤å¤„findall()çš„ç”¨æ³•ï¼Œå¯ä¼ ä¸¤ä¸ªå‚æ•°;kk = re.compile(r&#x27;\\d+&#x27;)re.findall(kk,&quot;one123&quot;)#[1,2,3] äºŒã€å®ä¾‹ä»£ç åé¢ä¼šè®²è§£ä»£ç é‡Œçš„å„ä¸ªéƒ¨åˆ†ï¼Œå…ˆåˆ—å‡ºæ¥~ 1234567891011121314151617181920212223242526272829import re str = &#x27;aabbabaabbaa&#x27;# ä¸€ä¸ª&quot;.&quot;å°±æ˜¯åŒ¹é…é™¤ \\n (æ¢è¡Œç¬¦)ä»¥å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦print(re.findall(r&#x27;a.b&#x27;,str))#[&#x27;aab&#x27;, &#x27;aab&#x27;]# *å‰é¢çš„å­—ç¬¦å‡ºç°0æ¬¡æˆ–ä»¥ä¸Šprint(re.findall(r&#x27;a*b&#x27;,str))#[&#x27;aab&#x27;, &#x27;b&#x27;, &#x27;ab&#x27;, &#x27;aab&#x27;, &#x27;b&#x27;]# è´ªå©ªï¼ŒåŒ¹é…ä».*å‰é¢ä¸ºå¼€å§‹åˆ°åé¢ä¸ºç»“æŸçš„æ‰€æœ‰å†…å®¹print(re.findall(r&#x27;a.*b&#x27;,str))#[&#x27;aabbabaabb&#x27;]# éè´ªå©ªï¼Œé‡åˆ°å¼€å§‹å’Œç»“æŸå°±è¿›è¡Œæˆªå–ï¼Œå› æ­¤æˆªå–å¤šæ¬¡ç¬¦åˆçš„ç»“æœï¼Œä¸­é—´æ²¡æœ‰å­—ç¬¦ä¹Ÿä¼šè¢«æˆªå–print(re.findall(r&#x27;a.*?b&#x27;,str))#[&#x27;aab&#x27;, &#x27;ab&#x27;, &#x27;aab&#x27;]# éè´ªå©ªï¼Œä¸ä¸Šé¢ä¸€æ ·ï¼Œåªæ˜¯ä¸ä¸Šé¢çš„ç›¸æ¯”å¤šäº†ä¸€ä¸ªæ‹¬å·ï¼Œåªä¿ç•™æ‹¬å·çš„å†…å®¹print(re.findall(r&#x27;a(.*?)b&#x27;,str))#[&#x27;a&#x27;, &#x27;&#x27;, &#x27;a&#x27;] str = &#x27;&#x27;&#x27;aabbab aabbaa bb&#x27;&#x27;&#x27; #åé¢å¤šåŠ äº†2ä¸ªb# æ²¡æœ‰æŠŠæœ€åä¸€ä¸ªæ¢è¡Œçš„aabç®—è¿›æ¥print(re.findall(r&#x27;a.*?b&#x27;,str))#[&#x27;aab&#x27;, &#x27;ab&#x27;, &#x27;aab&#x27;]# re.Sä¸ä¼šå¯¹\\nè¿›è¡Œä¸­æ–­print(re.findall(r&#x27;a.*?b&#x27;,str,re.S))#[&#x27;aab&#x27;, &#x27;ab&#x27;, &#x27;aab&#x27;, &#x27;aa\\n b&#x27;] ä¸‰ã€re.findallä¸­æ­£åˆ™è¡¨è¾¾å¼(.*?)å­—ç¬¦ä¸²æ˜¯ 1str = &#x27;aabbabaabbaa&#x27; ç¬¦å· . å°± æ˜¯åŒ¹é…é™¤ \\n (æ¢è¡Œç¬¦)ä»¥å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦12print(re.findall(r&#x27;a.b&#x27;,str))#[&#x27;aab&#x27;, &#x27;aab&#x27;] 2.ç¬¦å· * å‰é¢çš„å­—ç¬¦å‡ºç°0æ¬¡æˆ–ä»¥ä¸Š12print(re.findall(r&#x27;a*b&#x27;,str))#[&#x27;aab&#x27;, &#x27;b&#x27;, &#x27;ab&#x27;, &#x27;aab&#x27;, &#x27;b&#x27;] 3.ç¬¦å·.* è´ªå©ªï¼ŒåŒ¹é…ä».*å‰é¢ä¸ºå¼€å§‹åˆ°åé¢ä¸ºç»“æŸçš„æ‰€æœ‰å†…å®¹12print(re.findall(r&#x27;a.*b&#x27;,str))#[&#x27;aabbabaabb&#x27;] 4.ç¬¦å·.*? éè´ªå©ªï¼Œé‡åˆ°å¼€å§‹å’Œç»“æŸå°±è¿›è¡Œæˆªå–ï¼Œå› æ­¤æˆªå–å¤šæ¬¡ç¬¦åˆçš„ç»“æœï¼Œä¸­é—´æ²¡æœ‰å­—ç¬¦ä¹Ÿä¼šè¢«æˆªå–12print(re.findall(r&#x27;a.*?b&#x27;,str))#[&#x27;aab&#x27;, &#x27;ab&#x27;, &#x27;aab&#x27;] 5.ç¬¦å·(.*?) éè´ªå©ªï¼Œä¸ä¸Šé¢ä¸€æ ·ï¼Œåªæ˜¯ä¸ä¸Šé¢çš„ç›¸æ¯”å¤šäº†ä¸€ä¸ªæ‹¬å·ï¼Œåªä¿ç•™æ‹¬å·çš„å†…å®¹12print(re.findall(r&#x27;a(.*?)b&#x27;,str))#[&#x27;a&#x27;, &#x27;&#x27;, &#x27;a&#x27;] å…³äºå¸¦æ‹¬å·ä¸ä¸å¸¦æ‹¬å·çš„åŒºåˆ«12345678910111213141516import restring=&quot;abcdefg acbdgef abcdgfe cadbgfe&quot;#ä¸å¸¦æ‹¬å·regex=re.compile(&quot;((\\w+)\\s+\\w+)&quot;)print(regex.findall(string))#è¾“å‡ºï¼š[(&#x27;abcdefg acbdgef&#x27;, &#x27;abcdefg&#x27;), (&#x27;abcdgfe cadbgfe&#x27;, &#x27;abcdgfe&#x27;)]regex1=re.compile(&quot;(\\w+)\\s+\\w+&quot;)print(regex1.findall(string))#è¾“å‡ºï¼š[&#x27;abcdefg&#x27;, &#x27;abcdgfe&#x27;]regex2=re.compile(&quot;\\w+\\s+\\w+&quot;)print(regex2.findall(string))#è¾“å‡ºï¼š[&#x27;abcdefg acbdgef&#x27;, &#x27;abcdgfe cadbgfe&#x27;] ç¬¬ä¸€ä¸ª regex ä¸­å¸¦æœ‰2ä¸ªæ‹¬å·ï¼Œå…¶è¾“å‡ºlist ä¸­åŒ…å«2ä¸ª tuple ç¬¬äºŒä¸ª regex ä¸­å¸¦æœ‰1ä¸ªæ‹¬å·ï¼Œå…¶è¾“å‡ºå†…å®¹æ˜¯æ‹¬å·åŒ¹é…åˆ°çš„å†…å®¹ï¼Œè€Œä¸æ˜¯æ•´ä¸ªè¡¨è¾¾å¼æ‰€åŒ¹é…åˆ°çš„ç»“æœã€‚ ç¬¬ä¸‰ä¸ª regex ä¸­ä¸å¸¦æ‹¬å·,å…¶è¾“å‡ºçš„å†…å®¹å°±æ˜¯æ•´ä¸ªè¡¨è¾¾å¼æ‰€åŒ¹é…åˆ°çš„å†…å®¹ã€‚ å®é™…ä¸Šè¿™å¹¶ä¸æ˜¯pythonç‰¹æœ‰çš„ï¼Œè¿™æ˜¯æ­£åˆ™æ‰€ç‰¹æœ‰çš„ ï¼Œ ä»»ä½•ä¸€é—¨é«˜çº§è¯­è¨€ä½¿ç”¨æ­£åˆ™éƒ½æ»¡è¶³è¿™ä¸ªç‰¹ç‚¹ï¼šæœ‰æ‹¬å·æ—¶åªèƒ½åŒ¹é…åˆ°æ‹¬å·ä¸­çš„å†…å®¹ï¼Œæ²¡æœ‰æ‹¬å·ã€ç›¸å½“äºåœ¨æœ€å¤–å±‚å¢åŠ äº†ä¸€ä¸ªæ‹¬å·ã€‘ã€‚åœ¨æ­£åˆ™é‡Œé¢ â€œ()â€ ä»£è¡¨çš„æ˜¯åˆ†ç»„çš„æ„æ€ï¼Œä¸€ä¸ªæ‹¬å·ä»£è¡¨ä¸€ä¸ªåˆ†ç»„ï¼Œä½ åªèƒ½åŒ¹é…åˆ° â€œ()â€ ä¸­çš„å†…å®¹ã€‚ å››ã€re.findallä¸­å‚æ•°re.Sçš„æ„ä¹‰1.å­—ç¬¦ä¸²å˜ä¸ºï¼ˆåé¢å¤šåŠ äº†2ä¸ªbï¼‰ 123str = &#x27;&#x27;&#x27;aabbab aabbaa bb&#x27;&#x27;&#x27; 2.å‚æ•°æ— re.Sï¼Œæ²¡æœ‰æŠŠæœ€åä¸€ä¸ªæ¢è¡Œçš„aabç®—è¿›æ¥ 12print(re.findall(r&#x27;a.*?b&#x27;,str))#[&#x27;aab&#x27;, &#x27;ab&#x27;, &#x27;aab&#x27;] 3.å‚æ•°æœ‰re.Sï¼Œä¸ä¼šå¯¹\\nè¿›è¡Œä¸­æ–­ 12print(re.findall(r&#x27;a.*?b&#x27;,str,re.S))#[&#x27;aab&#x27;, &#x27;ab&#x27;, &#x27;aab&#x27;, &#x27;aa\\n b&#x27;]","categories":[{"name":"python","slug":"python","permalink":"http://example.com/categories/python/"},{"name":"çˆ¬è™«","slug":"python/çˆ¬è™«","permalink":"http://example.com/categories/python/%E7%88%AC%E8%99%AB/"}],"tags":[{"name":"python","slug":"python","permalink":"http://example.com/tags/python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://example.com/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"Scrapy","slug":"python/scrapy","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:37:34.356Z","comments":true,"path":"2024/12/26/python/scrapy/","permalink":"http://example.com/2024/12/26/python/scrapy/","excerpt":"","text":"scrapy æ–°å»ºé¡¹ç›®1scrapy startproject lianjia æ‰“å¼€ç›®å½•1cd lianjia æ–°å»ºçˆ¬è™«1scrapy genspider fang wh.lianjia.com/ershoufang è¿è¡Œçˆ¬è™« 1scrapy crawl fang å·¥ç¨‹ä¿®æ”¹ settings.pyé…ç½®å‚æ•°ç›¸å…³ 1234//robots.txt è§„åˆ™ ROBOTSTXT_OBEY = False//å»¶æ—¶ DOWNLOAD_DELAY = 0.2 pipelines.pyå­˜å‚¨ç›¸å…³ 12345678910111213141516171819202122from itemadapter import ItemAdapterimport csvimport codecsclass LianjiaPipeline: def process_item(self, item, spider): # self.filename = &#x27;a.csv&#x27; self.filename = str(item[&#x27;local&#x27;]+&#x27;.csv&#x27;) self.file = codecs.open(self.filename, &#x27;a&#x27;, encoding=&#x27;gbk&#x27;)#&#x27;utf_8_sig&#x27; fieldnames = [&#x27;local&#x27;,&#x27;page&#x27;,&#x27;cnt&#x27;,&#x27;title&#x27;, &#x27;html&#x27;,&#x27;flood&#x27;, &#x27;type&#x27;,&#x27;area&#x27;,&#x27;dir&#x27;,&#x27;mode1&#x27;,&#x27;mode2&#x27;,&#x27;mode3&#x27;,&#x27;price&#x27;, &#x27;unit&#x27;]#,&#x27;year&#x27; # fieldnames = [&#x27;title&#x27;, &#x27;flood&#x27;, &#x27;address&#x27;,&#x27;price&#x27;, &#x27;unit&#x27;] w = csv.DictWriter(self.file, fieldnames=fieldnames) w.writerow(item) self.file.close() return item# def __init__(self):# self.file = codecs.open(&#x27;zhuankou.csv&#x27;, &#x27;w&#x27;, encoding=&#x27;gbk&#x27;)#&#x27;utf_8_sig&#x27;# def close_spider(self, spider):# self.file.close() items.pyæ³¨å†Œé¡¹ 12345678910111213141516171819202122232425262728import scrapyclass LianjiaItem(scrapy.Item): # define the fields for your item here like: # name = scrapy.Field() local= scrapy.Field() page = scrapy.Field() cnt =scrapy.Field() title= scrapy.Field() html= scrapy.Field() flood= scrapy.Field() address= scrapy.Field() type= scrapy.Field() area= scrapy.Field() dir= scrapy.Field() mode1= scrapy.Field() mode2= scrapy.Field() # year= scrapy.Field() mode3= scrapy.Field() price= scrapy.Field() unit= scrapy.Field() pass spidersè§£æç›¸å…³ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192import scrapyfrom lianjia.items import LianjiaItemclass FangSpider(scrapy.Spider): name = &#x27;fang&#x27; allowed_domains = [&#x27;wh.lianjia.com&#x27;] start_urls = [&#x27;http://wh.lianjia.com/ershoufang/&#x27;]#+pg1/ getpathall = [] urlnum = 0 &#x27;&#x27;&#x27; #è§£æå…¨éƒ¨åŒºåŸŸ def start_requests(self): self.base = &#x27;http://wh.lianjia.com&#x27; url = &#x27;http://wh.lianjia.com/ershoufang/&#x27; yield scrapy.Request(url=url,callback=self.parse_url) def parse_url(self,response): locals = response.xpath(&#x27;//div[@class=&quot;position&quot;]//div[@data-role=&quot;ershoufang&quot;]//a[@title]/@href&#x27;).extract() # print(locals) self.getpathall.extend(locals) cnt = len(locals) # print(cnt) for list in locals: url = self.base +list # print(url) yield scrapy.Request(url=url,meta=&#123;&#x27;flag&#x27;:cnt&#125;,callback=self.prase_local) # print(list) def prase_local(self,response): self.urlnum+=1 self.area = response.xpath(&#x27;//div[@class=&quot;position&quot;]//div[@data-role=&quot;ershoufang&quot;]//div[2]//a/@href&#x27;).extract() # print(self.area) self.getpathall.extend(self.area) # print(self.urlnum) num = response.meta[&#x27;flag&#x27;] if num == self.urlnum: set(self.getpathall) for list in self.getpathall: url = self.base+list local = list.split(&#x27;/&#x27;)[2] yield scrapy.Request(url=url,meta=&#123;&#x27;local&#x27;:local&#125;,callback=self.parse_list) print(&#x27;è·å–åŒºåŸŸåˆ—è¡¨&#x27;) print(list) &#x27;&#x27;&#x27; def start_requests(self): # def parse_list(self,response): # local = response.meta[&#x27;local&#x27;] total = 100 local = &#x27;guanggudong&#x27; print(&#x27;è§£æåŒºåŸŸ:&#x27;+local) for i in range(1,total): if i &gt; 1: url=&quot;http://wh.lianjia.com/ershoufang/&#123;0&#125;/pg&#123;1&#125;/&quot;.format(local,i) # print(url) else: url = &#x27;http://wh.lianjia.com/ershoufang/&#123;&#125;&#x27;.format(local) yield scrapy.Request(url=url,meta=&#123;&#x27;local&#x27;:local,&#x27;page&#x27;:i&#125;,callback=self.parse) def parse(self, response): item=LianjiaItem() item[&#x27;local&#x27;] = response.meta[&#x27;local&#x27;] item[&#x27;page&#x27;] = response.meta[&#x27;page&#x27;] xpath_parse = response.xpath(&#x27;//div[@class=&quot;info clear&quot;]&#x27;) print(&quot;è·å–ç¬¬&#123;&#125;é¡µ&quot;.format(item[&#x27;page&#x27;])) cnt = 1 for xpath in xpath_parse: item[&#x27;cnt&#x27;] = cnt item[&#x27;title&#x27;] = xpath.xpath(&#x27;.//div[@class=&quot;title&quot;]//a/text()&#x27;).get() # print(item[&#x27;title&#x27;]) item[&#x27;html&#x27;] = xpath.xpath(&#x27;.//div[@class=&quot;title&quot;]//a/@href&#x27;).get() item[&#x27;flood&#x27;] = xpath.xpath(&#x27;.//div[@class=&quot;flood&quot;]//a/text()&#x27;).get() # item[&#x27;address&#x27;] = xpath.xpath(&#x27;.//div[@class=&quot;address&quot;]//div/text()&#x27;).get() strinfo = xpath.xpath(&#x27;.//div[@class=&quot;address&quot;]//div/text()&#x27;).get() list = strinfo.split(&#x27;|&#x27;,5) item[&#x27;type&#x27;] = list[0] item[&#x27;area&#x27;] = list[1] item[&#x27;dir&#x27;] = list[2] item[&#x27;mode1&#x27;] = list[3] item[&#x27;mode2&#x27;] = list[4] item[&#x27;mode3&#x27;] = list[5] item[&#x27;price&#x27;] = xpath.xpath(&#x27;.//div[@class=&quot;totalPrice totalPrice2&quot;]//span//text()&#x27;).get() item[&#x27;price&#x27;] += xpath.xpath(&#x27;.//div[@class=&quot;totalPrice totalPrice2&quot;]//i[2]//text()&#x27;).get() item[&#x27;unit&#x27;] = xpath.xpath(&#x27;.//div[@class=&quot;unitPrice&quot;]//span//text()&#x27;).get() cnt+=1 yield(item) pass","categories":[{"name":"python","slug":"python","permalink":"http://example.com/categories/python/"},{"name":"çˆ¬è™«","slug":"python/çˆ¬è™«","permalink":"http://example.com/categories/python/%E7%88%AC%E8%99%AB/"}],"tags":[{"name":"python","slug":"python","permalink":"http://example.com/tags/python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://example.com/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"CRCæ ¡éªŒ","slug":"stm32/CRC","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-27T02:56:27.107Z","comments":true,"path":"2024/12/26/stm32/CRC/","permalink":"http://example.com/2024/12/26/stm32/CRC/","excerpt":"","text":"CRCå…¨éƒ¨æºç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590uint8_t crc4_itu(uint8_t *data, uint_len length);uint8_t crc5_epc(uint8_t *data, uint_len length);uint8_t crc5_itu(uint8_t *data, uint_len length);uint8_t crc5_usb(uint8_t *data, uint_len length);uint8_t crc6_itu(uint8_t *data, uint_len length);uint8_t crc7_mmc(uint8_t *data, uint_len length);uint8_t crc8(uint8_t *data, uint_len length);uint8_t crc8_itu(uint8_t *data, uint_len length);uint8_t crc8_rohc(uint8_t *data, uint_len length);uint8_t crc8_maxim(uint8_t *data, uint_len length);//DS18B20uint16_t crc16_ibm(uint8_t *data, uint_len length);uint16_t crc16_maxim(uint8_t *data, uint_len length);uint16_t crc16_usb(uint8_t *data, uint_len length);uint16_t crc16_modbus(uint8_t *data, uint_len length);uint16_t crc16_ccitt(uint8_t *data, uint_len length);uint16_t crc16_ccitt_false(uint8_t *data, uint_len length);uint16_t crc16_x25(uint8_t *data, uint_len length);uint16_t crc16_xmodem(uint8_t *data, uint_len length);uint16_t crc16_dnp(uint8_t *data, uint_len length);uint32_t crc32(uint8_t *data, uint_len length);uint32_t crc32_mpeg_2(uint8_t *data, uint_len length);/****************************************************************************** * Name: CRC-4/ITU x4+x+1 * Poly: 0x03 * Init: 0x00 * Refin: True * Refout: True * Xorout: 0x00 * Note: *****************************************************************************/uint8_t crc4_itu(uint8_t *data, uint_len length)&#123; uint8_t i; uint8_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0x0C;// 0x0C = (reverse 0x03)&gt;&gt;(8-4) else crc = (crc &gt;&gt; 1); &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-5/EPC x5+x3+1 * Poly: 0x09 * Init: 0x09 * Refin: False * Refout: False * Xorout: 0x00 * Note: *****************************************************************************/uint8_t crc5_epc(uint8_t *data, uint_len length)&#123; uint8_t i; uint8_t crc = 0x48; // Initial value: 0x48 = 0x09&lt;&lt;(8-5) while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for ( i = 0; i &lt; 8; i++ ) &#123; if ( crc &amp; 0x80 ) crc = (crc &lt;&lt; 1) ^ 0x48; // 0x48 = 0x09&lt;&lt;(8-5) else crc &lt;&lt;= 1; &#125; &#125; return crc &gt;&gt; 3;&#125;/****************************************************************************** * Name: CRC-5/ITU x5+x4+x2+1 * Poly: 0x15 * Init: 0x00 * Refin: True * Refout: True * Xorout: 0x00 * Note: *****************************************************************************/uint8_t crc5_itu(uint8_t *data, uint_len length)&#123; uint8_t i; uint8_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0x15;// 0x15 = (reverse 0x15)&gt;&gt;(8-5) else crc = (crc &gt;&gt; 1); &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-5/USB x5+x2+1 * Poly: 0x05 * Init: 0x1F * Refin: True * Refout: True * Xorout: 0x1F * Note: *****************************************************************************/uint8_t crc5_usb(uint8_t *data, uint_len length)&#123; uint8_t i; uint8_t crc = 0x1F; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0x14;// 0x14 = (reverse 0x05)&gt;&gt;(8-5) else crc = (crc &gt;&gt; 1); &#125; &#125; return crc ^ 0x1F;&#125;/****************************************************************************** * Name: CRC-6/ITU x6+x+1 * Poly: 0x03 * Init: 0x00 * Refin: True * Refout: True * Xorout: 0x00 * Note: *****************************************************************************/uint8_t crc6_itu(uint8_t *data, uint_len length)&#123; uint8_t i; uint8_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0x30;// 0x30 = (reverse 0x03)&gt;&gt;(8-6) else crc = (crc &gt;&gt; 1); &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-7/MMC x7+x3+1 * Poly: 0x09 * Init: 0x00 * Refin: False * Refout: False * Xorout: 0x00 * Use: MultiMediaCard,SD,ect. *****************************************************************************/uint8_t crc7_mmc(uint8_t *data, uint_len length)&#123; uint8_t i; uint8_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for ( i = 0; i &lt; 8; i++ ) &#123; if ( crc &amp; 0x80 ) crc = (crc &lt;&lt; 1) ^ 0x12; // 0x12 = 0x09&lt;&lt;(8-7) else crc &lt;&lt;= 1; &#125; &#125; return crc &gt;&gt; 1;&#125;/****************************************************************************** * Name: CRC-8 x8+x2+x+1 * Poly: 0x07 * Init: 0x00 * Refin: False * Refout: False * Xorout: 0x00 * Note: *****************************************************************************/uint8_t crc8(uint8_t *data, uint_len length)&#123; uint8_t i; uint8_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for ( i = 0; i &lt; 8; i++ ) &#123; if ( crc &amp; 0x80 ) crc = (crc &lt;&lt; 1) ^ 0x07; else crc &lt;&lt;= 1; &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-8/ITU x8+x2+x+1 * Poly: 0x07 * Init: 0x00 * Refin: False * Refout: False * Xorout: 0x55 * Alias: CRC-8/ATM *****************************************************************************/uint8_t crc8_itu(uint8_t *data, uint_len length)&#123; uint8_t i; uint8_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for ( i = 0; i &lt; 8; i++ ) &#123; if ( crc &amp; 0x80 ) crc = (crc &lt;&lt; 1) ^ 0x07; else crc &lt;&lt;= 1; &#125; &#125; return crc ^ 0x55;&#125;/****************************************************************************** * Name: CRC-8/ROHC x8+x2+x+1 * Poly: 0x07 * Init: 0xFF * Refin: True * Refout: True * Xorout: 0x00 * Note: *****************************************************************************/uint8_t crc8_rohc(uint8_t *data, uint_len length)&#123; uint8_t i; uint8_t crc = 0xFF; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0xE0; // 0xE0 = reverse 0x07 else crc = (crc &gt;&gt; 1); &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-8/MAXIM x8+x5+x4+1 * Poly: 0x31 * Init: 0x00 * Refin: True * Refout: True * Xorout: 0x00 * Alias: DOW-CRC,CRC-8/IBUTTON * Use: Maxim(Dallas)&#x27;s some devices,e.g. DS18B20 *****************************************************************************/uint8_t crc8_maxim(uint8_t *data, uint_len length)&#123; uint8_t i; uint8_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; i++) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0x8C; // 0x8C = reverse 0x31 else crc &gt;&gt;= 1; &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-16/IBM x16+x15+x2+1 * Poly: 0x8005 * Init: 0x0000 * Refin: True * Refout: True * Xorout: 0x0000 * Alias: CRC-16,CRC-16/ARC,CRC-16/LHA *****************************************************************************/uint16_t crc16_ibm(uint8_t *data, uint_len length)&#123; uint8_t i; uint16_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0xA001; // 0xA001 = reverse 0x8005 else crc = (crc &gt;&gt; 1); &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-16/MAXIM x16+x15+x2+1 * Poly: 0x8005 * Init: 0x0000 * Refin: True * Refout: True * Xorout: 0xFFFF * Note: *****************************************************************************/uint16_t crc16_maxim(uint8_t *data, uint_len length)&#123; uint8_t i; uint16_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0xA001; // 0xA001 = reverse 0x8005 else crc = (crc &gt;&gt; 1); &#125; &#125; return ~crc; // crc^0xffff&#125;/****************************************************************************** * Name: CRC-16/USB x16+x15+x2+1 * Poly: 0x8005 * Init: 0xFFFF * Refin: True * Refout: True * Xorout: 0xFFFF * Note: *****************************************************************************/uint16_t crc16_usb(uint8_t *data, uint_len length)&#123; uint8_t i; uint16_t crc = 0xffff; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0xA001; // 0xA001 = reverse 0x8005 else crc = (crc &gt;&gt; 1); &#125; &#125; return ~crc; // crc^0xffff&#125;/****************************************************************************** * Name: CRC-16/MODBUS x16+x15+x2+1 * Poly: 0x8005 * Init: 0xFFFF * Refin: True * Refout: True * Xorout: 0x0000 * Note: *****************************************************************************/uint16_t crc16_modbus(uint8_t *data, uint_len length)&#123; uint8_t i; uint16_t crc = 0xffff; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0xA001; // 0xA001 = reverse 0x8005 else crc = (crc &gt;&gt; 1); &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-16/CCITT x16+x12+x5+1 * Poly: 0x1021 * Init: 0x0000 * Refin: True * Refout: True * Xorout: 0x0000 * Alias: CRC-CCITT,CRC-16/CCITT-TRUE,CRC-16/KERMIT *****************************************************************************/uint16_t crc16_ccitt(uint8_t *data, uint_len length)&#123; uint8_t i; uint16_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0x8408; // 0x8408 = reverse 0x1021 else crc = (crc &gt;&gt; 1); &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-16/CCITT-FALSE x16+x12+x5+1 * Poly: 0x1021 * Init: 0xFFFF * Refin: False * Refout: False * Xorout: 0x0000 * Note: *****************************************************************************/uint16_t crc16_ccitt_false(uint8_t *data, uint_len length)&#123; uint8_t i; uint16_t crc = 0xffff; //Initial value while(length--) &#123; crc ^= (uint16_t)(*data++) &lt;&lt; 8; // crc ^= (uint6_t)(*data)&lt;&lt;8; data++; for (i = 0; i &lt; 8; ++i) &#123; if ( crc &amp; 0x8000 ) crc = (crc &lt;&lt; 1) ^ 0x1021; else crc &lt;&lt;= 1; &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-16/X25 x16+x12+x5+1 * Poly: 0x1021 * Init: 0xFFFF * Refin: True * Refout: True * Xorout: 0XFFFF * Note: *****************************************************************************/uint16_t crc16_x25(uint8_t *data, uint_len length)&#123; uint8_t i; uint16_t crc = 0xffff; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0x8408; // 0x8408 = reverse 0x1021 else crc = (crc &gt;&gt; 1); &#125; &#125; return ~crc; // crc^Xorout&#125;/****************************************************************************** * Name: CRC-16/XMODEM x16+x12+x5+1 * Poly: 0x1021 * Init: 0x0000 * Refin: False * Refout: False * Xorout: 0x0000 * Alias: CRC-16/ZMODEM,CRC-16/ACORN *****************************************************************************/uint16_t crc16_xmodem(uint8_t *data, uint_len length)&#123; uint8_t i; uint16_t crc = 0; // Initial value while(length--) &#123; crc ^= (uint16_t)(*data++) &lt;&lt; 8; // crc ^= (uint16_t)(*data)&lt;&lt;8; data++; for (i = 0; i &lt; 8; ++i) &#123; if ( crc &amp; 0x8000 ) crc = (crc &lt;&lt; 1) ^ 0x1021; else crc &lt;&lt;= 1; &#125; &#125; return crc;&#125;/****************************************************************************** * Name: CRC-16/DNP x16+x13+x12+x11+x10+x8+x6+x5+x2+1 * Poly: 0x3D65 * Init: 0x0000 * Refin: True * Refout: True * Xorout: 0xFFFF * Use: M-Bus,ect. *****************************************************************************/uint16_t crc16_dnp(uint8_t *data, uint_len length)&#123; uint8_t i; uint16_t crc = 0; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0xA6BC; // 0xA6BC = reverse 0x3D65 else crc = (crc &gt;&gt; 1); &#125; &#125; return ~crc; // crc^Xorout&#125;/****************************************************************************** * Name: CRC-32 x32+x26+x23+x22+x16+x12+x11+x10+x8+x7+x5+x4+x2+x+1 * Poly: 0x4C11DB7 * Init: 0xFFFFFFF * Refin: True * Refout: True * Xorout: 0xFFFFFFF * Alias: CRC_32/ADCCP * Use: WinRAR,ect. *****************************************************************************/uint32_t crc32(uint8_t *data, uint_len length)&#123; uint8_t i; uint32_t crc = 0xffffffff; // Initial value while(length--) &#123; crc ^= *data++; // crc ^= *data; data++; for (i = 0; i &lt; 8; ++i) &#123; if (crc &amp; 1) crc = (crc &gt;&gt; 1) ^ 0xEDB88320;// 0xEDB88320= reverse 0x04C11DB7 else crc = (crc &gt;&gt; 1); &#125; &#125; return ~crc;&#125;/****************************************************************************** * Name: CRC-32/MPEG-2 x32+x26+x23+x22+x16+x12+x11+x10+x8+x7+x5+x4+x2+x+1 * Poly: 0x4C11DB7 * Init: 0xFFFFFFF * Refin: False * Refout: False * Xorout: 0x0000000 * Note: *****************************************************************************/uint32_t crc32_mpeg_2(uint8_t *data, uint_len length)&#123; uint8_t i; uint32_t crc = 0xffffffff; // Initial value while(length--) &#123; crc ^= (uint32_t)(*data++) &lt;&lt; 24;// crc ^=(uint32_t)(*data)&lt;&lt;24; data++; for (i = 0; i &lt; 8; ++i) &#123; if ( crc &amp; 0x80000000 ) crc = (crc &lt;&lt; 1) ^ 0x04C11DB7; else crc &lt;&lt;= 1; &#125; &#125; return crc;&#125;","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"crc","slug":"stm32/crc","permalink":"http://example.com/categories/stm32/crc/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"crc","slug":"crc","permalink":"http://example.com/tags/crc/"}]},{"title":"USBæŠ¥å‘Šæè¿°ç¬¦","slug":"stm32/USB key mouse","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:54:02.590Z","comments":true,"path":"2024/12/26/stm32/USB key mouse/","permalink":"http://example.com/2024/12/26/stm32/USB%20key%20mouse/","excerpt":"","text":"USB HID æŠ¥å‘Šæè¿°ç¬¦HIDå…¨ç§°Human Interface Deviceã€‚HIDåè®®é‡Œå¢åŠ äº†HIDæè¿°ç¬¦å’ŒæŠ¥å‘Šæè¿°ç¬¦ï¼Œä»¥åŠç‰¹å®šçš„å…³äºHIDçš„ç±»è¯·æ±‚ã€‚HIDè®¾å¤‡çš„é€šä¿¡æ˜¯é€šè¿‡æŠ¥è¡¨æ¥è¿›è¡Œçš„ã€‚æ®è¯´ï¼ŒæŠ¥å‘Šæè¿°ç¬¦æ˜¯USBè®¾å¤‡ä¸­æœ€éš¾çš„æè¿°ç¬¦äº†ã€‚å…³äºHIDæè¿°ç¬¦å¯ä»¥å‚è€ƒHIDåè®®ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è°ˆè°ˆæŠ¥å‘Šæè¿°ç¬¦ã€‚ é¼ æ ‡å®ƒæè¿°äº†4ä¸ªå­—èŠ‚ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºæŒ‰é”®ï¼Œç¬¬äºŒä¸ªå­—èŠ‚è¡¨ç¤ºxè½´ï¼ˆå³é¼ æ ‡å·¦å³ç§»åŠ¨ï¼Œ0è¡¨ç¤ºä¸åŠ¨ï¼Œæ­£å€¼è¡¨ç¤ºå¾€å³ç§»ï¼Œè´Ÿå€¼è¡¨ç¤ºå¾€å·¦ç§»ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå­—èŠ‚è¡¨ç¤ºyè½´ï¼ˆå³é¼ æ ‡ä¸Šä¸‹ç§»åŠ¨ï¼Œ0è¡¨ç¤ºä¸åŠ¨ï¼Œæ­£å€¼è¡¨ç¤ºå¾€ä¸‹ç§»åŠ¨ï¼Œè´Ÿå€¼è¡¨ç¤ºå¾€ä¸Šç§»åŠ¨ï¼‰ï¼Œç¬¬å››ä¸ªå­—èŠ‚è¡¨ç¤ºé¼ æ ‡æ»šè½®ï¼ˆæ­£å€¼ä¸ºå¾€ä¸Šæ»šåŠ¨ï¼Œè´Ÿå€¼ä¸ºå¾€ä¸‹æ»šåŠ¨ï¼‰ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758code char MouseReportDescriptor[52] = &#123; //é€šç”¨æ¡Œé¢è®¾å¤‡ 0x05, 0x01, // USAGE_PAGE (Generic Desktop) //é¼ æ ‡ 0x09, 0x02, // USAGE (Mouse) //é›†åˆ 0xa1, 0x01, // COLLECTION (Application) //æŒ‡é’ˆè®¾å¤‡ 0x09, 0x01, // USAGE (Pointer) //é›†åˆ 0xa1, 0x00, // COLLECTION (Physical) //æŒ‰é”® 0x05, 0x09, // USAGE_PAGE (Button) //ä½¿ç”¨æœ€å°å€¼1 0x19, 0x01, // USAGE_MINIMUM (Button 1) //ä½¿ç”¨æœ€å¤§å€¼3ã€‚1è¡¨ç¤ºå·¦é”®ï¼Œ2è¡¨ç¤ºå³é”®ï¼Œ3è¡¨ç¤ºä¸­é”® 0x29, 0x03, // USAGE_MAXIMUM (Button 3) //é€»è¾‘æœ€å°å€¼0 0x15, 0x00, // LOGICAL_MINIMUM (0) //é€»è¾‘æœ€å¤§å€¼1 0x25, 0x01, // LOGICAL_MAXIMUM (1) //æ•°é‡ä¸º3 0x95, 0x03, // REPORT_COUNT (3) //å¤§å°ä¸º1bit 0x75, 0x01, // REPORT_SIZE (1) //è¾“å…¥ï¼Œå˜é‡ï¼Œæ•°å€¼ï¼Œç»å¯¹å€¼ //ä»¥ä¸Š3ä¸ªbitåˆ†åˆ«è¡¨ç¤ºé¼ æ ‡çš„ä¸‰ä¸ªæŒ‰é”®æƒ…å†µï¼Œæœ€ä½ä½ï¼ˆbit-0ï¼‰ä¸ºå·¦é”® //bit-1ä¸ºå³é”®ï¼Œbit-2ä¸ºä¸­é”®ï¼ŒæŒ‰ä¸‹æ—¶å¯¹åº”çš„ä½å€¼ä¸º1ï¼Œé‡Šæ”¾æ—¶å¯¹åº”çš„å€¼ä¸º0 0x81, 0x02, // INPUT (Data,Var,Abs) //å¡«å……5ä¸ªbitï¼Œè¡¥è¶³ä¸€ä¸ªå­—èŠ‚ 0x95, 0x01, // REPORT_COUNT (1) 0x75, 0x05, // REPORT_SIZE (5) 0x81, 0x03, // INPUT (Cnst,Var,Abs) //ç”¨é€”é¡µä¸ºé€šç”¨æ¡Œé¢ 0x05, 0x01, // USAGE_PAGE (Generic Desktop) //ç”¨é€”ä¸ºX 0x09, 0x30, // USAGE (X) //ç”¨é€”ä¸ºY 0x09, 0x31, // USAGE (Y) //ç”¨é€”ä¸ºæ»šè½® 0x09, 0x38, // USAGE (Wheel) //é€»è¾‘æœ€å°å€¼ä¸º-127 0x15, 0x81, // LOGICAL_MINIMUM (-127) //é€»è¾‘æœ€å¤§å€¼ä¸º+127 0x25, 0x7f, // LOGICAL_MAXIMUM (127) //å¤§å°ä¸º8ä¸ªbits 0x75, 0x08, // REPORT_SIZE (8) //æ•°é‡ä¸º3ä¸ªï¼Œå³åˆ†åˆ«ä»£è¡¨x,y,æ»šè½® 0x95, 0x03, // REPORT_COUNT (3) //è¾“å…¥ï¼Œå˜é‡ï¼Œå€¼ï¼Œç›¸å¯¹å€¼ 0x81, 0x06, // INPUT (Data,Var,Rel) //å…³é›†åˆ 0xc0, // END_COLLECTION 0xc0 // END_COLLECTION &#125;; é€šè¿‡å¯¹ä¸Šé¢çš„æŠ¥å‘Šåˆ†æï¼Œæˆ‘ä»¬çŸ¥é“æŠ¥å‘Šè¿”å›4ä¸ªå­—èŠ‚ï¼Œæ²¡æœ‰æŠ¥å‘ŠIDã€‚å¦‚æœé¼ æ ‡å·¦é”®æŒ‰ä¸‹ï¼Œåˆ™è¿”å›01 00 00 00ï¼ˆåå…­è¿›åˆ¶å€¼ï¼‰ï¼Œå¦‚æœå³é”®æŒ‰ä¸‹ï¼Œåˆ™è¿”å›02 00 00 00ï¼Œå¦‚æœä¸­é”®æŒ‰ä¸‹ï¼Œåˆ™è¿”å›04 00 00 00ï¼Œå¦‚æœä¸‰ä¸ªé”®åŒæ—¶æŒ‰ä¸‹ï¼Œåˆ™è¿”å›07 00 00 00ã€‚å¦‚æœé¼ æ ‡å¾€å³ç§»åŠ¨åˆ™ç¬¬äºŒå­—èŠ‚è¿”å›æ­£å€¼ï¼Œå€¼è¶Šå¤§ç§»åŠ¨é€Ÿåº¦è¶Šå¿«ã€‚å…¶å®ƒçš„ç±»æ¨ã€‚ é”®ç›˜1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798code char KeyBoardReportDescriptor[63] = &#123; //è¡¨ç¤ºç”¨é€”é¡µä¸ºé€šç”¨æ¡Œé¢è®¾å¤‡ 0x05, 0x01, // USAGE_PAGE (Generic Desktop) //è¡¨ç¤ºç”¨é€”ä¸ºé”®ç›˜ 0x09, 0x06, // USAGE (Keyboard) //è¡¨ç¤ºåº”ç”¨é›†åˆï¼Œå¿…é¡»è¦ä»¥END_COLLECTIONæ¥ç»“æŸå®ƒï¼Œè§æœ€åçš„END_COLLECTION 0xa1, 0x01, // COLLECTION (Application) //è¡¨ç¤ºç”¨é€”é¡µä¸ºæŒ‰é”® 0x05, 0x07, // USAGE_PAGE (Keyboard) //ç”¨é€”æœ€å°å€¼ï¼Œè¿™é‡Œä¸ºå·¦ctrlé”® 0x19, 0xe0, // USAGE_MINIMUM (Keyboard LeftControl) //ç”¨é€”æœ€å¤§å€¼ï¼Œè¿™é‡Œä¸ºå³GUIé”®ï¼Œå³windowé”® 0x29, 0xe7, // USAGE_MAXIMUM (Keyboard Right GUI) //é€»è¾‘æœ€å°å€¼ä¸º0 0x15, 0x00, // LOGICAL_MINIMUM (0) //é€»è¾‘æœ€å¤§å€¼ä¸º1 0x25, 0x01, // LOGICAL_MAXIMUM (1) //æŠ¥å‘Šå¤§å°ï¼ˆå³è¿™ä¸ªå­—æ®µçš„å®½åº¦ï¼‰ä¸º1bitï¼Œæ‰€ä»¥å‰é¢çš„é€»è¾‘æœ€å°å€¼ä¸º0ï¼Œé€»è¾‘æœ€å¤§å€¼ä¸º1 0x75, 0x01, // REPORT_SIZE (1) //æŠ¥å‘Šçš„ä¸ªæ•°ä¸º8ï¼Œå³æ€»å…±æœ‰8ä¸ªbits 0x95, 0x08, // REPORT_COUNT (8) //è¾“å…¥ç”¨ï¼Œå˜é‡ï¼Œå€¼ï¼Œç»å¯¹å€¼ã€‚åƒé”®ç›˜è¿™ç±»ä¸€èˆ¬æŠ¥å‘Šç»å¯¹å€¼ï¼Œ //è€Œé¼ æ ‡ç§»åŠ¨è¿™æ ·çš„åˆ™æŠ¥å‘Šç›¸å¯¹å€¼ï¼Œè¡¨ç¤ºé¼ æ ‡ç§»åŠ¨å¤šå°‘ 0x81, 0x02, // INPUT (Data,Var,Abs) //ä¸Šé¢è¿™è¿™å‡ é¡¹æè¿°äº†ä¸€ä¸ªè¾“å…¥ç”¨çš„å­—æ®µï¼Œæ€»å…±ä¸º8ä¸ªbitsï¼Œæ¯ä¸ªbitè¡¨ç¤ºä¸€ä¸ªæŒ‰é”® //åˆ†åˆ«ä»å·¦ctrlé”®åˆ°å³GUIé”®ã€‚è¿™8ä¸ªbitsåˆšå¥½æ„æˆä¸€ä¸ªå­—èŠ‚ï¼Œå®ƒä½äºæŠ¥å‘Šçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚ //å®ƒçš„æœ€ä½ä½ï¼Œå³bit-0å¯¹åº”ç€å·¦ctrlé”®ï¼Œå¦‚æœè¿”å›çš„æ•°æ®è¯¥ä½ä¸º1ï¼Œåˆ™è¡¨ç¤ºå·¦ctrlé”®è¢«æŒ‰ä¸‹ï¼Œ //å¦åˆ™ï¼Œå·¦ctrlé”®æ²¡æœ‰æŒ‰ä¸‹ã€‚æœ€é«˜ä½ï¼Œå³bit-7è¡¨ç¤ºå³GUIé”®çš„æŒ‰ä¸‹æƒ…å†µã€‚ä¸­é—´çš„å‡ ä¸ªä½ï¼Œ //éœ€è¦æ ¹æ®HIDåè®®ä¸­è§„å®šçš„ç”¨é€”é¡µè¡¨ï¼ˆHID Usage Tablesï¼‰æ¥ç¡®å®šã€‚è¿™é‡Œé€šå¸¸ç”¨æ¥è¡¨ç¤º //ç‰¹æ®Šé”®ï¼Œä¾‹å¦‚ctrlï¼Œshiftï¼Œdelé”®ç­‰ //è¿™æ ·çš„æ•°æ®æ®µä¸ªæ•°ä¸º1 0x95, 0x01, // REPORT_COUNT (1) //æ¯ä¸ªæ®µé•¿åº¦ä¸º8bits 0x75, 0x08, // REPORT_SIZE (8) //è¾“å…¥ç”¨ï¼Œå¸¸é‡ï¼Œå€¼ï¼Œç»å¯¹å€¼ 0x81, 0x03, // INPUT (Cnst,Var,Abs) //ä¸Šé¢è¿™8ä¸ªbitæ˜¯å¸¸é‡ï¼Œè®¾å¤‡å¿…é¡»è¿”å›0 //è¿™æ ·çš„æ•°æ®æ®µä¸ªæ•°ä¸º5 0x95, 0x05, // REPORT_COUNT (5) //æ¯ä¸ªæ®µå¤§å°ä¸º1bit 0x75, 0x01, // REPORT_SIZE (1) //ç”¨é€”æ˜¯LEDï¼Œå³ç”¨æ¥æ§åˆ¶é”®ç›˜ä¸Šçš„LEDç”¨çš„ï¼Œå› æ­¤ä¸‹é¢ä¼šè¯´æ˜å®ƒæ˜¯è¾“å‡ºç”¨ 0x05, 0x08, // USAGE_PAGE (LEDs) //ç”¨é€”æœ€å°å€¼æ˜¯Num Lockï¼Œå³æ•°å­—é”®é”å®šç¯ 0x19, 0x01, // USAGE_MINIMUM (Num Lock) //ç”¨é€”æœ€å¤§å€¼æ˜¯Kanaï¼Œè¿™ä¸ªæ˜¯ä»€ä¹ˆç¯æˆ‘ä¹Ÿä¸æ¸…æ¥š^_^ 0x29, 0x05, // USAGE_MAXIMUM (Kana) //å¦‚å‰é¢æ‰€è¯´ï¼Œè¿™ä¸ªå­—æ®µæ˜¯è¾“å‡ºç”¨çš„ï¼Œç”¨æ¥æ§åˆ¶LEDã€‚å˜é‡ï¼Œå€¼ï¼Œç»å¯¹å€¼ã€‚ //1è¡¨ç¤ºç¯äº®ï¼Œ0è¡¨ç¤ºç¯ç­ 0x91, 0x02, // OUTPUT (Data,Var,Abs) //è¿™æ ·çš„æ•°æ®æ®µä¸ªæ•°ä¸º1 0x95, 0x01, // REPORT_COUNT (1) //æ¯ä¸ªæ®µå¤§å°ä¸º3bits 0x75, 0x03, // REPORT_SIZE (3) //è¾“å‡ºç”¨ï¼Œå¸¸é‡ï¼Œå€¼ï¼Œç»å¯¹ 0x91, 0x03, // OUTPUT (Cnst,Var,Abs) //ç”±äºè¦æŒ‰å­—èŠ‚å¯¹é½ï¼Œè€Œå‰é¢æ§åˆ¶LEDçš„åªç”¨äº†5ä¸ªbitï¼Œ //æ‰€ä»¥åé¢éœ€è¦é™„åŠ 3ä¸ªä¸ç”¨bitï¼Œè®¾ç½®ä¸ºå¸¸é‡ã€‚ //æŠ¥å‘Šä¸ªæ•°ä¸º6 0x95, 0x06, // REPORT_COUNT (6) //æ¯ä¸ªæ®µå¤§å°ä¸º8bits 0x75, 0x08, // REPORT_SIZE (8) //é€»è¾‘æœ€å°å€¼0 0x15, 0x00, // LOGICAL_MINIMUM (0) //é€»è¾‘æœ€å¤§å€¼255 0x25, 0xFF, // LOGICAL_MAXIMUM (255) //ç”¨é€”é¡µä¸ºæŒ‰é”® 0x05, 0x07, // USAGE_PAGE (Keyboard) //ä½¿ç”¨æœ€å°å€¼ä¸º0 0x19, 0x00, // USAGE_MINIMUM (Reserved (no event indicated)) //ä½¿ç”¨æœ€å¤§å€¼ä¸º0x65 0x29, 0x65, // USAGE_MAXIMUM (Keyboard Application) //è¾“å…¥ç”¨ï¼Œå˜é‡ï¼Œæ•°ç»„ï¼Œç»å¯¹å€¼ 0x81, 0x00, // INPUT (Data,Ary,Abs) //ä»¥ä¸Šå®šä¹‰äº†6ä¸ª8bitå®½çš„æ•°ç»„ï¼Œæ¯ä¸ª8bitï¼ˆå³ä¸€ä¸ªå­—èŠ‚ï¼‰ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªæŒ‰é”®ï¼Œæ‰€ä»¥å¯ä»¥åŒæ—¶ //æœ‰6ä¸ªæŒ‰é”®æŒ‰ä¸‹ã€‚æ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹æ—¶ï¼Œå…¨éƒ¨è¿”å›0ã€‚å¦‚æœæŒ‰ä¸‹çš„é”®å¤ªå¤šï¼Œå¯¼è‡´é”®ç›˜æ‰«æç³»ç»Ÿ //æ— æ³•åŒºåˆ†æŒ‰é”®æ—¶ï¼Œåˆ™å…¨éƒ¨è¿”å›0x01ï¼Œå³6ä¸ª0x01ã€‚å¦‚æœæœ‰ä¸€ä¸ªé”®æŒ‰ä¸‹ï¼Œåˆ™è¿™6ä¸ªå­—èŠ‚ä¸­çš„ç¬¬ä¸€ //ä¸ªå­—èŠ‚ä¸ºç›¸åº”çš„é”®å€¼ï¼ˆå…·ä½“çš„å€¼å‚çœ‹HID Usage Tablesï¼‰ï¼Œå¦‚æœä¸¤ä¸ªé”®æŒ‰ä¸‹ï¼Œåˆ™ç¬¬1ã€2ä¸¤ä¸ª //å­—èŠ‚åˆ†åˆ«ä¸ºç›¸åº”çš„é”®å€¼ï¼Œä»¥æ¬¡ç±»æ¨ã€‚ //å…³é›†åˆï¼Œè·Ÿä¸Šé¢çš„å¯¹åº” 0xc0 // END_COLLECTION &#125;; é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªæŠ¥å‘Šä¸­åªæœ‰ä¸€ä¸ªæŠ¥å‘Šï¼Œæ‰€ä»¥æ²¡æœ‰æŠ¥å‘ŠIDï¼Œå› æ­¤è¿”å›çš„éƒ½æ˜¯å®é™…ä½¿ç”¨çš„æ•°æ®ã€‚æ€»å…±æœ‰8å­—èŠ‚è¾“å…¥ï¼Œ1å­—èŠ‚è¾“å‡ºã€‚å…¶ä¸­è¾“å…¥çš„ç¬¬ä¸€å­—èŠ‚ç”¨æ¥è¡¨ç¤ºç‰¹æ®ŠæŒ‰é”®ï¼Œç¬¬äºŒå­—èŠ‚ä¿ç•™ï¼Œåé¢çš„å…­å­—èŠ‚ä¸ºæ™®é€šæŒ‰é”®ã€‚å¦‚æœåªæœ‰å·¦ctrlé”®æŒ‰ä¸‹ï¼Œåˆ™è¿”å›01 00 00 00 00 00 00 00ï¼ˆåå…­è¿›åˆ¶ï¼‰ï¼Œå¦‚æœåªæœ‰æ•°å­—é”®1 æŒ‰ä¸‹ï¼Œåˆ™è¿”å›00 00 59 00 00 00 00 00ï¼Œå¦‚æœæ•°å­—é”®1 å’Œ2 åŒæ—¶æŒ‰ä¸‹ï¼Œåˆ™è¿”å›00 00 59 5A 00 00 00 00ï¼Œå¦‚æœå†æŒ‰ä¸‹å·¦shift é”®ï¼Œåˆ™è¿”å›02 00 59 5A 00 00 00 00ï¼Œç„¶åå†é‡Šæ”¾1 é”®ï¼Œåˆ™è¿”å›02 00 5A 00 00 00 00 00ï¼Œç„¶åå…¨éƒ¨æŒ‰é”®é‡Šæ”¾ï¼Œåˆ™è¿”å›00 00 00 00 00 00 00 00ã€‚è¿™äº›æ•°æ®ï¼ˆå³æŠ¥å‘Šï¼‰éƒ½æ˜¯é€šè¿‡ä¸­æ–­ç«¯ç‚¹è¿”å›çš„ã€‚å½“æŒ‰ä¸‹Num Locké”®æ—¶ï¼ŒPCä¼šå‘é€è¾“å‡ºæŠ¥å‘Šï¼Œä»æŠ¥å‘Šæè¿°ç¬¦ä¸­æˆ‘ä»¬çŸ¥é“ï¼ŒNum Lockçš„LEDå¯¹åº”ç€è¾“å‡ºæŠ¥å‘Šçš„æœ€ä½ä½ï¼Œå½“æ•°å­—å°é”®ç›˜æ‰“å¼€æ—¶ï¼Œè¾“å‡ºxxxxxxx1ï¼ˆäºŒè¿›åˆ¶ï¼Œæ‰“xçš„ç”±å…¶å®ƒçš„LEDçŠ¶æ€å†³å®šï¼‰ï¼›å½“æ•°å­—å°é”®ç›˜å…³é—­æ—¶ï¼Œè¾“å‡ºxxxxxxx0ï¼ˆåŒå‰ï¼‰ã€‚å–å‡ºæœ€ä½ä½å°±å¯ä»¥æ§åˆ¶æ•°å­—é”®é”å®šLEDäº†ã€‚","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"usb","slug":"stm32/usb","permalink":"http://example.com/categories/stm32/usb/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"usb","slug":"usb","permalink":"http://example.com/tags/usb/"}]},{"title":"stm32 USB","slug":"stm32/USB","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-27T03:03:44.443Z","comments":true,"path":"2024/12/26/stm32/USB/","permalink":"http://example.com/2024/12/26/stm32/USB/","excerpt":"","text":"stm32 USBDEVICEwiresharkçš„usbæŠ“åŒ…åˆ†æ STM32F103 USB EP0é€šä¿¡æ•°æ®è¯¦è§£ USBçš„ç«¯ç‚¹æè¿°ç¬¦è¯¦è§£ Custom HID 1.æè¿°ç¬¦:12345678910111213141516171819202122232425__ALIGN_BEGIN static uint8_t CUSTOM_HID_ReportDesc_FS[USBD_CUSTOM_HID_REPORT_DESC_SIZE] __ALIGN_END =&#123; /* USER CODE BEGIN 0 */ 0x05, 0x8c, /* USAGE_PAGE (ST Page) */ 0x09, 0x01, /* USAGE (Demo Kit) */ 0xa1, 0x01, /* COLLECTION (Application) */ // The Input report 0x09,0x03, // USAGE ID - Vendor defined 0x15,0x00, // LOGICAL_MINIMUM (0) 0x26,0x00, 0xFF, // LOGICAL_MAXIMUM (255) 0x75,0x08, // REPORT_SIZE (8bit) 0x95,0x40, // REPORT_COUNT (64Byte) 0x81,0x02, // INPUT (Data,Var,Abs) // The Output report 0x09,0x04, // USAGE ID - Vendor defined 0x15,0x00, // LOGICAL_MINIMUM (0) 0x26,0x00,0xFF, // LOGICAL_MAXIMUM (255) 0x75,0x08, // REPORT_SIZE (8bit) 0x95,0x40, // REPORT_COUNT (64Byte) 0x91,0x02, // OUTPUT (Data,Var,Abs) /* USER CODE END 0 */ 0xC0 /* END_COLLECTION */&#125;; 2.usbd_conf.håšbuffé•¿åº¦ä¿®æ”¹ï¼š123#define USBD_CUSTOMHID_OUTREPORT_BUF_SIZE 64#define USBD_CUSTOM_HID_REPORT_DESC_SIZE 33 usbd_customhid.hæ–‡ä»¶ä¸­çš„å‘é€ä¸æ¥æ”¶é•¿åº¦123#define CUSTOM_HID_EPIN_SIZE 0x40#define CUSTOM_HID_EPOUT_SIZE 0x40 3.æ”¶å‘å†…å®¹:123456789101112131415161718uint8_t USB_Recive_Buffer[64];static uint8_t USBD_CUSTOM_HID_DataOut (USBD_HandleTypeDef *pdev, uint8_t epnum)&#123; USBD_CUSTOM_HID_HandleTypeDef *hhid = (USBD_CUSTOM_HID_HandleTypeDef*)pdev-&gt;pClassData; /* ((USBD_CUSTOM_HID_ItfTypeDef *)pdev-&gt;pUserData)-&gt;OutEvent(hhid-&gt;Report_buf[0], hhid-&gt;Report_buf[1]); USBD_LL_PrepareReceive(pdev, CUSTOM_HID_EPOUT_ADDR , hhid-&gt;Report_buf, USBD_CUSTOMHID_OUTREPORT_BUF_SIZE); */ USBD_CUSTOM_HID_SendReport(pdev,USB_Recive_Buffer,64); USBD_LL_PrepareReceive( pdev, CUSTOM_HID_EPOUT_ADDR , USB_Recive_Buffer, sizeof( USB_Recive_Buffer ) ); return USBD_OK;&#125; CDCæ¥æ”¶ 1static int8_t CDC_Receive_FS(uint8_t* Buf, uint32_t *Len) å‘é€ 1CDC_Transmit_FS HID_MOUSEDemo:é¼ æ ‡æ¯ç§’å³ç§»10 12345678910111213141516struct mouseHID_t &#123; uint8_t buttons;//å·¦0x0001 å³0x0010 ä¸­0x0100 int8_t x;//+:å³ -:å·¦ int8_t y; int8_t wheel;//+:ä¸Š -:ä¸‹&#125;;struct mouseHID_t mouseHID;mouseHID.buttons = 0;mouseHID.x = 10;mouseHID.y = 0;mouseHID.wheel = 0; mouseHID.x = 10; USBD_HID_SendReport(&amp;hUsbDeviceFS, (uint8_t*)&amp;mouseHID, sizeof(struct mouseHID_t)); HAL_Delay(1000); HID_KEY usbd_hid.hæ–‡ä»¶ 12#define HID_EPIN_SIZE 0x08#define HID_MOUSE_REPORT_DESC_SIZE 63 usbd_desc.cæ–‡ä»¶ 12// #define USBD_VID 0x1111 #define USBD_PID_FS 0x1111 usbd_hid.cæ–‡ä»¶ 10x01, /*nInterfaceProtocol : 0=none, 1=keyboard, 2=mouse*/ 123456789101112131415161718192021222324252627282930313233HID_MOUSE_ReportDesc[HID_MOUSE_REPORT_DESC_SIZE] 0x05, 0x01, // USAGE_PAGE (Generic Desktop) //63 0x09, 0x06, // USAGE (Keyboard) 0xa1, 0x01, // COLLECTION (Application) 0x05, 0x07, // USAGE_PAGE (Keyboard) 0x19, 0xe0, // USAGE_MINIMUM (Keyboard LeftControl) 0x29, 0xe7, // USAGE_MAXIMUM (Keyboard Right GUI) 0x15, 0x00, // LOGICAL_MINIMUM (0) 0x25, 0x01, // LOGICAL_MAXIMUM (1) 0x75, 0x01, // REPORT_SIZE (1) 0x95, 0x08, // REPORT_COUNT (8) 0x81, 0x02, // INPUT (Data,Var,Abs) 0x95, 0x01, // REPORT_COUNT (1) 0x75, 0x08, // REPORT_SIZE (8) 0x81, 0x03, // INPUT (Cnst,Var,Abs) 0x95, 0x05, // REPORT_COUNT (5) 0x75, 0x01, // REPORT_SIZE (1) 0x05, 0x08, // USAGE_PAGE (LEDs) 0x19, 0x01, // USAGE_MINIMUM (Num Lock) 0x29, 0x05, // USAGE_MAXIMUM (Kana) 0x91, 0x02, // OUTPUT (Data,Var,Abs) 0x95, 0x01, // REPORT_COUNT (1) 0x75, 0x03, // REPORT_SIZE (3) 0x91, 0x03, // OUTPUT (Cnst,Var,Abs) 0x95, 0x06, // REPORT_COUNT (6) 0x75, 0x08, // REPORT_SIZE (8) 0x15, 0x00, // LOGICAL_MINIMUM (0) 0x25, 0x65, // LOGICAL_MAXIMUM (101) 0x05, 0x07, // USAGE_PAGE (Keyboard) 0x19, 0x00, // USAGE_MINIMUM (Reserved (no event indicated)) 0x29, 0x65, // USAGE_MAXIMUM (Keyboard Application) 0x81, 0x00, // INPUT (Data,Ary,Abs) 0xc0, // END_COLLECTION Demo:è¾“å‡ºæŒ‰é”®A 1234567891011121314151617181920212223242526/** buffer[0] - bit0: Left CTRL* -bit1: Left SHIFT* -bit2: Left ALT* -bit3: Left GUI* -bit4: Right CTRL* -bit5: Right SHIFT* -bit6: Right ALT* -bit7: Right GUI * buffer[1] - Padding = Always 0x00* buffer[2] - Key 1* buffer[3] - Key 2* buffer[4] - Key 3* buffer[5] - Key 4* buffer[6] - Key 5* buffer[7] - Key 6*/ buffer[0] = 0x02; //shift buffer[2] = 0x04; // a USBD_HID_SendReport(&amp;hUsbDeviceFS, buffer, 8); //send HAL_Delay(15); //delay buffer[0] = 0x00; buffer[2] = 0x00; USBD_HID_SendReport(&amp;hUsbDeviceFS, buffer, 8); HAL_Delay(15); HOSTHID_KeyMouse 1234567891011121314151617181920212223242526void USBMouseHandler(void)&#123; static uint8_t temp; if (Appli_state == APPLICATION_READY) &#123; //keyboard if (USBH_HID_GetDeviceType(&amp;hUsbHostFS) == HID_KEYBOARD) &#123; HID_KEYBD_Info_TypeDef *KeyEvent = USBH_HID_GetKeybdInfo(&amp;hUsbHostFS); if (temp != USBH_HID_GetASCIICode(KeyEvent)) &#123; temp = USBH_HID_GetASCIICode(KeyEvent); printf(&quot;%c&quot;,USBH_HID_GetASCIICode(KeyEvent)); &#125; &#125; //mouse else if (USBH_HID_GetDeviceType(&amp;hUsbHostFS) == HID_MOUSE) &#123; HID_MOUSE_Info_TypeDef *MouseEvent = USBH_HID_GetMouseInfo(&amp;hUsbHostFS); if (MouseEvent != NULL) &#123; printf(&quot;button:%d\\r\\n&quot;,MouseEvent-&gt;buttons[0]); &#125; &#125; &#125;&#125; éœ€è¦å¯¹æšä¸¾çŠ¶æ€åˆ¤æ–­ 1234567891011121314151617static uint8_t i;//-------------------------------- case HOST_ENUMERATION://-------------------------------- i = 0; &#125; else &#123; i++; USBH_Delay(10); if (i&gt;200) &#123; i = 0; phost-&gt;gState = HOST_DEV_DISCONNECTED; &#125; &#125; é•¿æ—¶é—´æšä¸¾å¤±è´¥ è¿”å›","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"usb","slug":"stm32/usb","permalink":"http://example.com/categories/stm32/usb/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"usb","slug":"usb","permalink":"http://example.com/tags/usb/"}]},{"title":"ç¼–è¯‘æ–­è¨€","slug":"stm32/assert","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:50:26.427Z","comments":true,"path":"2024/12/26/stm32/assert/","permalink":"http://example.com/2024/12/26/stm32/assert/","excerpt":"","text":"ç¼–è¯‘æ–­è¨€ç¼–è¯‘æœŸé—´æ–­è¨€åˆ¤æ–­åˆ©ç”¨æšä¸¾æ•°åˆ¤æ–­12345678910#define COMPILER_CONCAT_(a, b) a##b#define COMPILER_CONCAT(a, b) COMPILER_CONCAT_(a, b)// Divide by zero if the the expression is false. This// causes an error at compile time.//// The special value &#x27;__COUNTER__&#x27; is used to create a unique value to// append to &#x27;compiler_assert_&#x27; to create a unique token. This prevents// conflicts resulting from the same enum being declared multiple times.#define COMPILER_ASSERT(e) enum &#123; COMPILER_CONCAT(compiler_assert_, __COUNTER__) = 1/((e) ? 1 : 0) &#125; 1234567891011121314151617181920//(4ä½)å•hexè½¬å­—ç¬¦static char hex_to_ascii(uint8_t x)&#123; return (&#x27;0&#x27; + (x&gt;9 ? x+0x27 : x));&#125;//8ä½HEXè½¬å­—ç¬¦ä¸²uint32_t util_write_hex8(char *str, uint8_t value)&#123; static const char nybble_chars[] = &quot;0123456789abcdef&quot;; *(str + 0) = nybble_chars[(value &gt;&gt; 4) &amp; 0x0F ]; *(str + 1) = nybble_chars[(value &gt;&gt; 0) &amp; 0x0F ]; return 2;&#125;//å­—ç¬¦è½¬æ•°static uint8_t ctoh(char c)&#123; return (c &amp; 0x10) ? /*0-9*/ c &amp; 0xf : /*A-F, a-f*/ (c &amp; 0xf) + 9;&#125;","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"}]},{"title":"DAPLink","slug":"stm32/daplink","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:51:15.201Z","comments":true,"path":"2024/12/26/stm32/daplink/","permalink":"http://example.com/2024/12/26/stm32/daplink/","excerpt":"","text":"DAPLinkå»æ‰USBçš„IAPåŠŸèƒ½,bootloaderçœæ‰ï¼ŒAPPéƒ¨åˆ†ä¿®æ”¹å®å®šä¹‰å¤§å°ï¼Œå¯ç”¨stm32f103c8t6stm32f103xb_stm32f103rb_if æ¯”stm32f103xb_if å¤šäº†g_target_familyå®šä¹‰init_familyå‡½æ•°ç›´æ¥è¿”å›,å¤šäº†ç›®æ ‡é…ç½® 12345init_family();if (g_target_family &amp;&amp; g_target_family-&gt;prerun_target_config) &#123; g_target_family-&gt;prerun_target_config();&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768/** * @file daplink_addr.h * @brief * * DAPLink Interface Firmware * */#ifndef DAPLINK_ADDR_H#define DAPLINK_ADDR_H/* Device sizes */#define DAPLINK_ROM_START 0x08000000#define DAPLINK_ROM_SIZE 0x00010000#define DAPLINK_RAM_START 0x20000000#define DAPLINK_RAM_SIZE 0x00005000/* ROM sizes */#define DAPLINK_ROM_BL_START 0x08000000#define DAPLINK_ROM_BL_SIZE 0#define DAPLINK_ROM_CONFIG_ADMIN_START 0x08000000#define DAPLINK_ROM_CONFIG_ADMIN_SIZE 0#define DAPLINK_ROM_IF_START 0x08000000#define DAPLINK_ROM_IF_SIZE 0x0000FC00#define DAPLINK_ROM_CONFIG_USER_START 0x0800FC00#define DAPLINK_ROM_CONFIG_USER_SIZE 0x00000400/* RAM sizes */#define DAPLINK_RAM_APP_START 0x20000000#define DAPLINK_RAM_APP_SIZE 0x00004F00#define DAPLINK_RAM_SHARED_START 0x20004F00#define DAPLINK_RAM_SHARED_SIZE 0x00000100/* Flash Programming Info */#define DAPLINK_SECTOR_SIZE 0x00000400#define DAPLINK_MIN_WRITE_SIZE 0x00000400/* Current build */#if defined(DAPLINK_BL)#define DAPLINK_ROM_APP_START DAPLINK_ROM_BL_START#define DAPLINK_ROM_APP_SIZE DAPLINK_ROM_BL_SIZE#define DAPLINK_ROM_UPDATE_START DAPLINK_ROM_IF_START#define DAPLINK_ROM_UPDATE_SIZE DAPLINK_ROM_IF_SIZE#elif defined(DAPLINK_IF)#define DAPLINK_ROM_APP_START DAPLINK_ROM_IF_START#define DAPLINK_ROM_APP_SIZE DAPLINK_ROM_IF_SIZE#define DAPLINK_ROM_UPDATE_START DAPLINK_ROM_BL_START#define DAPLINK_ROM_UPDATE_SIZE DAPLINK_ROM_BL_SIZE#else#error &quot;Build must be either bootloader or interface&quot;#endif#endif IO_Config.hä¿®æ”¹é…ç½®æ›´æ”¹IOå£,uart.cä¿®æ”¹CDCä¸²å£ã€‚å¯å¼•å‡ºboot0,CDCæ”¹ç”¨ä¸²å£1ï¼Œä½¿ç”¨ISPçƒ§å½•ï¼Œå¢åŠ nResetæŒ‰é”®ï¼Œå¢åŠ å„å¤–è®¾LEDæŒ‡ç¤ºå¯ä»¥åœ¨vfs_user.cåŠ å…¥ä½¿ç”¨ä¿¡æ¯123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687static uint32_t update_details_txt_file(uint8_t *buf, uint32_t size, uint32_t start)&#123; uint32_t pos = 0; pos += util_write_string_in_region(buf, size, start, pos, &quot;Author: guoxin\\r\\n\\r\\n&quot; // Build ID &quot;Build ID: (&quot; COMPILER_DESCRIPTION LOCAL_MODS &quot;)\\r\\n&quot;); // Unique ID pos += expand_string_in_region(buf, size, start, pos, &quot;Unique ID: @U\\r\\n&quot;); // HIC ID pos += expand_string_in_region(buf, size, start, pos, &quot;HIC ID: @D\\r\\n&quot;); // Settings pos += setting_in_region(buf, size, start, pos, &quot;Auto Reset&quot;, config_get_auto_rst()); pos += setting_in_region(buf, size, start, pos, &quot;Automation allowed&quot;, config_get_automation_allowed()); pos += setting_in_region(buf, size, start, pos, &quot;Overflow detection&quot;, config_get_overflow_detect()); pos += setting_in_region(buf, size, start, pos, &quot;Incompatible image detection&quot;, config_get_detect_incompatible_target()); pos += setting_in_region(buf, size, start, pos, &quot;Page erasing&quot;, config_ram_get_page_erase()); // Current mode and version#if defined(DAPLINK_BL) pos += util_write_string_in_region(buf, size, start, pos, &quot;Daplink Mode: Bootloader\\r\\n&quot;); pos += expand_string_in_region(buf, size, start, pos, &quot;Bootloader Version: @V\\r\\n&quot;); if (info_get_interface_present()) &#123; char version[6] = &#123; 0, 0, 0, 0, &#x27;\\r&#x27;, &#x27;\\n&#x27; &#125;; pos += util_write_string_in_region(buf, size, start, pos, &quot;Interface Version: &quot;); util_write_uint32_zp(version, info_get_interface_version(), 4); pos += util_write_in_region(buf, size, start, pos, version, 6); &#125;#elif defined(DAPLINK_IF) pos += util_write_string_in_region(buf, size, start, pos, &quot;Daplink Mode: Interface\\r\\n&quot;); pos += expand_string_in_region(buf, size, start, pos, &quot;Interface Version: @V\\r\\n&quot;);#if DAPLINK_ROM_BL_SIZE != 0 if (info_get_bootloader_present()) &#123; char version[6] = &#123; 0, 0, 0, 0, &#x27;\\r&#x27;, &#x27;\\n&#x27; &#125;; pos += util_write_string_in_region(buf, size, start, pos, &quot;Bootloader Version: &quot;); util_write_uint32_zp(version, info_get_bootloader_version(), 4); pos += util_write_in_region(buf, size, start, pos, version, 6); &#125;#endif#endif pos += util_write_string_in_region(buf, size, start, pos, // Local modifications when making the build#if GIT_LOCAL_MODS &quot;Local Mods: 1\\r\\n&quot;#else &quot;Local Mods: 0\\r\\n&quot;#endif // Supported USB endpoints &quot;USB Interfaces: &quot;#ifdef MSC_ENDPOINT &quot;MSD&quot;#endif#ifdef CDC_ENDPOINT &quot;, CDC&quot;#endif#ifdef HID_ENDPOINT &quot;, HID&quot;#endif#if (WEBUSB_INTERFACE) &quot;, WebUSB&quot;#endif &quot;\\r\\n&quot;);#if DAPLINK_ROM_BL_SIZE != 0 // CRC of the bootloader (if there is one) if (info_get_bootloader_present()) &#123; pos += hex32_field_in_region(buf, size, start, pos, &quot;Bootloader CRC&quot;, info_get_crc_bootloader()); &#125;#endif // CRC of the interface pos += hex32_field_in_region(buf, size, start, pos, &quot;Interface CRC&quot;, info_get_crc_interface()); // Number of remounts that have occurred pos += uint32_field_in_region(buf, size, start, pos, &quot;Remount count&quot;, remount_count); //Target URL pos += expand_string_in_region(buf, size, start, pos, &quot;target mcu: stm32f103rb\\r\\n&quot;); pos += expand_string_in_region(buf, size, start, pos, &quot;\\r\\nUSART-&gt;TX:A2 RX:A3\\r\\nSWD-&gt;CLK:B13 DIO:B14 (DIO_IN:A12)\\r\\nJTAG-&gt;TDI:A7 TDO:A5\\r\\nLED:A9&quot;); return pos;&#125; 12//ä¿®æ”¹è™šæ‹Ÿç¡¬ç›˜æ–‡ä»¶void vfs_user_build_filesystem() 12//ä¿®æ”¹ç£ç›˜åç§°static inline const char * get_daplink_drive_name ( void )","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"DAPLink","slug":"stm32/DAPLink","permalink":"http://example.com/categories/stm32/DAPLink/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"DAPLink","slug":"DAPLink","permalink":"http://example.com/tags/DAPLink/"}]},{"title":"objdump","slug":"stm32/dump","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:51:41.399Z","comments":true,"path":"2024/12/26/stm32/dump/","permalink":"http://example.com/2024/12/26/stm32/dump/","excerpt":"","text":"objdump - æ˜¾ç¤ºäºŒè¿›åˆ¶æ–‡ä»¶ä¿¡æ¯ è¾“å‡ºä»£ç arm-none-eabi-objdump -j .text -S test.elf è¾“å‡ºæ±‡ç¼–arm-none-eabi-objdump -D test.elf 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687--archive-headers -a æ˜¾ç¤ºæ¡£æ¡ˆåº“çš„æˆå‘˜ä¿¡æ¯,ç±»ä¼¼ls -lå°†lib*.açš„ä¿¡æ¯åˆ—å‡ºã€‚ -b bfdname --target=bfdname æŒ‡å®šç›®æ ‡ç æ ¼å¼ã€‚è¿™ä¸æ˜¯å¿…é¡»çš„ï¼Œobjdumpèƒ½è‡ªåŠ¨è¯†åˆ«è®¸å¤šæ ¼å¼ï¼Œæ¯”å¦‚ï¼š objdump -b oasys -m vax -h fu.o æ˜¾ç¤ºfu.oçš„å¤´éƒ¨æ‘˜è¦ä¿¡æ¯ï¼Œæ˜ç¡®æŒ‡å‡ºè¯¥æ–‡ä»¶æ˜¯Vaxç³»ç»Ÿä¸‹ç”¨Oasysç¼–è¯‘å™¨ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ã€‚objdump -iå°†ç»™å‡ºè¿™é‡Œå¯ä»¥æŒ‡å®šçš„ç›®æ ‡ç æ ¼å¼åˆ—è¡¨ã€‚ -C --demangle å°†åº•å±‚çš„ç¬¦å·åè§£ç æˆç”¨æˆ·çº§åå­—ï¼Œé™¤äº†å»æ‰æ‰€å¼€å¤´çš„ä¸‹åˆ’çº¿ä¹‹å¤–ï¼Œè¿˜ä½¿å¾—C++å‡½æ•°åä»¥å¯ç†è§£çš„æ–¹å¼æ˜¾ç¤ºå‡ºæ¥ã€‚ --debugging -g æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ã€‚ä¼å›¾è§£æä¿å­˜åœ¨æ–‡ä»¶ä¸­çš„è°ƒè¯•ä¿¡æ¯å¹¶ä»¥Cè¯­è¨€çš„è¯­æ³•æ˜¾ç¤ºå‡ºæ¥ã€‚ä»…ä»…æ”¯æŒæŸäº›ç±»å‹çš„è°ƒè¯•ä¿¡æ¯ã€‚æœ‰äº›å…¶ä»–çš„æ ¼å¼è¢«readelf -wæ”¯æŒã€‚ -e --debugging-tags ç±»ä¼¼-gé€‰é¡¹ï¼Œä½†æ˜¯ç”Ÿæˆçš„ä¿¡æ¯æ˜¯å’Œctagså·¥å…·ç›¸å…¼å®¹çš„æ ¼å¼ã€‚ --disassemble -d ä»objfileä¸­åæ±‡ç¼–é‚£äº›ç‰¹å®šæŒ‡ä»¤æœºå™¨ç çš„sectionã€‚ -D --disassemble-all ä¸ -d ç±»ä¼¼ï¼Œä½†åæ±‡ç¼–æ‰€æœ‰section. --prefix-addresses åæ±‡ç¼–çš„æ—¶å€™ï¼Œæ˜¾ç¤ºæ¯ä¸€è¡Œçš„å®Œæ•´åœ°å€ã€‚è¿™æ˜¯ä¸€ç§æ¯”è¾ƒè€çš„åæ±‡ç¼–æ ¼å¼ã€‚ -EB -EL --endian=&#123;big|little&#125; æŒ‡å®šç›®æ ‡æ–‡ä»¶çš„å°ç«¯ã€‚è¿™ä¸ªé¡¹å°†å½±å“åæ±‡ç¼–å‡ºæ¥çš„æŒ‡ä»¤ã€‚åœ¨åæ±‡ç¼–çš„æ–‡ä»¶æ²¡æè¿°å°ç«¯ä¿¡æ¯çš„æ—¶å€™ç”¨ã€‚ä¾‹å¦‚S-records. -f --file-headers æ˜¾ç¤ºobjfileä¸­æ¯ä¸ªæ–‡ä»¶çš„æ•´ä½“å¤´éƒ¨æ‘˜è¦ä¿¡æ¯ã€‚ -h --section-headers --headers æ˜¾ç¤ºç›®æ ‡æ–‡ä»¶å„ä¸ªsectionçš„å¤´éƒ¨æ‘˜è¦ä¿¡æ¯ã€‚ -H --help ç®€çŸ­çš„å¸®åŠ©ä¿¡æ¯ã€‚ -i --info æ˜¾ç¤ºå¯¹äº -b æˆ–è€… -m é€‰é¡¹å¯ç”¨çš„æ¶æ„å’Œç›®æ ‡æ ¼å¼åˆ—è¡¨ã€‚ -j name--section=name ä»…ä»…æ˜¾ç¤ºæŒ‡å®šåç§°ä¸ºnameçš„sectionçš„ä¿¡æ¯ -l--line-numbers ç”¨æ–‡ä»¶åå’Œè¡Œå·æ ‡æ³¨ç›¸åº”çš„ç›®æ ‡ä»£ç ï¼Œä»…ä»…å’Œ-dã€-Dæˆ–è€…-rä¸€èµ·ä½¿ç”¨ä½¿ç”¨-ldå’Œä½¿ç”¨-dçš„åŒºåˆ«ä¸æ˜¯å¾ˆå¤§ï¼Œåœ¨æºç çº§è°ƒè¯•çš„æ—¶å€™æœ‰ç”¨ï¼Œè¦æ±‚ç¼–è¯‘æ—¶ä½¿ç”¨äº†-gä¹‹ç±»çš„è°ƒè¯•ç¼–è¯‘é€‰é¡¹ã€‚ -m machine --architecture=machine æŒ‡å®šåæ±‡ç¼–ç›®æ ‡æ–‡ä»¶æ—¶ä½¿ç”¨çš„æ¶æ„ï¼Œå½“å¾…åæ±‡ç¼–æ–‡ä»¶æœ¬èº«æ²¡æè¿°æ¶æ„ä¿¡æ¯çš„æ—¶å€™(æ¯”å¦‚S-records)ï¼Œè¿™ä¸ªé€‰é¡¹å¾ˆæœ‰ç”¨ã€‚å¯ä»¥ç”¨-ié€‰é¡¹åˆ—å‡ºè¿™é‡Œèƒ½å¤ŸæŒ‡å®šçš„æ¶æ„. --reloc -r æ˜¾ç¤ºæ–‡ä»¶çš„é‡å®šä½å…¥å£ã€‚å¦‚æœå’Œ-dæˆ–è€…-Dä¸€èµ·ä½¿ç”¨ï¼Œé‡å®šä½éƒ¨åˆ†ä»¥åæ±‡ç¼–åçš„æ ¼å¼æ˜¾ç¤ºå‡ºæ¥ã€‚ --dynamic-reloc -R æ˜¾ç¤ºæ–‡ä»¶çš„åŠ¨æ€é‡å®šä½å…¥å£ï¼Œä»…ä»…å¯¹äºåŠ¨æ€ç›®æ ‡æ–‡ä»¶æ„ä¹‰ï¼Œæ¯”å¦‚æŸäº›å…±äº«åº“ã€‚ -s --full-contents æ˜¾ç¤ºæŒ‡å®šsectionçš„å®Œæ•´å†…å®¹ã€‚é»˜è®¤æ‰€æœ‰çš„éç©ºsectionéƒ½ä¼šè¢«æ˜¾ç¤ºã€‚ -S --source å°½å¯èƒ½åæ±‡ç¼–å‡ºæºä»£ç ï¼Œå°¤å…¶å½“ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šäº†-gè¿™ç§è°ƒè¯•å‚æ•°æ—¶ï¼Œæ•ˆæœæ¯”è¾ƒæ˜æ˜¾ã€‚éšå«äº†-då‚æ•°ã€‚ --show-raw-insn åæ±‡ç¼–çš„æ—¶å€™ï¼Œæ˜¾ç¤ºæ¯æ¡æ±‡ç¼–æŒ‡ä»¤å¯¹åº”çš„æœºå™¨ç ï¼Œå¦‚ä¸æŒ‡å®š--prefix-addressesï¼Œè¿™å°†æ˜¯ç¼ºçœé€‰é¡¹ã€‚ --no-show-raw-insn åæ±‡ç¼–æ—¶ï¼Œä¸æ˜¾ç¤ºæ±‡ç¼–æŒ‡ä»¤çš„æœºå™¨ç ï¼Œå¦‚ä¸æŒ‡å®š--prefix-addressesï¼Œè¿™å°†æ˜¯ç¼ºçœé€‰é¡¹ã€‚ --start-address=address ä»æŒ‡å®šåœ°å€å¼€å§‹æ˜¾ç¤ºæ•°æ®ï¼Œè¯¥é€‰é¡¹å½±å“-dã€-rå’Œ-sé€‰é¡¹çš„è¾“å‡ºã€‚ --stop-address=address æ˜¾ç¤ºæ•°æ®ç›´åˆ°æŒ‡å®šåœ°å€ä¸ºæ­¢ï¼Œè¯¥é¡¹å½±å“-dã€-rå’Œ-sé€‰é¡¹çš„è¾“å‡ºã€‚ -t --syms æ˜¾ç¤ºæ–‡ä»¶çš„ç¬¦å·è¡¨å…¥å£ã€‚ç±»ä¼¼äºnm -sæä¾›çš„ä¿¡æ¯ -T --dynamic-syms æ˜¾ç¤ºæ–‡ä»¶çš„åŠ¨æ€ç¬¦å·è¡¨å…¥å£ï¼Œä»…ä»…å¯¹åŠ¨æ€ç›®æ ‡æ–‡ä»¶æ„ä¹‰ï¼Œæ¯”å¦‚æŸäº›å…±äº«åº“ã€‚å®ƒæ˜¾ç¤ºçš„ä¿¡æ¯ç±»ä¼¼äº nm -D|--dynamic æ˜¾ç¤ºçš„ä¿¡æ¯ã€‚ -V --version ç‰ˆæœ¬ä¿¡æ¯ --all-headers -x æ˜¾ç¤ºæ‰€å¯ç”¨çš„å¤´ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¬¦å·è¡¨ã€é‡å®šä½å…¥å£ã€‚-x ç­‰ä»·äº-a -f -h -r -t åŒæ—¶æŒ‡å®šã€‚ -z --disassemble-zeroes ä¸€èˆ¬åæ±‡ç¼–è¾“å‡ºå°†çœç•¥å¤§å—çš„é›¶ï¼Œè¯¥é€‰é¡¹ä½¿å¾—è¿™äº›é›¶å—ä¹Ÿè¢«åæ±‡ç¼–ã€‚ @file å¯ä»¥å°†é€‰é¡¹é›†ä¸­åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨è¿™ä¸ª@fileé€‰é¡¹è½½å…¥ã€‚","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"objdump","slug":"stm32/objdump","permalink":"http://example.com/categories/stm32/objdump/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"objdump","slug":"objdump","permalink":"http://example.com/tags/objdump/"}]},{"title":"HardFault","slug":"stm32/hardfault","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:52:04.231Z","comments":true,"path":"2024/12/26/stm32/hardfault/","permalink":"http://example.com/2024/12/26/stm32/hardfault/","excerpt":"","text":"HardFaultMSPçš„å«ä¹‰æ˜¯Main_Stack_Pointerï¼Œå³ä¸»æ ˆPSPçš„å«ä¹‰æ˜¯ Process_Stack_Pointer,å³ä»»åŠ¡æ ˆ armcortex-mçš„è®¾è®¡ï¼Œä¸€å…±æœ‰32ä¸ªå¯„å­˜å™¨13ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œr0-r121ä¸ªæ ˆæŒ‡é’ˆå¯„å­˜å™¨SP(r13)ï¼ŒPSP(SP_process)å’ŒMSP(SP_main)1ä¸ªé“¾æ¥å¯„å­˜å™¨LR(r14)ï¼Œæ‰§è¡Œä¸‹ä¸€çº§å‡½æ•°è‡ªåŠ¨å­˜æ”¾LRå‹æ ˆï¼Œå‡½æ•°è¿”å›çš„æ—¶ä¼šå¼¹å‡ºLRåˆ°PC1ä¸ªç¨‹åºè®¡æ•°å™¨PC(r15)ï¼ŒæŒ‡å‘å½“å‰æŒ‡å‘çš„ç¨‹åºåœ°å€1ä¸ªç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼ˆxPSRï¼‰ r0~r3 ç”¨ä½œä¼ å…¥å‡½æ•°å‚æ•°ï¼Œä¼ å‡ºå‡½æ•°è¿”å›å€¼ã€‚åœ¨å­ç¨‹åºè°ƒç”¨ä¹‹é—´ï¼Œå¯ä»¥å°† r0-r3 ç”¨äºä»»ä½•ç”¨é€”ã€‚è¢«è°ƒç”¨å‡½æ•°åœ¨è¿”å›ä¹‹å‰ä¸å¿…æ¢å¤ r0-r3ã€‚å¦‚æœè°ƒç”¨å‡½æ•°éœ€è¦å†æ¬¡ä½¿ç”¨ r0-r3 çš„å†…å®¹ï¼Œåˆ™å®ƒå¿…é¡»ä¿ç•™è¿™äº›å†…å®¹ã€‚ r4~r11 è¢«ç”¨æ¥å­˜æ”¾å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚å¦‚æœè¢«è°ƒç”¨å‡½æ•°ä½¿ç”¨äº†è¿™äº›å¯„å­˜å™¨ï¼Œå®ƒåœ¨è¿”å›ä¹‹å‰å¿…é¡»æ¢å¤è¿™äº›å¯„å­˜å™¨çš„å€¼ã€‚ r12 æ˜¯å†…éƒ¨è°ƒç”¨æš‚æ—¶å¯„å­˜å™¨ ipã€‚å®ƒåœ¨è¿‡ç¨‹é“¾æ¥èƒ¶åˆä»£ç ï¼ˆä¾‹å¦‚ï¼Œäº¤äº’æ“ä½œèƒ¶åˆä»£ç ï¼‰ä¸­ç”¨äºæ­¤è§’è‰²ã€‚åœ¨è¿‡ç¨‹è°ƒç”¨ä¹‹é—´ï¼Œå¯ä»¥å°†å®ƒç”¨äºä»»ä½•ç”¨é€”ã€‚è¢«è°ƒç”¨å‡½æ•°åœ¨è¿”å›ä¹‹å‰ä¸å¿…æ¢å¤ r12ã€‚ r13 æ˜¯æ ˆæŒ‡é’ˆ spã€‚å®ƒä¸èƒ½ç”¨äºä»»ä½•å…¶å®ƒç”¨é€”ã€‚sp ä¸­å­˜æ”¾çš„å€¼åœ¨é€€å‡ºè¢«è°ƒç”¨å‡½æ•°æ—¶å¿…é¡»ä¸è¿›å…¥æ—¶çš„å€¼ç›¸åŒã€‚ r14 æ˜¯é“¾æ¥å¯„å­˜å™¨ lrã€‚å¦‚æœæ‚¨ä¿å­˜äº†è¿”å›åœ°å€ï¼Œåˆ™å¯ä»¥åœ¨è°ƒç”¨ä¹‹é—´å°† r14 ç”¨äºå…¶å®ƒç”¨é€”ï¼Œç¨‹åºè¿”å›æ—¶è¦æ¢å¤ r15 æ˜¯ç¨‹åºè®¡æ•°å™¨ PCã€‚å®ƒä¸èƒ½ç”¨äºä»»ä½•å…¶å®ƒç”¨é€”ã€‚ æ³¨æ„ï¼šåœ¨ä¸­æ–­ç¨‹åºä¸­ï¼Œæ‰€æœ‰çš„å¯„å­˜å™¨éƒ½å¿…é¡»ä¿æŠ¤ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¿æŠ¤R4ï½R11 ä¸åŒçš„æ¨¡å¼ä¸‹ï¼ŒR0-R12ã€SPã€LRæ˜¯å„æœ‰ä¸€ä»½çš„ï¼Œæ‰€ä»¥è¿™æ ·ç®—ä¸‹æ¥ï¼Œæ€»å…±æ˜¯32ä¸ªå¯„å­˜å™¨ï¼Œä½†æ˜¯åœ¨ä¸åŒçš„æ¨¡å¼ä¸‹ï¼Œå¹¶ä¸èƒ½å®Œå…¨çœ‹åˆ°è¿™32ä¸ªå¯„å­˜å™¨çš„çŠ¶æ€ï¼Œåªèƒ½çœ‹åˆ°å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ è‡ªåŠ¨å‹æ ˆå¤„ç†ï¼šxPSR-&gt;PC-&gt;LR-&gt;r12-&gt;r3-&gt;r2-&gt;r1-&gt;r0 xPSPå¯„å­˜å™¨çš„ bit9è¢«ç”¨æ¥æŒ‡ç¤º SPæ˜¯å¦éœ€è¦å¯¹é½ï¼Œbit9å¦‚æœä¸º1çš„è¯å°±éœ€è¦åŒå­—å¯¹é½å¦‚æœä¸º0çš„è¯å°±ä¸éœ€è¦åŒå­—å¯¹é½ å½“è§¦å‘äº†PendSVå¼‚å¸¸è¿›å…¥ä¸­æ–­åï¼Œç³»ç»Ÿé»˜è®¤æ˜¯å‡ºäºMSPçŠ¶æ€çš„ã€‚å½“åˆ‡æ¢ä»»åŠ¡æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨PSPä½œä¸ºä»»åŠ¡å †æ ˆæŒ‡é’ˆã€‚ ä¸€èˆ¬ä½¿ç”¨ä¿®æ”¹LRå¯„å­˜å™¨çš„å€¼æ¥æ”¹å˜SPä½¿ç”¨MSPè¿˜æ˜¯PSP. LR &#x3D;0xFFFFFFF9 ä½¿ç”¨MSPå †æ ˆæŒ‡é’ˆ LR &#x3D;0xFFFFFFFD ä½¿ç”¨PSPå †æ ˆæŒ‡é’ˆ æ‰€ä»¥ä¸€èˆ¬PendSVä¸­ä»»åŠ¡å †æ ˆå¤„ç†å®Œæ¯•åï¼Œéœ€è¦ä½¿ç”¨LDR LRï¼Œ&#x3D;0xFFFFFFFDæŒ‡ä»¤è¿›è¡ŒPSPä»»åŠ¡å †æ ˆçš„é€‰æ‹©ã€‚å†æ‰§è¡ŒBX LR æŒ‡ä»¤ï¼Œå³å¯åˆ‡æ¢åˆ°å †æ ˆä¿å­˜çš„ä»»åŠ¡ä¸­å» LRå¯„å­˜å™¨è®°å½•å‡½æ•°æˆ–å­ç¨‹åºè°ƒç”¨åçš„è¿”å›åœ°å€ï¼Œè‹¥å‡½æ•°åˆè°ƒç”¨äº†å‡½æ•°æˆ–å­ç¨‹åºï¼Œä¸ºäº†ä¿è¯LRå€¼ä¸ä¸¢å¤±ï¼Œéœ€è¦å°†LRå…¥æ ˆ.åœ¨å¼‚å¸¸å¤„ç†æ—¶LRä¼šè¢«æ›´æ–°ä¸ºç‰¹æ®Šçš„EXC_RETURNæ•°å€¼ã€‚å…¸å‹çš„æœ‰å¦‚ä¸‹3ç§å€¼ï¼š 0xFFFFFFF1 ä¸­æ–­è¿”å›æ—¶ä»MSPæ¢å¤æ ˆï¼Œè¿”å›ä¹‹åæ“ä½œæ¨¡å¼ä¸ºå¤„ç†æ¨¡å¼ï¼Œä½¿ç”¨MSPæ ˆï¼Œå³åœ¨ä¸­æ–­åµŒå¥—æƒ…å†µä¸‹ï¼Œè¿”å›ä¸Šä¸€çº§ä¸­æ–­ 0xFFFFFFF9 ä¸­æ–­è¿”å›æ—¶ä»MSPæ¢å¤æ ˆï¼Œè¿”å›ä¹‹åæ“ä½œæ¨¡å¼ä¸ºçº¿ç¨‹æ¨¡å¼ï¼Œä½¿ç”¨MSPæ ˆï¼Œè¯¥æƒ…å†µåœ¨åªä½¿ç”¨MSPä¸ä½¿ç”¨PSPæ—¶å‘ç”Ÿ 0xFFFFFFFD ä¸­æ–­è¿”å›æ—¶ä»PSPæ¢å¤æ ˆï¼Œè¿”å›ä¹‹åæ“ä½œæ¨¡å¼ä¸ºçº¿ç¨‹æ¨¡å¼ï¼Œä½¿ç”¨PSPæ ˆï¼Œå³ä¸€èˆ¬çš„ä»ä¸­æ–­è¿”å›ç”¨æˆ·çº¿ç¨‹çš„æƒ…å†µ å‚è€ƒ GCCä¸‹daplink 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354__STATIC_INLINE uint32_t __get_LR(void)&#123; register uint32_t __regLr __ASM(&quot;lr&quot;); return(__regLr);&#125;void HardFault_Handler(void)&#123; /* USER CODE BEGIN HardFault_IRQn 0 */ uint32_t stk_ptr; uint32_t _lr = __get_LR(); uint32_t * stack = (uint32_t *)__get_MSP(); if ((_lr &amp; 0xF) == 0xD) &#123; //process stack stack = (uint32_t *)__get_PSP(); // printf(&quot;PSP %x\\r\\n&quot;,stack); // for (uint8_t i = 0;i &lt; 12;i++) // printf(&quot;\\t%0x&quot;,*(volatile uint32_t *)((uint32_t)stack+i*4)); &#125; else&#123; // printf(&quot;MSP\\r\\n&quot;); // for (uint8_t i = 0;i &lt; 12;i++) // printf(&quot;\\t%0x&quot;,*(volatile uint32_t *)((uint32_t)stack+i*4)); &#125; //calculate stack ptr before fault stk_ptr = (uint32_t)stack + 0x20; if ((stack[7] &amp; 0x200) != 0) &#123; //xpsr bit 9 align stk_ptr += 0x4; &#125; if ((_lr &amp; 0x10) == 0) &#123; //fp stk_ptr += 0x48; &#125; for (uint8_t i = 0;i &lt; 6;i++) printf(&quot;\\t%0x&quot;,*(volatile uint32_t *)((uint32_t)stk_ptr+i*4)); printf(&quot;----------------\\r\\n&quot;); config_ram_add_hexdump(_lr); //EXC_RETURN config_ram_add_hexdump(__get_PSP()); config_ram_add_hexdump(__get_MSP()); config_ram_add_hexdump(__get_CONTROL()); config_ram_add_hexdump(stk_ptr); //SP config_ram_add_hexdump(stack[5]); //LR config_ram_add_hexdump(stack[6]); //PC config_ram_add_hexdump(stack[7]); //xPSR /* USER CODE END HardFault_IRQn 0 */ while (1) &#123; /* USER CODE BEGIN W1_HardFault_IRQn 0 */ /* USER CODE END W1_HardFault_IRQn 0 */ &#125;&#125; ç®€æ˜“dump 1234567891011121314__USED __NO_RETURN void _fault_handler(uint32_t sp)&#123; printf(&quot;\\narm-none-eabi-addr2line -e _____.elf -a -f %08x\\n&quot;,((uint32_t *)sp)[6]);&#125;void HardFault_Handler(void)&#123; __ASM volatile ( &quot; mov r0,sp \\n\\t&quot; &quot; bl _fault_handler \\n\\t&quot; ); while(1) &#123; &#125;&#125; å…¶ä»–ä¿¡æ¯ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859#define SCB_CFSR_MMFSR_IACCVIOL (0x01 &lt;&lt; 0)#define SCB_CFSR_MMFSR_DACCVIOL (0x01 &lt;&lt; 1)#define SCB_CFSR_MMFSR_MUNSTKERR (0x01 &lt;&lt; 3)#define SCB_CFSR_MMFSR_MSTKERR (0x01 &lt;&lt; 4)#define SCB_CFSR_MMFSR_MMARVALID (0x01 &lt;&lt; 7)#define SCB_CFSR_BFSR_IBUSERR (0x01 &lt;&lt; (0 + 8))#define SCB_CFSR_BFSR_PRECISERR (0x01 &lt;&lt; (1 + 8))#define SCB_CFSR_BFSR_IMPRECISERR (0x01 &lt;&lt; (2 + 8))#define SCB_CFSR_BFSR_UNSTKERR (0x01 &lt;&lt; (3 + 8))#define SCB_CFSR_BFSR_STKERR (0x01 &lt;&lt; (4 + 8))#define SCB_CFSR_BFSR_BFARVALID (0x01 &lt;&lt; (7 + 8))#define SCB_CFSR_UFSR_UNDEFINSTR (0x01 &lt;&lt; (0 + 16))#define SCB_CFSR_UFSR_INVSTATE (0x01 &lt;&lt; (1 + 16))#define SCB_CFSR_UFSR_INVPC (0x01 &lt;&lt; (2 + 16))#define SCB_CFSR_UFSR_NOCP (0x01 &lt;&lt; (3 + 16))#define SCB_CFSR_UFSR_UNALIGNED (0x01 &lt;&lt; (8 + 16))#define SCB_CFSR_UFSR_DIVBYZERO (0x01 &lt;&lt; (9 + 16))void FAULT_PrintFaultRegs(void)&#123; DBG_SendPolling(&quot;MMFSR : %x[%s%s%s%s%s]\\r\\n&quot;, SCB-&gt;CFSR &amp; SCB_CFSR_MEMFAULTSR_Msk, (0 == (SCB_CFSR_MMFSR_IACCVIOL &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;IACCVIOL|&quot;, (0 == (SCB_CFSR_MMFSR_DACCVIOL &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;DACCVIOL|&quot;, (0 == (SCB_CFSR_MMFSR_MUNSTKERR &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;MUNSTKERR|&quot;, (0 == (SCB_CFSR_MMFSR_MSTKERR &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;MSTKERR|&quot;, (0 == (SCB_CFSR_MMFSR_MMARVALID &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;MMARVALID|&quot;); DBG_SendPolling(&quot;BFSR : %x[%s%s%s%s%s%s]\\r\\n&quot;, SCB-&gt;CFSR &amp; SCB_CFSR_BUSFAULTSR_Msk, (0 == (SCB_CFSR_BFSR_IBUSERR &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;IBUSERR|&quot;, (0 == (SCB_CFSR_BFSR_PRECISERR &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;PRECISERR|&quot;, (0 == (SCB_CFSR_BFSR_IMPRECISERR &amp; SCB-&gt;CFSR))? &quot;&quot;:&quot;IMPRECISERR|&quot;, (0 == (SCB_CFSR_BFSR_UNSTKERR &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;UNSTKERR|&quot;, (0 == (SCB_CFSR_BFSR_STKERR &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;STKERR|&quot;, (0 == (SCB_CFSR_BFSR_BFARVALID &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;BFARVALID|&quot;); DBG_SendPolling(&quot;UFSR : %x[%s%s%s%s%s%s]\\r\\n&quot;, SCB-&gt;CFSR &amp; SCB_CFSR_USGFAULTSR_Msk, (0 == (SCB_CFSR_UFSR_UNDEFINSTR &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;UNDEFINSTR|&quot;, (0 == (SCB_CFSR_UFSR_INVSTATE &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;INVSTATE|&quot;, (0 == (SCB_CFSR_UFSR_INVPC &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;INVPC|&quot;, (0 == (SCB_CFSR_UFSR_NOCP &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;NOCP|&quot;, (0 == (SCB_CFSR_UFSR_UNALIGNED &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;UNALIGNED|&quot;, (0 == (SCB_CFSR_UFSR_DIVBYZERO &amp; SCB-&gt;CFSR)) ? &quot;&quot;:&quot;DIVBYZERO|&quot;); DBG_SendPolling(&quot;HFSR : %x[%s%s%s]\\r\\n&quot;, SCB-&gt;HFSR, (0 == (SCB_HFSR_DEBUGEVT_Msk &amp; SCB-&gt;HFSR)) ? &quot;&quot;:&quot;DEBUGEVT|&quot;, (0 == (SCB_HFSR_FORCED_Msk &amp; SCB-&gt;HFSR)) ? &quot;&quot;:&quot;FORCED|&quot;, (0 == (SCB_HFSR_VECTTBL_Msk &amp; SCB-&gt;HFSR)) ? &quot;&quot;:&quot;VECTTBL|&quot;); DBG_SendPolling(&quot;DFSR : %x\\r\\n&quot;, SCB-&gt;DFSR); DBG_SendPolling(&quot;MMFAR : %x\\r\\n&quot;, SCB-&gt;MMFAR); DBG_SendPolling(&quot;BFAR : %x\\r\\n&quot;, SCB-&gt;BFAR);&#125;","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"HardFault","slug":"stm32/HardFault","permalink":"http://example.com/categories/stm32/HardFault/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"HardFault","slug":"HardFault","permalink":"http://example.com/tags/HardFault/"}]},{"title":"é“¾æ¥æ–‡ä»¶","slug":"stm32/ld","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:04:29.537Z","comments":true,"path":"2024/12/26/stm32/ld/","permalink":"http://example.com/2024/12/26/stm32/ld/","excerpt":"","text":"é“¾æ¥æ–‡ä»¶test.cç¼–è¯‘æ”¾å…¥ç‰¹å®šä½ç½® script12345678910.ccmram :&#123; . = ALIGN(4); _sccmram = .; /* create a global symbol at ccmram start */ *(.ccmram) *(.ccmram*) *test.o(*.bss* *.data*)/*ç¼–è¯‘çš„ç»“æœ*/ . = ALIGN(4); _eccmram = .; /* create a global symbol at ccmram end */&#125; &gt;CCMRAM AT&gt; FLASH hardfault errorç¡®å®šä½¿ç”¨çš„æ˜¯é‚£ä¸ªå †æ ˆï¼ŒMSPæˆ–è€…æ˜¯PSPï¼Œç¡®å®šä»¥åï¼Œåœ¨å†…å­˜æŸ¥çœ‹çª—å£ï¼Œè¾“å…¥å †æ ˆçš„åœ°å€ï¼Œä»¥è¿™ä¸ªåœ°å€å¼€å§‹çš„8ä¸ª32ä½æ•°å€¼ï¼Œåº”è¯¥ä¾æ¬¡æ˜¯R0,R1,R2,R3,R12,R14,R15,XPSRçš„æ•°å€¼ï¼Œæ®æ­¤åˆ¤å®šä½ çš„å †æ ˆåœ°å€æ˜¯ä¸æ˜¯å¯¹çš„(æœ‰æ—¶éœ€è¦è€ƒè™‘å †æ ˆçš„å¢é•¿æ–¹å‘)ã€‚R14ï¼ŒR15çš„åœ°å€å°±æ˜¯æˆ‘ä»¬å‡ºé”™çš„ä»£ç æ‰€åœ¨çš„åœ°å€ï¼Œéœ€è¦åœ¨è¿™ä¸ªåœ°å€åŸºç¡€ä¸Šï¼Œé¦–å…ˆå¶æ•°å¯¹é½ï¼Œç„¶åå‘ä¸Šå‡å»8ä¸ªå­—èŠ‚ã€‚ éœ€è¦è€ƒè™‘çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨MSPçš„æ—¶å€™ï¼Œæœ‰å‡ºé”™çš„åœ°æ–¹å¹¶ä¸ä¸€å®šåœ¨R14ï¼ŒR15å¤„ï¼Œè€Œæ˜¯åœ¨XPSRå¾€åçš„ç¬¬äºŒä¸ªåœ°å€å¤„ï¼Œåœ¨è¿™ä¸ªé™„è¿‘æŸ¥æ‰¾ï¼Œæ’é™¤æ•…éšœã€‚ 12345678st=&gt;start: å¼€å§‹op=&gt;operation: My Operationcond=&gt;condition: Yes or No?e=&gt;endst-&gt;op-&gt;condcond(yes)-&gt;econd(no)-&gt;op&amp; é—ªå­˜è£…è½½è½¯ä»¶STM32CubeProgrammerçš„é—ªå­˜è£…è½½è½¯ä»¶ IARç¨‹åºæ”¾å…¥.bssæ®µ 12#pragma section=&quot;.bss&quot; openocdæ·»åŠ ç¬¬ä¸‰æ–¹è®¾å¤‡ åœ¨.&#x2F;tcl&#x2F;targetä¸­,æ·»åŠ è‡ªå·±è®¾å¤‡çš„.cfgæ–‡ä»¶,æ­¤æ–‡ä»¶ç”¨äºç¼–è¯‘åä¼ é€’åˆ°scriptsä¸­ä¾›ç”¨æˆ·è°ƒç”¨ï¼Œæ­¤æ–‡ä»¶ç”¨äºç¼–è¯‘åä¼ é€’åˆ°scriptsä¸­ä¾›ç”¨æˆ·è°ƒç”¨ åœ¨.&#x2F;src&#x2F;flash&#x2F;norä¸­,æ·»åŠ è‡ªå·±è®¾å¤‡çš„.cæ–‡ä»¶,æ­¤æ–‡ä»¶ç”¨äºå‘ŠçŸ¥openocdä½ æ–‡ä»¶çš„flashçƒ§å½•æµç¨‹ï¼Œæ­¤æ–‡ä»¶ç”¨äºå‘ŠçŸ¥openocdä½ æ–‡ä»¶çš„flashçƒ§å½•æµç¨‹ åœ¨ &#x2F;src&#x2F;flash&#x2F;nor&#x2F;drivers.cä¸­,æ·»åŠ è‡ªå·±è®¾å¤‡çš„è®¾å¤‡å,æ­¤å¤„è®©openocdçŸ¥æ™“ä½ çš„è®¾å¤‡ï¼Œæ­¤å¤„è®©openocdçŸ¥æ™“ä½ çš„è®¾å¤‡. åœ¨flash&#x2F;norä¸­,æ›´æ”¹Makefile.am,ä»¤openocdçš„ç¼–è¯‘è¿‡ç¨‹å¯ä»¥å¼•ç”¨åˆ°ä½ åˆšåˆšæ·»åŠ çš„æ–‡ä»¶.","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"}]},{"title":"mqtt","slug":"stm32/lwip mqtt","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:53:11.743Z","comments":true,"path":"2024/12/26/stm32/lwip mqtt/","permalink":"http://example.com/2024/12/26/stm32/lwip%20mqtt/","excerpt":"","text":"LWIP MQTTè°ƒè¯•lwipä»¥å¤ªç½‘MQTTè¿æ¥æœåŠ¡å™¨ï¼Œå‘ç°å¦‚æœæœåŠ¡å™¨ä¸éœ€è¦ç”¨æˆ·åå’Œå¯†ç æƒé™åˆ™å¯ä»¥æ­£å¸¸è¿æ¥MQTTæœåŠ¡å™¨ï¼Œå¹¶èƒ½å¤Ÿå‘å¸ƒå’Œè®¢é˜…æ¶ˆæ¯ï¼Œä½†è¿æ¥éœ€è¦ç”¨æˆ·åå’Œå¯†ç çš„æœåŠ¡å™¨ï¼Œåˆ™æç¤ºè®¤è¯å¤±è´¥ã€‚ åˆ†æå‘ç°å‡½æ•°mqtt_client_connectæ²¡æœ‰å¤„ç†clientç»“æ„ä½“ä¸­çš„ç”¨æˆ·åå’Œå¯†ç å­—æ®µ åŸå‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147err_tmqtt_client_connect(mqtt_client_t *client, const ip_addr_t *ip_addr, u16_t port, mqtt_connection_cb_t cb, void *arg, const struct mqtt_connect_client_info_t *client_info)&#123; err_t err; size_t len; u16_t client_id_length; /* Length is the sum of 2+&quot;MQTT&quot;, protocol level, flags and keep alive */ u16_t remaining_length = 2 + 4 + 1 + 1 + 2; u8_t flags = 0, will_topic_len = 0, will_msg_len = 0; u16_t client_user_len = 0, client_pass_len = 0; LWIP_ASSERT_CORE_LOCKED(); LWIP_ASSERT(&quot;mqtt_client_connect: client != NULL&quot;, client != NULL); LWIP_ASSERT(&quot;mqtt_client_connect: ip_addr != NULL&quot;, ip_addr != NULL); LWIP_ASSERT(&quot;mqtt_client_connect: client_info != NULL&quot;, client_info != NULL); LWIP_ASSERT(&quot;mqtt_client_connect: client_info-&gt;client_id != NULL&quot;, client_info-&gt;client_id != NULL); if (client-&gt;conn_state != TCP_DISCONNECTED) &#123; LWIP_DEBUGF(MQTT_DEBUG_WARN, (&quot;mqtt_client_connect: Already connected\\n&quot;)); return ERR_ISCONN; &#125; /* Wipe clean */ memset(client, 0, sizeof(mqtt_client_t)); client-&gt;connect_arg = arg; client-&gt;connect_cb = cb; client-&gt;keep_alive = client_info-&gt;keep_alive; mqtt_init_requests(client-&gt;req_list, LWIP_ARRAYSIZE(client-&gt;req_list)); /* Build connect message */ if (client_info-&gt;will_topic != NULL &amp;&amp; client_info-&gt;will_msg != NULL) &#123; flags |= MQTT_CONNECT_FLAG_WILL; flags |= (client_info-&gt;will_qos &amp; 3) &lt;&lt; 3; if (client_info-&gt;will_retain) &#123; flags |= MQTT_CONNECT_FLAG_WILL_RETAIN; &#125; len = strlen(client_info-&gt;will_topic); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;will_topic length overflow&quot;, len &lt;= 0xFF, return ERR_VAL); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;will_topic length must be &gt; 0&quot;, len &gt; 0, return ERR_VAL); will_topic_len = (u8_t)len; len = strlen(client_info-&gt;will_msg); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;will_msg length overflow&quot;, len &lt;= 0xFF, return ERR_VAL); will_msg_len = (u8_t)len; len = remaining_length + 2 + will_topic_len + 2 + will_msg_len; LWIP_ERROR(&quot;mqtt_client_connect: remaining_length overflow&quot;, len &lt;= 0xFFFF, return ERR_VAL); remaining_length = (u16_t)len; &#125; if (client_info-&gt;client_user != NULL) &#123; flags |= MQTT_CONNECT_FLAG_USERNAME; len = strlen(client_info-&gt;client_user); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;client_user length overflow&quot;, len &lt;= 0xFFFF, return ERR_VAL); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;client_user length must be &gt; 0&quot;, len &gt; 0, return ERR_VAL); client_user_len = (u16_t)len; len = remaining_length + 2 + client_user_len; LWIP_ERROR(&quot;mqtt_client_connect: remaining_length overflow&quot;, len &lt;= 0xFFFF, return ERR_VAL); remaining_length = (u16_t)len; &#125; if (client_info-&gt;client_pass != NULL) &#123; flags |= MQTT_CONNECT_FLAG_PASSWORD; len = strlen(client_info-&gt;client_pass); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;client_pass length overflow&quot;, len &lt;= 0xFFFF, return ERR_VAL); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;client_pass length must be &gt; 0&quot;, len &gt; 0, return ERR_VAL); client_pass_len = (u16_t)len; len = remaining_length + 2 + client_pass_len; LWIP_ERROR(&quot;mqtt_client_connect: remaining_length overflow&quot;, len &lt;= 0xFFFF, return ERR_VAL); remaining_length = (u16_t)len; &#125; /* Don&#x27;t complicate things, always connect using clean session */ flags |= MQTT_CONNECT_FLAG_CLEAN_SESSION; len = strlen(client_info-&gt;client_id); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;client_id length overflow&quot;, len &lt;= 0xFFFF, return ERR_VAL); client_id_length = (u16_t)len; len = remaining_length + 2 + client_id_length; LWIP_ERROR(&quot;mqtt_client_connect: remaining_length overflow&quot;, len &lt;= 0xFFFF, return ERR_VAL); remaining_length = (u16_t)len; if (mqtt_output_check_space(&amp;client-&gt;output, remaining_length) == 0) &#123; return ERR_MEM; &#125;#if LWIP_ALTCP &amp;&amp; LWIP_ALTCP_TLS if (client_info-&gt;tls_config) &#123; client-&gt;conn = altcp_tls_new(client_info-&gt;tls_config, IP_GET_TYPE(ip_addr)); &#125; else#endif &#123; client-&gt;conn = altcp_tcp_new_ip_type(IP_GET_TYPE(ip_addr)); &#125; if (client-&gt;conn == NULL) &#123; return ERR_MEM; &#125; /* Set arg pointer for callbacks */ altcp_arg(client-&gt;conn, client); /* Any local address, pick random local port number */ err = altcp_bind(client-&gt;conn, IP_ADDR_ANY, 0); if (err != ERR_OK) &#123; LWIP_DEBUGF(MQTT_DEBUG_WARN, (&quot;mqtt_client_connect: Error binding to local ip/port, %d\\n&quot;, err)); goto tcp_fail; &#125; LWIP_DEBUGF(MQTT_DEBUG_TRACE, (&quot;mqtt_client_connect: Connecting to host: %s at port:%&quot;U16_F&quot;\\n&quot;, ipaddr_ntoa(ip_addr), port)); /* Connect to server */ err = altcp_connect(client-&gt;conn, ip_addr, port, mqtt_tcp_connect_cb); if (err != ERR_OK) &#123; LWIP_DEBUGF(MQTT_DEBUG_TRACE, (&quot;mqtt_client_connect: Error connecting to remote ip/port, %d\\n&quot;, err)); goto tcp_fail; &#125; /* Set error callback */ altcp_err(client-&gt;conn, mqtt_tcp_err_cb); client-&gt;conn_state = TCP_CONNECTING; /* Append fixed header */ mqtt_output_append_fixed_header(&amp;client-&gt;output, MQTT_MSG_TYPE_CONNECT, 0, 0, 0, remaining_length); /* Append Protocol string */ mqtt_output_append_string(&amp;client-&gt;output, &quot;MQTT&quot;, 4); /* Append Protocol level */ mqtt_output_append_u8(&amp;client-&gt;output, 4); /* Append connect flags */ mqtt_output_append_u8(&amp;client-&gt;output, flags); /* Append keep-alive */ mqtt_output_append_u16(&amp;client-&gt;output, client_info-&gt;keep_alive); /* Append client id */ mqtt_output_append_string(&amp;client-&gt;output, client_info-&gt;client_id, client_id_length); /* Append will message if used */ if ((flags &amp; MQTT_CONNECT_FLAG_WILL) != 0) &#123; mqtt_output_append_string(&amp;client-&gt;output, client_info-&gt;will_topic, will_topic_len); mqtt_output_append_string(&amp;client-&gt;output, client_info-&gt;will_msg, will_msg_len); &#125; /* Append user name if given */ if ((flags &amp; MQTT_CONNECT_FLAG_USERNAME) != 0) &#123; mqtt_output_append_string(&amp;client-&gt;output, client_info-&gt;client_user, client_user_len); &#125; /* Append password if given */ if ((flags &amp; MQTT_CONNECT_FLAG_PASSWORD) != 0) &#123; mqtt_output_append_string(&amp;client-&gt;output, client_info-&gt;client_pass, client_pass_len); &#125; return ERR_OK;tcp_fail: altcp_abort(client-&gt;conn); client-&gt;conn = NULL; return err;&#125; ä¿®æ”¹å123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132err_tmqtt_client_connect(mqtt_client_t *client, const ip_addr_t *ip_addr, u16_t port, mqtt_connection_cb_t cb, void *arg, const struct mqtt_connect_client_info_t *client_info)&#123; err_t err; size_t len; u16_t client_id_length; /* Length is the sum of 2+&quot;MQTT&quot;, protocol level, flags and keep alive */ u16_t remaining_length = 2 + 4 + 1 + 1 + 2; u8_t flags = 0, will_topic_len = 0, will_msg_len = 0; LWIP_ASSERT(&quot;mqtt_client_connect: client != NULL&quot;, client != NULL); LWIP_ASSERT(&quot;mqtt_client_connect: ip_addr != NULL&quot;, ip_addr != NULL); LWIP_ASSERT(&quot;mqtt_client_connect: client_info != NULL&quot;, client_info != NULL); LWIP_ASSERT(&quot;mqtt_client_connect: client_info-&gt;client_id != NULL&quot;, client_info-&gt;client_id != NULL); if (client-&gt;conn_state != TCP_DISCONNECTED) &#123; LWIP_DEBUGF(MQTT_DEBUG_WARN,(&quot;mqtt_client_connect: Already connected\\n&quot;)); return ERR_ISCONN; &#125; /* Wipe clean */ memset(client, 0, sizeof(mqtt_client_t)); client-&gt;connect_arg = arg; client-&gt;connect_cb = cb; client-&gt;keep_alive = client_info-&gt;keep_alive; mqtt_init_requests(client-&gt;req_list); /* Build connect message */ if (client_info-&gt;will_topic != NULL &amp;&amp; client_info-&gt;will_msg != NULL) &#123; flags |= MQTT_CONNECT_FLAG_WILL; flags |= (client_info-&gt;will_qos &amp; 3) &lt;&lt; 3; if (client_info-&gt;will_retain) &#123; flags |= MQTT_CONNECT_FLAG_WILL_RETAIN; &#125; len = strlen(client_info-&gt;will_topic); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;will_topic length overflow&quot;, len &lt;= 0xFF, return ERR_VAL); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;will_topic length must be &gt; 0&quot;, len &gt; 0, return ERR_VAL); will_topic_len = (u8_t)len; len = strlen(client_info-&gt;will_msg); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;will_msg length overflow&quot;, len &lt;= 0xFF, return ERR_VAL); will_msg_len = (u8_t)len; len = remaining_length + 2 + will_topic_len + 2 + will_msg_len; LWIP_ERROR(&quot;mqtt_client_connect: remaining_length overflow&quot;, len &lt;= 0xFFFF, return ERR_VAL); remaining_length = (u16_t)len; &#125; /* Don&#x27;t complicate things, always connect using clean session */ flags |= MQTT_CONNECT_FLAG_CLEAN_SESSION; len = strlen(client_info-&gt;client_id); LWIP_ERROR(&quot;mqtt_client_connect: client_info-&gt;client_id length overflow&quot;, len &lt;= 0xFFFF, return ERR_VAL); client_id_length = (u16_t)len; len = remaining_length + 2 + client_id_length; LWIP_ERROR(&quot;mqtt_client_connect: remaining_length overflow&quot;, len &lt;= 0xFFFF, return ERR_VAL); //------------------------------------------------------------------------------------------------------------------------------- if(client_info-&gt;client_user!=NULL) &#123; flags |= MQTT_CONNECT_FLAG_USERNAME; len+=2 + strlen(client_info-&gt;client_user); &#125; if(client_info-&gt;client_pass!=NULL) &#123; flags |= MQTT_CONNECT_FLAG_PASSWORD; len+=2 + strlen(client_info-&gt;client_pass); &#125;//------------------------------------------------------------------------------------------------------------------------------- remaining_length = (u16_t)len; if (mqtt_output_check_space(&amp;client-&gt;output, remaining_length) == 0) &#123; return ERR_MEM; &#125; client-&gt;conn = tcp_new(); if (client-&gt;conn == NULL) &#123; return ERR_MEM; &#125; /* Set arg pointer for callbacks */ tcp_arg(client-&gt;conn, client); /* Any local address, pick random local port number */ err = tcp_bind(client-&gt;conn, IP_ADDR_ANY, 0); if (err != ERR_OK) &#123; LWIP_DEBUGF(MQTT_DEBUG_WARN,(&quot;mqtt_client_connect: Error binding to local ip/port, %d\\n&quot;, err)); goto tcp_fail; &#125; LWIP_DEBUGF(MQTT_DEBUG_TRACE,(&quot;mqtt_client_connect: Connecting to host: %s at port:%&quot;U16_F&quot;\\n&quot;, ipaddr_ntoa(ip_addr), port)); /* Connect to server */ err = tcp_connect(client-&gt;conn, ip_addr, port, mqtt_tcp_connect_cb); if (err != ERR_OK) &#123; LWIP_DEBUGF(MQTT_DEBUG_TRACE,(&quot;mqtt_client_connect: Error connecting to remote ip/port, %d\\n&quot;, err)); goto tcp_fail; &#125; /* Set error callback */ tcp_err(client-&gt;conn, mqtt_tcp_err_cb); client-&gt;conn_state = TCP_CONNECTING; /* Append fixed header */ mqtt_output_append_fixed_header(&amp;client-&gt;output, MQTT_MSG_TYPE_CONNECT, 0, 0, 0, remaining_length); /* Append Protocol string */ mqtt_output_append_string(&amp;client-&gt;output, &quot;MQTT&quot;, 4); /* Append Protocol level */ mqtt_output_append_u8(&amp;client-&gt;output, 4); /* Append connect flags */ mqtt_output_append_u8(&amp;client-&gt;output, flags); /* Append keep-alive */ mqtt_output_append_u16(&amp;client-&gt;output, client_info-&gt;keep_alive); /* Append client id */ mqtt_output_append_string(&amp;client-&gt;output, client_info-&gt;client_id, client_id_length); /* Append will message if used */ if ((flags &amp; MQTT_CONNECT_FLAG_WILL) != 0) &#123; mqtt_output_append_string(&amp;client-&gt;output, client_info-&gt;will_topic, will_topic_len); mqtt_output_append_string(&amp;client-&gt;output, client_info-&gt;will_msg, will_msg_len); &#125;//------------------------------------------------------------------------------------------------------------------------------- if((flags &amp; MQTT_CONNECT_FLAG_USERNAME) != 0) &#123; mqtt_output_append_string(&amp;client-&gt;output, client_info-&gt;client_user, strlen(client_info-&gt;client_user)); &#125; if((flags &amp; MQTT_CONNECT_FLAG_PASSWORD) != 0) &#123; mqtt_output_append_string(&amp;client-&gt;output, client_info-&gt;client_pass, strlen(client_info-&gt;client_pass)); &#125;//------------------------------------------------------------------------------------------------------------------------------- return ERR_OK;tcp_fail: tcp_abort(client-&gt;conn); client-&gt;conn = NULL; return err;&#125;","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"mqtt","slug":"stm32/mqtt","permalink":"http://example.com/categories/stm32/mqtt/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"mqtt","slug":"mqtt","permalink":"http://example.com/tags/mqtt/"}]},{"title":"HEXæ–‡ä»¶","slug":"stm32/hex","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:52:36.159Z","comments":true,"path":"2024/12/26/stm32/hex/","permalink":"http://example.com/2024/12/26/stm32/hex/","excerpt":"","text":"HEXæ–‡ä»¶ä»¥åŠç‰¹å®šä½ç½®å†™å…¥stm32ç‰¹å®šä½ç½®å†™å…¥æ•°æ®12const char __attribute__((section(&quot;.lua_script&quot;))) script[] = &#123;1,2,3,4,5,6&#125;;//æ•°ç»„åå¯ä»¥å»æ‰ 123456.lua_script 0x08003000 :&#123; . = ALIGN(4); KEEP(*(.lua_script)) . = ALIGN(4);&#125; &gt;FLASH ç¼–è¯‘è¾“å‡ºhex 123456789:082D5400434445460000000065:042D5C00F900000872:042D6000CD0000089A:083000000102030405060000B3:10300800AA550000000000000000000000000000B9:103018000000000000A24A04001000100010001078:043028000010001084:04000005080029893D:00000001FF :083000000102030405060000B3 ç”±äºé“¾æ¥æ–‡ä»¶å¤šå¤„ä½¿ç”¨â€.â€å®šä½ï¼Œé“¾æ¥å™¨é“¾æ¥æ˜¯æŒ‰ç…§SECTIONSé‡Œçš„æ®µé¡ºåºæ’åˆ—çš„ï¼Œå‰é¢çš„æ’åˆ—å®Œä¹‹åå°±èƒ½è®¡ç®—å‡ºå½“å‰åœ°å€ï¼Œç§æœ‰éƒ¨åˆ†æœ€å¥½è‡ªå®šä¹‰æ®µä½ç½®ï¼Œå„ä¸ªæ®µä¸è¦è¶…è¿‡åœ°å€é™åˆ¶å¦‚ï¼š 1234567FLASH_USR (rx) : ORIGIN = 0x8006000, LENGTH = 8K .lua_script 0x8007F00: &#123; . = ALIGN(4); KEEP(*(.lua_script)) . = ALIGN(4); &#125; &gt;FLASH_USR stm32ç‰¹å®šä½ç½®å†™å…¥å‡½æ•°123456.lua_script2 0x80F0100 :&#123; . = ALIGN(4); KEEP(*(.lua_script2)) . = ALIGN(4);&#125; &gt;FLASH_USR è¿è¡Œå‡½æ•°ï¼Œåœ°å€+1 1(*(void(*)())0x80F0100+1)(); é“¾æ¥æ–‡ä»¶è„šæœ¬è¯´æ˜ HEXæ–‡ä»¶ ç¬¬ä¸€ä¸ªå­—èŠ‚0Ã—02è¡¨ç¤ºè¯¥è¡Œæ•°æ®ä¸­æœ‰ä¸¤ä¸ªæ•°æ®ï¼ˆå­—èŠ‚ï¼‰ ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå­—èŠ‚0x00 0x00è¡¨ç¤ºæœ¬è¡Œæ•°æ®çš„èµ·å§‹åœ°å€ä½ ç¬¬å››ä¸ªå­—èŠ‚æœ‰0x00 0x01 0x02 0x03 0x04 0x05ï¼Œåˆ†åˆ«æœ‰ä»¥ä¸‹å«ä¹‰ â€˜00â€™ Data Rrecord: ç”¨æ¥è®°å½•æ•°æ®ï¼ŒHEXæ–‡ä»¶çš„å¤§éƒ¨åˆ†è®°å½•éƒ½æ˜¯æ•°æ®è®°å½• â€˜01â€™ æ–‡ä»¶ç»“æŸè®°å½•ï¼š ç”¨æ¥æ ‡è¯†æ–‡ä»¶ç»“æŸï¼Œæ”¾åœ¨æ–‡ä»¶çš„æœ€åï¼Œæ ‡è¯†HEXæ–‡ä»¶çš„ç»“å°¾ â€˜02â€™ æ‰©å±•æ®µåœ°å€è®°å½•ï¼š ç”¨æ¥æ ‡è¯†æ‰©å±•æ®µåœ°å€çš„è®°å½• â€˜03â€™ å¼€å§‹æ®µåœ°å€è®°å½•ï¼š å¼€å§‹æ®µåœ°å€è®°å½• â€˜04â€™ æ‰©å±•çº¿æ€§åœ°å€è®°å½•ï¼š ç”¨æ¥æ ‡è¯†æ‰©å±•çº¿æ€§åœ°å€çš„è®°å½• â€˜05â€™ å¼€å§‹çº¿æ€§åœ°å€è®°å½•ï¼š å¼€å§‹çº¿æ€§åœ°å€è®°å½• æœ€åä¸€ä¸ªå­—èŠ‚0xf8ä¸ºæ ¡éªŒå’Œã€‚æ ¡éªŒå’Œ&#x3D; 0x100 - ç´¯åŠ å’Œã€‚åœ¨nodepad++ä¸­ï¼Œå¦‚æœè¯¥æ ¡éªŒå’Œä¸æ˜¯ç»¿è‰²ï¼Œåˆ™è¡¨ç¤ºè¯¥æ ¡éªŒå’Œæ˜¯é”™çš„ã€‚ æ³¨æ„ï¼Œ0Ã—04æ ‡è¯†æ‰©å±•çº¿æ€§åœ°å€çš„è®°å½•ï¼Œæ‰€ä»¥å¦‚020000040002f8ä¸­ï¼Œæ‹“å±•åœ°å€æ˜¯0002ã€‚é‚£ä¹ˆç¬¬äºŒè¡Œæ•°æ®çš„èµ·å§‹åœ°å€å°±æ˜¯0002c000ï¼Œå³0x0002c000å¼€å§‹ HEXæ–‡ä»¶è¯¦è§£ å…¶ä»–KEIlç¼–è¯‘stm32ï¼Œå †æ ˆä½¿ç”¨è¶…è¿‡è®¾å®šä¾¿ä¼šæº¢å‡º GCCç¼–è¯‘ï¼Œæ ¹æ®é“¾æ¥æ–‡ä»¶æ’åˆ—å„æ®µï¼Œå †æ ˆå¤§å°è®¾ç½®åªèµ·åˆ°åˆ¤æ–­å¤§å°æ˜¯å¦è¶…è¿‡RAMï¼Œå¯¹ç»“æœæ²¡æœ‰ä»»ä½•å½±å“ ARM ä¹‹ä¸€ ELFæ–‡ä»¶ã€é•œåƒï¼ˆImageï¼‰æ–‡ä»¶ã€å¯æ‰§è¡Œæ–‡ä»¶ã€å¯¹è±¡æ–‡ä»¶ è¯¦è§£ mapæ–‡ä»¶å¯ä»¥çœ‹å‡ºReset_Handlerå¤„å¼€å§‹è¿è¡Œï¼Œç„¶åé¡ºåºè¿›å…¥å‡½æ•°Linker script and memory mapå¯ä»¥çœ‹å‡º__do_global_dtors_auxå‡ºè‡ªgccä¸­crtbegin.o bootloaderåˆå¹¶1234567891011121314151617@echo offset BOOT_HEX=.\\boot.hexset APP_HEX=.\\app.hexset OUT_HEX=.\\out.hexset TEMP=.\\temp.txt:HEX_STEPset var=&quot;:00000001FF&quot;findstr /v %var% &quot;%IAP_HEX%&quot; &gt;&gt;%TEMP%del %OUT_HEX%type %TEMP% %APP_HEX% &gt;&gt; %OUT_HEX%del %TEMP% jlink çƒ§å½•batä¾èµ–jlink.exe JLinkARM.dll 1jlink.exe config.txt config.txt 123456789si 1 // #é€‰æ‹©swdæ¥å£ speed 4000 //è®¾ç½®é€Ÿåº¦device STM32F427IIr //é‡æ–°å¤ä½ç›®æ ‡h //æŒ‚èµ·ç›®æ ‡loadfile &quot;./out.hex&quot;setpc 0x08000000 //è®¾ç½®pcæŒ‡é’ˆgq","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"hex","slug":"stm32/hex","permalink":"http://example.com/categories/stm32/hex/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"hex","slug":"hex","permalink":"http://example.com/tags/hex/"}]},{"title":"stm32å¯åŠ¨","slug":"stm32/start","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:53:31.446Z","comments":true,"path":"2024/12/26/stm32/start/","permalink":"http://example.com/2024/12/26/stm32/start/","excerpt":"","text":"stm32å¯åŠ¨å¯åŠ¨æ–¹å¼ boot0 boot1 å¯åŠ¨æ–¹å¼ 0 x FLASH ä¸»é—ªå­˜å­˜å‚¨å™¨ 1 1 SRAM å†…ç½®SRAM 1 0 ISP ç³»ç»Ÿå­˜å‚¨å™¨ å¯åŠ¨æ–‡ä»¶ å£°æ˜æ ˆé¡¶åœ°å€(gccçš„é“¾æ¥æ–‡ä»¶å·²ç»™) å£°æ˜ä¸­æ–­å‘é‡è¡¨ å†™Reset_Handlerä¸­æ–­æœåŠ¡å‡½æ•°é€»è¾‘ æ¸…ç©º.bssæ®µFLASHä¸­.dataæ®µåŠ è½½å…¥RAMSystemInit,mainå‡½æ•°è·³è½¬ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438 .syntax unified .cpu cortex-m4 .fpu softvfp .thumb.global g_pfnVectors.global Default_Handler/* start address for the initialization values of the .data section.defined in linker script */.word _sidata/* start address for the .data section. defined in linker script */.word _sdata/* end address for the .data section. defined in linker script */.word _edata/* start address for the .bss section. defined in linker script */.word _sbss/* end address for the .bss section. defined in linker script */.word _ebss.equ BootRAM, 0xF1E0F85F/** * @brief This is the code that gets called when the processor first * starts execution following a reset event. Only the absolutely * necessary set is performed, after which the application * supplied main() routine is called. * @param None * @retval : None*/ .section .text.Reset_Handler .weak Reset_Handler .type Reset_Handler, %functionReset_Handler: ldr sp, =_estack /* Atollic update: set stack pointer *//* Copy the data segment initializers from flash to SRAM */ ldr r0, =_sdata/*start data*/ ldr r1, =_edata/*end data */ ldr r2, =_sidata/*start .data */ movs r3, #0 b LoopCopyDataInitCopyDataInit: ldr r4, [r2, r3] str r4, [r0, r3] adds r3, r3, #4LoopCopyDataInit: adds r4, r0, r3 cmp r4, r1 bcc CopyDataInit /* Zero fill the bss segment. */ ldr r2, =_sbss ldr r4, =_ebss movs r3, #0 b LoopFillZerobssFillZerobss: str r3, [r2] adds r2, r2, #4LoopFillZerobss: cmp r2, r4 bcc FillZerobss/* Call the clock system intitialization function.*/ bl SystemInit/* Call static constructors */ bl __libc_init_array/* Call the application&#x27;s entry point.*/ bl mainLoopForever: b LoopForever .size Reset_Handler, .-Reset_Handler/** * @brief This is the code that gets called when the processor receives an * unexpected interrupt. This simply enters an infinite loop, preserving * the system state for examination by a debugger. * * @param None * @retval : None*/ .section .text.Default_Handler,&quot;ax&quot;,%progbitsDefault_Handler:Infinite_Loop: b Infinite_Loop .size Default_Handler, .-Default_Handler/******************************************************************************** The minimal vector table for a Cortex-M4. Note that the proper constructs* must be placed on this to ensure that it ends up at physical address* 0x0000.0000.*******************************************************************************/ .section .isr_vector,&quot;a&quot;,%progbits .type g_pfnVectors, %object .size g_pfnVectors, .-g_pfnVectorsg_pfnVectors: .word _estack .word Reset_Handler .word NMI_Handler .word HardFault_Handler .word MemManage_Handler .word BusFault_Handler .word UsageFault_Handler .word 0 .word 0 .word 0 .word 0 .word SVC_Handler .word DebugMon_Handler .word 0 .word PendSV_Handler .word SysTick_Handler .word WWDG_IRQHandler .word PVD_IRQHandler .word TAMP_STAMP_IRQHandler .word RTC_WKUP_IRQHandler .word FLASH_IRQHandler .word RCC_IRQHandler .word EXTI0_IRQHandler .word EXTI1_IRQHandler .word EXTI2_TSC_IRQHandler .word EXTI3_IRQHandler .word EXTI4_IRQHandler .word DMA1_Channel1_IRQHandler .word DMA1_Channel2_IRQHandler .word DMA1_Channel3_IRQHandler .word DMA1_Channel4_IRQHandler .word DMA1_Channel5_IRQHandler .word DMA1_Channel6_IRQHandler .word DMA1_Channel7_IRQHandler .word ADC1_2_IRQHandler .word USB_HP_CAN_TX_IRQHandler .word USB_LP_CAN_RX0_IRQHandler .word CAN_RX1_IRQHandler .word CAN_SCE_IRQHandler .word EXTI9_5_IRQHandler .word TIM1_BRK_TIM15_IRQHandler .word TIM1_UP_TIM16_IRQHandler .word TIM1_TRG_COM_TIM17_IRQHandler .word TIM1_CC_IRQHandler .word TIM2_IRQHandler .word TIM3_IRQHandler .word TIM4_IRQHandler .word I2C1_EV_IRQHandler .word I2C1_ER_IRQHandler .word I2C2_EV_IRQHandler .word I2C2_ER_IRQHandler .word SPI1_IRQHandler .word SPI2_IRQHandler .word USART1_IRQHandler .word USART2_IRQHandler .word USART3_IRQHandler .word EXTI15_10_IRQHandler .word RTC_Alarm_IRQHandler .word USBWakeUp_IRQHandler .word TIM8_BRK_IRQHandler .word TIM8_UP_IRQHandler .word TIM8_TRG_COM_IRQHandler .word TIM8_CC_IRQHandler .word ADC3_IRQHandler .word 0 .word 0 .word 0 .word SPI3_IRQHandler .word UART4_IRQHandler .word UART5_IRQHandler .word TIM6_DAC_IRQHandler .word TIM7_IRQHandler .word DMA2_Channel1_IRQHandler .word DMA2_Channel2_IRQHandler .word DMA2_Channel3_IRQHandler .word DMA2_Channel4_IRQHandler .word DMA2_Channel5_IRQHandler .word ADC4_IRQHandler .word 0 .word 0 .word COMP1_2_3_IRQHandler .word COMP4_5_6_IRQHandler .word COMP7_IRQHandler .word 0 .word 0 .word 0 .word 0 .word 0 .word 0 .word 0 .word USB_HP_IRQHandler .word USB_LP_IRQHandler .word USBWakeUp_RMP_IRQHandler .word 0 .word 0 .word 0 .word 0 .word FPU_IRQHandler/********************************************************************************* Provide weak aliases for each Exception handler to the Default_Handler.* As they are weak aliases, any function with the same name will override* this definition.********************************************************************************/ .weak NMI_Handler .thumb_set NMI_Handler,Default_Handler .weak HardFault_Handler .thumb_set HardFault_Handler,Default_Handler .weak MemManage_Handler .thumb_set MemManage_Handler,Default_Handler .weak BusFault_Handler .thumb_set BusFault_Handler,Default_Handler .weak UsageFault_Handler .thumb_set UsageFault_Handler,Default_Handler .weak SVC_Handler .thumb_set SVC_Handler,Default_Handler .weak DebugMon_Handler .thumb_set DebugMon_Handler,Default_Handler .weak PendSV_Handler .thumb_set PendSV_Handler,Default_Handler .weak SysTick_Handler .thumb_set SysTick_Handler,Default_Handler .weak WWDG_IRQHandler .thumb_set WWDG_IRQHandler,Default_Handler .weak PVD_IRQHandler .thumb_set PVD_IRQHandler,Default_Handler .weak TAMP_STAMP_IRQHandler .thumb_set TAMP_STAMP_IRQHandler,Default_Handler .weak RTC_WKUP_IRQHandler .thumb_set RTC_WKUP_IRQHandler,Default_Handler .weak FLASH_IRQHandler .thumb_set FLASH_IRQHandler,Default_Handler .weak RCC_IRQHandler .thumb_set RCC_IRQHandler,Default_Handler .weak EXTI0_IRQHandler .thumb_set EXTI0_IRQHandler,Default_Handler .weak EXTI1_IRQHandler .thumb_set EXTI1_IRQHandler,Default_Handler .weak EXTI2_TSC_IRQHandler .thumb_set EXTI2_TSC_IRQHandler,Default_Handler .weak EXTI3_IRQHandler .thumb_set EXTI3_IRQHandler,Default_Handler .weak EXTI4_IRQHandler .thumb_set EXTI4_IRQHandler,Default_Handler .weak DMA1_Channel1_IRQHandler .thumb_set DMA1_Channel1_IRQHandler,Default_Handler .weak DMA1_Channel2_IRQHandler .thumb_set DMA1_Channel2_IRQHandler,Default_Handler .weak DMA1_Channel3_IRQHandler .thumb_set DMA1_Channel3_IRQHandler,Default_Handler .weak DMA1_Channel4_IRQHandler .thumb_set DMA1_Channel4_IRQHandler,Default_Handler .weak DMA1_Channel5_IRQHandler .thumb_set DMA1_Channel5_IRQHandler,Default_Handler .weak DMA1_Channel6_IRQHandler .thumb_set DMA1_Channel6_IRQHandler,Default_Handler .weak DMA1_Channel7_IRQHandler .thumb_set DMA1_Channel7_IRQHandler,Default_Handler .weak ADC1_2_IRQHandler .thumb_set ADC1_2_IRQHandler,Default_Handler .weak USB_HP_CAN_TX_IRQHandler .thumb_set USB_HP_CAN_TX_IRQHandler,Default_Handler .weak USB_LP_CAN_RX0_IRQHandler .thumb_set USB_LP_CAN_RX0_IRQHandler,Default_Handler .weak CAN_RX1_IRQHandler .thumb_set CAN_RX1_IRQHandler,Default_Handler .weak CAN_SCE_IRQHandler .thumb_set CAN_SCE_IRQHandler,Default_Handler .weak EXTI9_5_IRQHandler .thumb_set EXTI9_5_IRQHandler,Default_Handler .weak TIM1_BRK_TIM15_IRQHandler .thumb_set TIM1_BRK_TIM15_IRQHandler,Default_Handler .weak TIM1_UP_TIM16_IRQHandler .thumb_set TIM1_UP_TIM16_IRQHandler,Default_Handler .weak TIM1_TRG_COM_TIM17_IRQHandler .thumb_set TIM1_TRG_COM_TIM17_IRQHandler,Default_Handler .weak TIM1_CC_IRQHandler .thumb_set TIM1_CC_IRQHandler,Default_Handler .weak TIM2_IRQHandler .thumb_set TIM2_IRQHandler,Default_Handler .weak TIM3_IRQHandler .thumb_set TIM3_IRQHandler,Default_Handler .weak TIM4_IRQHandler .thumb_set TIM4_IRQHandler,Default_Handler .weak I2C1_EV_IRQHandler .thumb_set I2C1_EV_IRQHandler,Default_Handler .weak I2C1_ER_IRQHandler .thumb_set I2C1_ER_IRQHandler,Default_Handler .weak I2C2_EV_IRQHandler .thumb_set I2C2_EV_IRQHandler,Default_Handler .weak I2C2_ER_IRQHandler .thumb_set I2C2_ER_IRQHandler,Default_Handler .weak SPI1_IRQHandler .thumb_set SPI1_IRQHandler,Default_Handler .weak SPI2_IRQHandler .thumb_set SPI2_IRQHandler,Default_Handler .weak USART1_IRQHandler .thumb_set USART1_IRQHandler,Default_Handler .weak USART2_IRQHandler .thumb_set USART2_IRQHandler,Default_Handler .weak USART3_IRQHandler .thumb_set USART3_IRQHandler,Default_Handler .weak EXTI15_10_IRQHandler .thumb_set EXTI15_10_IRQHandler,Default_Handler .weak RTC_Alarm_IRQHandler .thumb_set RTC_Alarm_IRQHandler,Default_Handler .weak USBWakeUp_IRQHandler .thumb_set USBWakeUp_IRQHandler,Default_Handler .weak TIM8_BRK_IRQHandler .thumb_set TIM8_BRK_IRQHandler,Default_Handler .weak TIM8_UP_IRQHandler .thumb_set TIM8_UP_IRQHandler,Default_Handler .weak TIM8_TRG_COM_IRQHandler .thumb_set TIM8_TRG_COM_IRQHandler,Default_Handler .weak TIM8_CC_IRQHandler .thumb_set TIM8_CC_IRQHandler,Default_Handler .weak ADC3_IRQHandler .thumb_set ADC3_IRQHandler,Default_Handler .weak SPI3_IRQHandler .thumb_set SPI3_IRQHandler,Default_Handler .weak UART4_IRQHandler .thumb_set UART4_IRQHandler,Default_Handler .weak UART5_IRQHandler .thumb_set UART5_IRQHandler,Default_Handler .weak TIM6_DAC_IRQHandler .thumb_set TIM6_DAC_IRQHandler,Default_Handler .weak TIM7_IRQHandler .thumb_set TIM7_IRQHandler,Default_Handler .weak DMA2_Channel1_IRQHandler .thumb_set DMA2_Channel1_IRQHandler,Default_Handler .weak DMA2_Channel2_IRQHandler .thumb_set DMA2_Channel2_IRQHandler,Default_Handler .weak DMA2_Channel3_IRQHandler .thumb_set DMA2_Channel3_IRQHandler,Default_Handler .weak DMA2_Channel4_IRQHandler .thumb_set DMA2_Channel4_IRQHandler,Default_Handler .weak DMA2_Channel5_IRQHandler .thumb_set DMA2_Channel5_IRQHandler,Default_Handler .weak ADC4_IRQHandler .thumb_set ADC4_IRQHandler,Default_Handler .weak COMP1_2_3_IRQHandler .thumb_set COMP1_2_3_IRQHandler,Default_Handler .weak COMP4_5_6_IRQHandler .thumb_set COMP4_5_6_IRQHandler,Default_Handler .weak COMP7_IRQHandler .thumb_set COMP7_IRQHandler,Default_Handler .weak USB_HP_IRQHandler .thumb_set USB_HP_IRQHandler,Default_Handler .weak USB_LP_IRQHandler .thumb_set USB_LP_IRQHandler,Default_Handler .weak USBWakeUp_RMP_IRQHandler .thumb_set USBWakeUp_RMP_IRQHandler,Default_Handler .weak FPU_IRQHandler .thumb_set FPU_IRQHandler,Default_Handler/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236//*****************************************************************************//startup.c//*****************************************************************************#define WEAK __attribute__ ((weak))#define ALIAS(f) __attribute__ ((weak, alias (#f)))WEAK void Reset_Handler(void);WEAK void Default_Handler(void);void WDT_IRQHandler(void) ALIAS(Default_Handler);void NMI_Handler(void) ALIAS(Default_Handler);void HardFault_Handler(void) ALIAS(Default_Handler);void MemManage_Handler(void) ALIAS(Default_Handler);void BusFault_Handler(void) ALIAS(Default_Handler);void UsageFault_Handler(void) ALIAS(Default_Handler);void SVC_Handler(void) ALIAS(Default_Handler);void DebugMon_Handler(void) ALIAS(Default_Handler);void PendSV_Handler(void) ALIAS(Default_Handler);void SysTick_Handler(void) ALIAS(Default_Handler);void WWDG_IRQHandler(void) ALIAS(Default_Handler);void PVD_IRQHandler(void) ALIAS(Default_Handler);void TAMP_STAMP_IRQHandler(void) ALIAS(Default_Handler);void RTC_WKUP_IRQHandler(void) ALIAS(Default_Handler);void FLASH_IRQHandler(void) ALIAS(Default_Handler);void RCC_IRQHandler(void) ALIAS(Default_Handler);void EXTI0_IRQHandler(void) ALIAS(Default_Handler);void EXTI1_IRQHandler(void) ALIAS(Default_Handler);void EXTI2_TSC_IRQHandler(void) ALIAS(Default_Handler);void EXTI3_IRQHandler(void) ALIAS(Default_Handler);void EXTI4_IRQHandler(void) ALIAS(Default_Handler);void DMA1_Channel1_IRQHandler(void) ALIAS(Default_Handler);void DMA1_Channel2_IRQHandler(void) ALIAS(Default_Handler);void DMA1_Channel3_IRQHandler(void) ALIAS(Default_Handler);void DMA1_Channel4_IRQHandler(void) ALIAS(Default_Handler);void DMA1_Channel5_IRQHandler(void) ALIAS(Default_Handler);void DMA1_Channel6_IRQHandler(void) ALIAS(Default_Handler);void DMA1_Channel7_IRQHandler(void) ALIAS(Default_Handler);void ADC1_2_IRQHandler(void) ALIAS(Default_Handler);void USB_HP_CAN_TX_IRQHandler(void) ALIAS(Default_Handler);void USB_LP_CAN_RX0_IRQHandler(void) ALIAS(Default_Handler);void CAN_RX1_IRQHandler(void) ALIAS(Default_Handler);void CAN_SCE_IRQHandler(void) ALIAS(Default_Handler);void EXTI9_5_IRQHandler(void) ALIAS(Default_Handler);void TIM1_BRK_TIM15_IRQHandler(void) ALIAS(Default_Handler);void TIM1_UP_TIM16_IRQHandler(void) ALIAS(Default_Handler);void TIM1_TRG_COM_TIM17_IRQHandler(void) ALIAS(Default_Handler);void TIM1_CC_IRQHandler(void) ALIAS(Default_Handler);void TIM2_IRQHandler(void) ALIAS(Default_Handler);void TIM3_IRQHandler(void) ALIAS(Default_Handler);void TIM4_IRQHandler(void) ALIAS(Default_Handler);void I2C1_EV_IRQHandler(void) ALIAS(Default_Handler);void I2C1_ER_IRQHandler(void) ALIAS(Default_Handler);void I2C2_EV_IRQHandler(void) ALIAS(Default_Handler);void I2C2_ER_IRQHandler(void) ALIAS(Default_Handler);void SPI1_IRQHandler(void) ALIAS(Default_Handler);void SPI2_IRQHandler(void) ALIAS(Default_Handler);void USART1_IRQHandler(void) ALIAS(Default_Handler);void USART2_IRQHandler(void) ALIAS(Default_Handler);void USART3_IRQHandler(void) ALIAS(Default_Handler);void EXTI15_10_IRQHandler(void) ALIAS(Default_Handler);void RTC_Alarm_IRQHandler(void) ALIAS(Default_Handler);void USBWakeUp_IRQHandler(void) ALIAS(Default_Handler);void TIM8_BRK_IRQHandler(void) ALIAS(Default_Handler);void TIM8_UP_IRQHandler(void) ALIAS(Default_Handler);void TIM8_TRG_COM_IRQHandler(void) ALIAS(Default_Handler);void TIM8_CC_IRQHandler(void) ALIAS(Default_Handler);void ADC3_IRQHandler(void) ALIAS(Default_Handler);void SPI3_IRQHandler(void) ALIAS(Default_Handler);void UART4_IRQHandler(void) ALIAS(Default_Handler);void UART5_IRQHandler(void) ALIAS(Default_Handler);void TIM6_DAC_IRQHandler(void) ALIAS(Default_Handler);void TIM7_IRQHandler(void) ALIAS(Default_Handler);void DMA2_Channel1_IRQHandler(void) ALIAS(Default_Handler);void DMA2_Channel2_IRQHandler(void) ALIAS(Default_Handler);void DMA2_Channel3_IRQHandler(void) ALIAS(Default_Handler);void DMA2_Channel4_IRQHandler(void) ALIAS(Default_Handler);void DMA2_Channel5_IRQHandler(void) ALIAS(Default_Handler);void ADC4_IRQHandler(void) ALIAS(Default_Handler); void COMP1_2_3_IRQHandler(void) ALIAS(Default_Handler);void COMP4_5_6_IRQHandler(void) ALIAS(Default_Handler);void COMP7_IRQHandler(void) ALIAS(Default_Handler);void USB_HP_IRQHandler(void) ALIAS(Default_Handler);void USB_LP_IRQHandler(void) ALIAS(Default_Handler);void USBWakeUp_RMP_IRQHandler(void) ALIAS(Default_Handler);void FPU_IRQHandler(void) ALIAS(Default_Handler);//*****************************************************************************// The vector table.//*****************************************************************************extern unsigned long _estack;void (* const g_pfnVectors[])(void)__attribute__ ((section(&quot;.isr_vector&quot;)));void (* const g_pfnVectors[])(void) =&#123; (void *)&amp;_estack, Reset_Handler, NMI_Handler, HardFault_Handler, MemManage_Handler, BusFault_Handler, UsageFault_Handler, 0, 0, 0, 0, SVC_Handler, DebugMon_Handler, 0, PendSV_Handler, SysTick_Handler, WWDG_IRQHandler, PVD_IRQHandler, TAMP_STAMP_IRQHandler, RTC_WKUP_IRQHandler, FLASH_IRQHandler, RCC_IRQHandler, EXTI0_IRQHandler, EXTI1_IRQHandler, EXTI2_TSC_IRQHandler, EXTI3_IRQHandler, EXTI4_IRQHandler, DMA1_Channel1_IRQHandler, DMA1_Channel2_IRQHandler, DMA1_Channel3_IRQHandler, DMA1_Channel4_IRQHandler, DMA1_Channel5_IRQHandler, DMA1_Channel6_IRQHandler, DMA1_Channel7_IRQHandler, ADC1_2_IRQHandler, USB_HP_CAN_TX_IRQHandler, USB_LP_CAN_RX0_IRQHandler, CAN_RX1_IRQHandler, CAN_SCE_IRQHandler, EXTI9_5_IRQHandler, TIM1_BRK_TIM15_IRQHandler, TIM1_UP_TIM16_IRQHandler, TIM1_TRG_COM_TIM17_IRQHandler, TIM1_CC_IRQHandler, TIM2_IRQHandler, TIM3_IRQHandler, TIM4_IRQHandler, I2C1_EV_IRQHandler, I2C1_ER_IRQHandler, I2C2_EV_IRQHandler, I2C2_ER_IRQHandler, SPI1_IRQHandler, SPI2_IRQHandler, USART1_IRQHandler, USART2_IRQHandler, USART3_IRQHandler, EXTI15_10_IRQHandler, RTC_Alarm_IRQHandler, USBWakeUp_IRQHandler, TIM8_BRK_IRQHandler, TIM8_UP_IRQHandler, TIM8_TRG_COM_IRQHandler, TIM8_CC_IRQHandler, ADC3_IRQHandler, 0, 0, 0, SPI3_IRQHandler, UART4_IRQHandler, UART5_IRQHandler, TIM6_DAC_IRQHandler, TIM7_IRQHandler, DMA2_Channel1_IRQHandler, DMA2_Channel2_IRQHandler, DMA2_Channel3_IRQHandler, DMA2_Channel4_IRQHandler, DMA2_Channel5_IRQHandler, ADC4_IRQHandler, 0, 0, COMP1_2_3_IRQHandler, COMP4_5_6_IRQHandler, COMP7_IRQHandler, 0, 0, 0, 0, 0, 0, 0, USB_HP_IRQHandler, USB_LP_IRQHandler, USBWakeUp_RMP_IRQHandler, 0, 0, 0, 0, FPU_IRQHandler,&#125;;extern unsigned long _sidata;extern unsigned long _sdata;extern unsigned long _edata;extern unsigned long _sbss;extern unsigned long _ebss;extern int main(void);extern void SystemInit();extern void __libc_init_array();void Reset_Handler(void) &#123; unsigned long *pulSrc, *pulDest; pulSrc = &amp;_sidata; pulDest = &amp;_sdata; while( pulDest &lt; &amp;_edata) &#123; *pulDest++ = *pulSrc++; &#125; pulDest = &amp;_sbss; while(pulDest &lt; &amp;_ebss) &#123; *pulDest++ = 0; &#125; SystemInit(); __libc_init_array(); main(); while (1) &#123; &#125;&#125;void Default_Handler(void)&#123; while(1) &#123; &#125;&#125;","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"}]},{"title":"ws2812","slug":"stm32/ws2812","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T11:55:16.309Z","comments":true,"path":"2024/12/26/stm32/ws2812/","permalink":"http://example.com/2024/12/26/stm32/ws2812/","excerpt":"","text":"WS2812é©±åŠ¨æ—¶åº ç  é‡Šä¹‰ æ—¶é—´ T0H 0ç ï¼Œé«˜ç”µå¹³æ—¶é—´ 400Â±150ns T0H 1ç ï¼Œé«˜ç”µå¹³æ—¶é—´ 850Â±150ns T0L 0ç ï¼Œä½ç”µå¹³æ—¶é—´ 850Â±150ns T0L 1ç ï¼Œä½ç”µå¹³æ—¶é—´ 400Â±150ns RES å¤ä½ä½ç”µå¹³æ—¶é—´ &gt;50us é…ç½®å®šæ—¶å™¨ PWMé€šé“ ARR &#x3D; æ—¶é’Ÿé¢‘ç‡ * 1.2 å…¶ä½™é»˜è®¤(0åˆ†é¢‘ï¼Œå‘ä¸Šè®¡æ•°ï¼ŒPWM1â€¦) DMAé…ç½® DMAä¸­æ–­é»˜è®¤å¼€å¯ï¼Œæ—¶é’Ÿä¸­æ–­ä¸éœ€è¦å¼€ æ·»åŠ DMAï¼Œå¯¹åº”å®šæ—¶å™¨å’Œé€šé“ï¼ŒMemory to Peripheral,Very Highï¼ŒMode Normal,Increment Memory,Data Width Per&#x3D;Half word,Mem &#x3D; Word æ§åˆ¶ä»£ç 1.ç®€å•æ•ˆæœ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192#define LED_NUM 100static uint32_t Led[LED_NUM];LEDFUN Ledfun = STREAM_Y;void Led_Func(LEDFUN sel)&#123; uint32_t G = 0xff&lt;&lt;16; uint32_t R = 0xff&lt;&lt;8; uint32_t B = 0xff; uint8_t i,temp; static uint8_t cnt; static uint8_t timecnt; static uint32_t tick = 0; if (++timecnt &gt; 100) timecnt = 0; if (++cnt &gt;LED_NUM*2) cnt = 0; for(i = 0;i &lt; LED_NUM;i++) &#123; Led[i] = 0; &#125; switch (sel) &#123; //OFF case 0: break; //breath;//---------------------------------------------------------- case BREATH_G: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt&lt;50) Led[i] = (1&lt;&lt;16)*5*timecnt; else Led[i] = (1&lt;&lt;16)*5*(100-timecnt); &#125; break; case BREATH_R: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt&lt;50) Led[i] = (1&lt;&lt;8)*5*timecnt; else Led[i] = (1&lt;&lt;8)*5*(100-timecnt); &#125; break; case BREATH_B: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt&lt;50) Led[i] = 5*timecnt; else Led[i] = 5*(100-timecnt); &#125; break; case BREATH_Y: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt&lt;50) Led[i] = (1&lt;&lt;16|1&lt;&lt;8)*5*timecnt; else Led[i] = (1&lt;&lt;16|1&lt;&lt;8)*5*(100-timecnt); &#125; break; case BREATH_GY: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt&lt;50) Led[i] = (1|1&lt;&lt;8)*5*timecnt; else Led[i] = (1|1&lt;&lt;8)*5*(100-timecnt); &#125; break; case BREATH_D: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt&lt;50) Led[i] = (5|3&lt;&lt;8)*timecnt; else Led[i] = (5|3&lt;&lt;8)*(100-timecnt); &#125; break; //flicker//---------------------------------------------------------- case FLICKER_G: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt%50 &gt; 25) Led[i] = G; else Led[i] = 0; &#125; break; case FLICKER_R: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt%50 &gt; 25) Led[i] = R; else Led[i] = 0; &#125; break; case FLICKER_B: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt%50 &gt; 25) Led[i] = B; else Led[i] = 0; &#125; break; case FLICKER_Y: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt%50 &gt; 25) Led[i] = 0xffff00; else Led[i] = 0; &#125; break; case FLICKER_GY: for(i = 0;i &lt; LED_NUM;i++) &#123; if (timecnt%50 &gt; 25) Led[i] = 0xffff; else Led[i] = 0; &#125; break; //stream//---------------------------------------------------------- case STREAM_G: for (i = 0;i &lt; 16;i++) &#123; Led[(i + cnt/2)%LED_NUM] = (i&lt;&lt;16)*16; &#125; break; case STREAM_R: for (i = 0;i &lt; 16;i++) &#123; Led[(i + cnt/2)%LED_NUM] = (i&lt;&lt;8)*16; &#125; break; case STREAM_B: for (i = 0;i &lt; 16;i++) &#123; Led[(i + cnt/2)%LED_NUM] = i*16; &#125; break; case STREAM_Y: for (i = 0;i &lt; 16;i++) &#123; Led[(i + cnt/2)%LED_NUM] = (i|i&lt;&lt;8 )*16; &#125; break;//---------------------------------------------------------- case RAINBOW: temp = LED_NUM/7; for (i = 0; i &lt; temp;i++) &#123; Led[i+temp*0] = R; Led[i+temp*1] = 0x85ff00; Led[i+temp*2] = 0xffff00; Led[i+temp*3] = G; Led[i+temp*4] = 0xfc5c00; Led[i+temp*5] = B; Led[i+temp*6] = 0x0094d3; &#125; break; &#125;&#125; 2.é©±åŠ¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#include &quot;tim.h&quot;typedef struct&#123; const uint32_t head[2]; uint32_t data[LED_NUM*24]; const uint32_t tail;&#125;DMA_Buffer;DMA_Buffer P_Buffer=&#123; .head[0] = 0, .head[1] = 0, .tail = 0,&#125;;void Led_Show(void)&#123; uint16_t i,j; static uint32_t tick = 0; static uint32_t test_cnt = 0; if (HAL_GetTick() - tick &gt; 40)//è°ƒç”¨é¢‘ç‡ &#123; tick = HAL_GetTick(); &#125; else &#123; return; &#125; //---------------------------------------- //æµ‹è¯• if (++test_cnt &gt; 200) &#123; test_cnt = 0; Ledfun++; if (Ledfun == RAINBOW+1) &#123; Ledfun =BREATH_G; &#125; &#125; //---------------------------------------- Led_Func(Ledfun); for (i = 0; i &lt; LED_NUM;i++) &#123; for (j = 0;j &lt; 24;j++) P_Buffer.data[24*i+j] = (Led[i] &amp; (1 &lt;&lt; (23-j)))? 40:20;//71:34;//æ ¹æ®å®é™…ä¿®æ”¹ &#125; HAL_TIM_PWM_Start_DMA(&amp;htim4, TIM_CHANNEL_1, (uint32_t *)&amp;P_Buffer, 2 + LED_NUM * 24 + 1);&#125;//ä¸­æ–­å›è°ƒvoid HAL_TIM_PWM_PulseFinishedCallback(TIM_HandleTypeDef *htim)&#123; HAL_TIM_PWM_Stop(&amp;htim4,TIM_CHANNEL_1);&#125;","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"ws2812","slug":"stm32/ws2812","permalink":"http://example.com/categories/stm32/ws2812/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"}]},{"title":"Doxygenä½¿ç”¨","slug":"blog/doxygen","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:19:04.133Z","comments":true,"path":"2024/12/26/blog/doxygen/","permalink":"http://example.com/2024/12/26/blog/doxygen/","excerpt":"","text":"Doxygenä½¿ç”¨ç”Ÿæˆé…ç½®æ–‡ä»¶1doxygen -g Doxygenfile ç¤ºä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546# é¡¹ç›®åç§°ï¼Œå°†ä½œä¸ºäºæ‰€ç”Ÿæˆçš„ç¨‹åºæ–‡æ¡£é¦–é¡µæ ‡é¢˜PROJECT_NAME = &quot;Test&quot;# æ–‡æ¡£ç‰ˆæœ¬å·ï¼Œå¯å¯¹åº”äºé¡¹ç›®ç‰ˆæœ¬å·ï¼Œè­¬å¦‚ svnã€cvs æ‰€ç”Ÿæˆçš„é¡¹ç›®ç‰ˆæœ¬å·PROJECT_NUMBER = &quot;1.0.0&quot;# ç¨‹åºæ–‡æ¡£è¾“å‡ºç›®å½•OUTPUT_DIRECTORY = doc # ç¨‹åºæ–‡æ¡£è¾“å…¥ç›®å½• INPUT = User src inc Utilities # ç¨‹åºæ–‡æ¡£è¯­è¨€ç¯å¢ƒOUTPUT_LANGUAGE = ChineseDOXYFILE_ENCODING = UTF-8# åªå¯¹å¤´æ–‡ä»¶ä¸­çš„æ–‡æ¡£åŒ–ä¿¡æ¯ç”Ÿæˆç¨‹åºæ–‡æ¡£ FILE_PATTERNS = # é€’å½’éå†å½“å‰ç›®å½•çš„å­ç›®å½•ï¼Œå¯»æ‰¾è¢«æ–‡æ¡£åŒ–çš„ç¨‹åºæºæ–‡ä»¶ RECURSIVE = YES # å¦‚æœæ˜¯åˆ¶ä½œ C ç¨‹åºæ–‡æ¡£ï¼Œè¯¥é€‰é¡¹å¿…é¡»è®¾ä¸º YESï¼Œå¦åˆ™é»˜è®¤ç”Ÿæˆ C++ æ–‡æ¡£æ ¼å¼OPTIMIZE_OUTPUT_FOR_C = YES#æå–ä¿¡æ¯ï¼ŒåŒ…å«ç±»çš„ç§æœ‰æ•°æ®æˆå‘˜å’Œé™æ€æˆå‘˜EXTRACT_ALL = yesEXTRACT_PRIVATE = yesEXTRACT_STATIC = yes# å¯¹äºä½¿ç”¨ typedef å®šä¹‰çš„ç»“æ„ä½“ã€æšä¸¾ã€è”åˆç­‰æ•°æ®ç±»å‹ï¼ŒåªæŒ‰ç…§ typedef å®šä¹‰çš„ç±»å‹åè¿›è¡Œæ–‡æ¡£åŒ–TYPEDEF_HIDES_STRUCT = YES# åœ¨ C++ ç¨‹åºæ–‡æ¡£ä¸­ï¼Œè¯¥å€¼å¯ä»¥è®¾ç½®ä¸º NOï¼Œè€Œåœ¨ C ç¨‹åºæ–‡æ¡£ä¸­ï¼Œç”±äº C è¯­è¨€æ²¡æœ‰æ‰€è°“çš„åŸŸ/åå­—ç©ºé—´è¿™æ ·çš„æ¦‚å¿µï¼Œæ‰€ä»¥æ­¤å¤„è®¾ç½®ä¸º YESHIDE_SCOPE_NAMES = YES# è®© doxygen é™æ‚„æ‚„åœ°ä¸ºä½ ç”Ÿæˆæ–‡æ¡£ï¼Œåªæœ‰å‡ºç°è­¦å‘Šæˆ–é”™è¯¯æ—¶ï¼Œæ‰åœ¨ç»ˆç«¯è¾“å‡ºæç¤ºä¿¡æ¯QUIET = YES# é€’å½’éå†ç¤ºä¾‹ç¨‹åºç›®å½•çš„å­ç›®å½•ï¼Œå¯»æ‰¾è¢«æ–‡æ¡£åŒ–çš„ç¨‹åºæºæ–‡ä»¶EXAMPLE_RECURSIVE = YES# å…è®¸ç¨‹åºæ–‡æ¡£ä¸­æ˜¾ç¤ºæœ¬æ–‡æ¡£åŒ–çš„å‡½æ•°ç›¸äº’è°ƒç”¨å…³ç³»REFERENCED_BY_RELATION = YESREFERENCES_RELATION = YESREFERENCES_LINK_SOURCE = YES# ä¸ç”Ÿæˆ latex æ ¼å¼çš„ç¨‹åºæ–‡æ¡£ PDFGENERATE_LATEX = NO# åœ¨ç¨‹åºæ–‡æ¡£ä¸­å…è®¸ä»¥å›¾ä¾‹å½¢å¼æ˜¾ç¤ºå‡½æ•°è°ƒç”¨å…³ç³»ï¼Œå‰ææ˜¯ä½ å·²ç»å®‰è£…äº† graphviz è½¯ä»¶åŒ…# HAVE_DOT = YES# CALL_GRAPH = YES# CALLER_GRAPH = YES#åœ¨æœ€åç”Ÿæˆçš„æ–‡æ¡£ä¸­ï¼ŒæŠŠæ‰€æœ‰çš„æºä»£ç åŒ…å«åœ¨å…¶ä¸­SOURCE_BROWSER = YES# è¿™ä¼šåœ¨HTMLæ–‡æ¡£ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªä¾§è¾¹æ ï¼Œå¹¶ä»¥æ ‘çŠ¶ç»“æ„æ˜¾ç¤ºåŒ…ã€ç±»ã€æ¥å£ç­‰çš„å…³ç³»GENERATE_TREEVIEW = ALL ç”Ÿæˆæ³¨é‡Š1doxygen ./Doxygenfile Doxygen æ³¨é‡Šè§„èŒƒ123456789# å—æ³¨é‡Š/**......*/ # è¡Œæ³¨é‡Š///&lt; ....../** ...... *//**&lt; ...... */ 12345678910111213141516171819202122æ³¨é‡Šå‘½ä»¤ æè¿°@brief æ¦‚è¦ä¿¡æ¯@details è¯¦ç»†æè¿°@par å¼€å§‹ä¸€ä¸ªæ®µè½ï¼Œæ®µåè‡ªå®šä¹‰@param æ ‡è®°å‚æ•°æ„ä¹‰@return æè¿°è¿”å›æ„ä¹‰@retval æè¿°è¿”å›å€¼æ„ä¹‰@todo å¯¹å°†è¦åšçš„äº‹æƒ…è¿›è¡Œæ³¨é‡Š@bug ç¼ºé™·ï¼Œé“¾æ¥åˆ°æ‰€æœ‰ç¼ºé™·æ±‡æ€»çš„ç¼ºé™·åˆ—è¡¨@since é€šå¸¸ç”¨æ¥è¯´æ˜ä»ä»€ä¹ˆç‰ˆæœ¬ã€æ—¶é—´å†™æ­¤éƒ¨åˆ†ä»£ç @pre ç”¨æ¥è¯´æ˜ä»£ç é¡¹çš„å‰ææ¡ä»¶@post ç”¨æ¥è¯´æ˜ä»£ç é¡¹ä¹‹åçš„ä½¿ç”¨æ¡ä»¶@code åœ¨æ³¨é‡Šä¸­å¼€å§‹è¯´æ˜ä¸€æ®µä»£ç ï¼Œç›´åˆ°@endcodeå‘½ä»¤@endcode æ³¨é‡Šä¸­ä»£ç æ®µçš„ç»“æŸ@fn å‡½æ•°è¯´æ˜@include åŒ…å«æ–‡ä»¶@var æ ‡æ³¨å˜é‡@enum æ ‡æ³¨æšä¸¾@struct æ ‡æ³¨ç»“æ„ä½“@class æ ‡æ³¨ç±»@note æè¿°ä¸€äº›æ³¨æ„äº‹é¡¹@addtogroup æ·»åŠ åˆ°ä¸€ä¸ªç»„ è‡ªåŠ¨æ³¨é‡Šæ¨¡æ¿ï¼ˆVSCode settings.json é…ç½®ï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&#123; // Doxygen documentation generator set // æ–‡ä»¶æ³¨é‡Šï¼šç‰ˆæƒä¿¡æ¯æ¨¡æ¿ &quot;doxdocgen.file.copyrightTag&quot;: [ &quot;@copyright Copyright (c) &#123;year&#125; by ä½œè€…&quot; ], // æ–‡ä»¶æ³¨é‡Šï¼šè‡ªå®šä¹‰æ¨¡å—ï¼Œè¿™é‡Œæˆ‘æ·»åŠ ä¸€ä¸ªä¿®æ”¹æ—¥å¿— &quot;doxdocgen.file.customTag&quot;: [ &quot;@par ä¿®æ”¹æ—¥å¿—:&quot;, &quot;&lt;table&gt;&quot;, &quot;&lt;tr&gt;&lt;th&gt;Date &lt;th&gt;Version &lt;th&gt;Author &lt;th&gt;Description&quot;, &quot;&lt;tr&gt;&lt;td&gt;&#123;date&#125; &lt;td&gt;1.0 &lt;td&gt;ä½œè€… &lt;td&gt;å†…å®¹&quot;, &quot;&lt;/table&gt;&quot;, ], // æ–‡ä»¶æ³¨é‡Šçš„ç»„æˆåŠå…¶æ’åº &quot;doxdocgen.file.fileOrder&quot;: [ &quot;file&quot;, // @file &quot;brief&quot;, // @brief ç®€ä»‹ &quot;author&quot;, // ä½œè€… &quot;version&quot;, // ç‰ˆæœ¬ &quot;date&quot;, // æ—¥æœŸ &quot;empty&quot;, // ç©ºè¡Œ &quot;copyright&quot;,// ç‰ˆæƒ &quot;empty&quot;, // ç©ºè¡Œ &quot;custom&quot; // è‡ªå®šä¹‰ ], // ä¸‹é¢æ—¶è®¾ç½®ä¸Šé¢æ ‡ç­¾tagçš„å…·ä½“ä¿¡æ¯ &quot;doxdocgen.file.fileTemplate&quot;: &quot;@file &#123;name&#125;&quot;, &quot;doxdocgen.file.versionTag&quot;: &quot;@version 1.0&quot;, &quot;doxdocgen.generic.authorEmail&quot;: &quot;é‚®ç®±@qq.com&quot;, &quot;doxdocgen.generic.authorName&quot;: &quot;ä½œè€…&quot;, &quot;doxdocgen.generic.authorTag&quot;: &quot;@author &#123;author&#125; (&#123;email&#125;)&quot;, // æ—¥æœŸæ ¼å¼ä¸æ¨¡æ¿ &quot;doxdocgen.generic.dateFormat&quot;: &quot;YYYY-MM-DD&quot;, &quot;doxdocgen.generic.dateTemplate&quot;: &quot;@date &#123;date&#125;&quot;, // æ ¹æ®è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Šæ¨¡æ¿ï¼ˆç›®å‰ä¸»è¦ä½“ç°åœ¨å‡½æ•°æ³¨é‡Šä¸Šï¼‰ &quot;doxdocgen.generic.order&quot;: [ &quot;brief&quot;, &quot;tparam&quot;, &quot;param&quot;, &quot;return&quot; ], &quot;doxdocgen.generic.paramTemplate&quot;: &quot;@param&#123;indent:8&#125;&#123;param&#125;&#123;indent:25&#125;MyParamDoc&quot;, &quot;doxdocgen.generic.returnTemplate&quot;: &quot;@return &#123;type&#125; &quot;, &quot;doxdocgen.generic.splitCasingSmartText&quot;: true, &quot;[json]&quot;: &#123; &quot;editor.quickSuggestions&quot;: &#123; &quot;strings&quot;: true &#125;, &quot;editor.suggest.insertMode&quot;: &quot;replace&quot; &#125;,&#125; æ‰‹åŠ¨æ³¨é‡Šæ¨¡æ¿æ–‡ä»¶æ³¨é‡Šæ¨¡æ¿123456789101112131415/** * @file æ–‡ä»¶å * @brief æ–‡ä»¶æ¦‚è¦ä¿¡æ¯æè¿° * @author ä½œè€… * @version ç‰ˆæœ¬ * @date æ—¥æœŸ * * @copyright ç‰ˆæƒä¿¡æ¯ * * @par ä¿®æ”¹æ—¥å¿—: * &lt;table&gt; * &lt;tr&gt;&lt;th&gt;Date &lt;th&gt;Version &lt;th&gt;Author &lt;th&gt;Description * &lt;tr&gt;&lt;td&gt;æ—¥æœŸ &lt;td&gt;ç‰ˆæœ¬ &lt;td&gt;ä½œè€… &lt;td&gt;è¯´æ˜ * &lt;/table&gt; */ å‡½æ•°æ³¨é‡Šæ¨¡æ¿1234567/** * @brief å‡½æ•°åŠŸèƒ½æ¦‚è¦ä¿¡æ¯ * @param[in] è¾“å…¥å‚æ•° è¾“å…¥å‚æ•°æè¿°ä¿¡æ¯ * @param[out] è¾“å‡ºå‚æ•° è¾“å‡ºå‚æ•°æè¿°ä¿¡æ¯ * @return è¿”å›ç±»å‹ * @retval è¿”å›å€¼ è¿”å›å€¼æ„ä¹‰æè¿°ä¿¡æ¯ */","categories":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://example.com/categories/%E5%8D%9A%E5%AE%A2/"},{"name":"Doxygen","slug":"åšå®¢/Doxygen","permalink":"http://example.com/categories/%E5%8D%9A%E5%AE%A2/Doxygen/"}],"tags":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://example.com/tags/%E5%8D%9A%E5%AE%A2/"},{"name":"Doxygen","slug":"Doxygen","permalink":"http://example.com/tags/Doxygen/"}]},{"title":"å¼ºåˆ¶ç½‘ç»œé—¨æˆ·","slug":"esp8266/cap","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:17:34.887Z","comments":true,"path":"2024/12/26/esp8266/cap/","permalink":"http://example.com/2024/12/26/esp8266/cap/","excerpt":"","text":"å¼ºåˆ¶ç½‘ç»œé—¨æˆ·å¼ºåˆ¶ç½‘ç»œé—¨æˆ·ï¼ˆcaptive portalï¼‰å°±æ˜¯æ‰‹æœºåœ¨è¿æ¥ä¸ŠæŸä¸ªwifiçš„æ—¶å€™ï¼Œè‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªé¡µé¢ï¼Œè¿™ä¸ªé¡µé¢é€šå¸¸æ˜¯è¦æˆ‘ä»¬è¾“å…¥è´¦å·å¯†ç æ‰èƒ½è¿æ¥ç½‘ç»œã€‚wifiè¿˜æ²¡æœ‰å¤§é¢ç§¯æ™®åŠçš„æ—¶å€™ï¼Œåœ¨å•†åœºæˆ–é¤å…æä¾›çš„wifiå¸¸å¸¸ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚ç°åœ¨wifiè®¾å¤‡å¤šäº†ï¼Œè¿™ä¸ªåŠŸèƒ½é€æ¸è¢«é—å¿˜äº†ï¼Œä½†æ˜¯ä»ç„¶æœ‰ä¸€å®šçš„ç”¨å¤„ï¼Œæ¯”å¦‚æ‰‹æœºè¿ä¸Šwifiè‡ªåŠ¨åå¼¹å‡ºé…ç½‘é¡µé¢ã€‚ åŸç†æ‰‹æœºè¿ä¸Šwifiåï¼Œä½†ä¸èƒ½ä¿è¯èƒ½è¿æ¥åˆ°äº’è”ç½‘ï¼Œæ‰€ä»¥æ‰‹æœºè¿ä¸ŠæŸä¸ªwifiçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ£€æŸ¥ä¸‹è¿™ä¸ªwifiæ˜¯å¦æœ‰ç½‘ã€‚ä¸åŒå“ç‰Œçš„æ‰‹æœºæ£€æŸ¥ç½‘ç»œæ–¹å¼ç•¥æœ‰ä¸åŒï¼Œä½†åŸºæœ¬ä¸Šå¤§åŒå°å¼‚ã€‚ä¸€èˆ¬æ˜¯å‘æŸä¸ªå›ºå®šçš„åœ°å€å‘èµ·ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚åˆ°æ­£ç¡®çš„æ•°æ®ï¼Œåˆ™è¯æ˜è¿™ä¸ªwifiå¯ä»¥æ­£å¸¸è¿æ¥äº’è”ç½‘ï¼Œå¦‚æœè¯·æ±‚ä¸åˆ°æ•°æ®ï¼Œæˆ–è€…è¯·æ±‚åˆ°äº†é”™è¯¯çš„æ•°æ®ï¼Œåˆ™è¯´æ˜è¿™ä¸ªwifiä¸èƒ½æ­£å¸¸è¿æ¥äº’è”ç½‘ã€‚ä¸Šè¿°æ£€æŸ¥ç½‘ç»œçš„è¿‡ç¨‹å¯åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š 1.è¯·æ±‚åˆ°æ­£å¸¸çš„æ•°æ®(è¯¥wifiå¯ç›´æ¥ä¸Šç½‘) 2.æ²¡æœ‰è¯·æ±‚åˆ°æ•°æ®(è¯¥wifiæ— æ³•è¿æ¥ç½‘ç»œ) 3.è¯·æ±‚åˆ°é”™è¯¯(éæ‰‹æœºæœŸå¾…)çš„æ•°æ®(å¯èƒ½éœ€è¦è®¤è¯æ‰èƒ½è¿æ¥ç½‘ç»œ) å¦‚æœé‡åˆ°ä¸Šè¿°ç¬¬ä¸‰ç§æƒ…å†µï¼Œé‚£ä¹ˆæ‰‹æœºå°±ä¼šæ‰“å¼€ç›¸åº”çš„é¡µé¢ï¼Œå°±æ˜¯æ‰€è°“çš„è‡ªåŠ¨å¼¹å‡ºé¡µé¢ã€‚HTTPè¯·æ±‚çš„è¿‡ç¨‹ï¼Œé¦–å…ˆé€šè¿‡DNSè·å–æœåŠ¡å™¨çš„IPåœ°å€ï¼Œç„¶åå†å‘æœåŠ¡å™¨å‘èµ·HTTPè¯·æ±‚ã€‚ä»¥è‹¹æœæ‰‹æœºä¸ºä¾‹ï¼Œè¿ä¸ŠæŸä¸ªwifiåä¼šè®¿é—®å¦‚ä¸‹é¡µé¢http://captive.apple.com/hotspot-detect.htmlè®¿é—®è¿‡ç¨‹å¦‚ä¸‹ï¼Œå…ˆå‘DNSæœåŠ¡å™¨å‘èµ·DNSè¯·æ±‚ï¼Œè·å¾—captive.apple.comå¯¹åº”çš„IPåœ°å€ï¼Œç„¶åå†å‘åˆšåˆšè·å–åˆ°çš„åœ°å€å‘é€HTTPè¯·æ±‚ï¼Œå¦‚æœDNSè¯·æ±‚å¤±è´¥ï¼Œåˆ™ä¸ä¼šï¼ˆä¹Ÿä¸èƒ½ï¼‰å‘èµ·Httpè¯·æ±‚ã€‚ ç¤ºä¾‹æ‰‹æœºè¿ä¸ŠESP8266åï¼Œé»˜è®¤çš„DNSåœ°å€å°±æ˜¯æ¨¡å—çš„åœ°å€ï¼ˆ192.168.4.1ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨æ¨¡å—ä¸Šå»ºç«‹ä¸€ä¸ªDNSæœåŠ¡å™¨ï¼Œå“åº”æ‰‹æœºå‘æ¥çš„DNSè¯·æ±‚ï¼Œå°†æ‰€æœ‰çš„åŸŸåéƒ½è§£æåˆ°æ¨¡å—æœ¬èº«çš„IPåœ°å€ä¸Šï¼Œé‚£ä¹ˆæ‰‹æœºè®¿é—®http://captive.apple.com/hotspot-detect.htmlå°±ç›¸å½“äºè®¿é—®http://192.168.4.1/hotspot-detect.htmlï¼Œæˆ‘ä»¬çš„æ¨¡ç»„å°±èƒ½æˆåŠŸçš„æ•è·åˆ°æ‰‹æœºå‘æ¥çš„HTTPè¯·æ±‚äº†ã€‚ï¼ˆè¿™ç§åšæ³•é€šå¸¸å«åšDNSæ‹¦æˆªï¼‰ã€‚æ•è·åˆ°HTTPè¯·æ±‚åï¼Œè¿˜è¦åšç›¸åº”çš„HTTPå“åº”ï¼Œæ‰èƒ½è®©æ‰‹æœºå¼¹å‡ºé¡µé¢ã€‚æ‰€ä»¥æ¨¡ç»„è¿˜éœ€è¦å»ºç«‹ä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œç›¸åº”æ‰‹æœºå‘æ¥çš„HTTPè¯·æ±‚ã€‚HTTPåº•å±‚åè®®æ˜¯TCPï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯80ç«¯å£ï¼Œæˆ‘ä»¬åªéœ€è¦å»ºç«‹ä¸€ä¸ªTCPæœåŠ¡å™¨ï¼Œç›‘å¬80ç«¯å£ï¼Œæ”¶åˆ°æ•°æ®ååšç›¸åº”çš„å›å¤å³å¯ã€‚ å®ç°ä»£ç 123456789101112131415161718192021222324252627282930313233static void initialise_wifi(void)&#123; tcpip_adapter_init(); wifi_event_group = xEventGroupCreate(); ESP_ERROR_CHECK( esp_event_loop_init(event_handler, NULL) ); wifi_init_config_t cfg = WIFI_INIT_CONFIG_DEFAULT(); ESP_ERROR_CHECK( esp_wifi_init(&amp;cfg) ); wifi_config_t wifi_ap_config = &#123; .ap = &#123; .ssid = &quot;Free Wifi&quot;, .ssid_len = strlen(&quot;Free Wifi&quot;), .authmode = WIFI_AUTH_OPEN, .max_connection = 3, &#125;, &#125;; ESP_ERROR_CHECK( esp_wifi_set_mode(WIFI_MODE_AP) ); ESP_LOGI(TAG, &quot;Setting WiFi softAP SSID %s...&quot;, wifi_ap_config.ap.ssid); ESP_ERROR_CHECK( esp_wifi_set_config(ESP_IF_WIFI_AP, &amp;wifi_ap_config) ); ESP_ERROR_CHECK( esp_wifi_start() );&#125;void app_main()&#123; ESP_ERROR_CHECK( nvs_flash_init() ); initialise_wifi(); //åˆå§‹åŒ–wifi dns_server_start(); //å¼€å¯DNSæœåŠ¡ web_server_start(); //å¼€å¯httpæœåŠ¡&#125; DNSæŠ¥æ–‡è§£æ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129static void my_dns_server(void *pvParameters)&#123; uint8_t data[128]; int len = 0; struct sockaddr_in client = &#123; 0 &#125;; socklen_t client_len=sizeof(struct sockaddr_in); uint32_t i = 0; ESP_LOGI(TAG,&quot;DNS server start ...&quot;); int sock = create_udp_socket(53); if (sock &lt; 0) &#123; ESP_LOGE(TAG,&quot;Failed to create IPv4 multicast socket&quot;); &#125; while(1) &#123; len=recvfrom(sock,data,100,0,(struct sockaddr *)&amp;client,&amp;client_len); //é˜»å¡å¼ if((len &lt; 0) || ( len &gt; 100)) &#123; ESP_LOGE(TAG,&quot;recvfrom error\\n&quot;); continue; &#125; //è¿‡æ»¤æ‰ä¸€äº›æ‚ä¹±çš„åŸŸå if( strstr((const char *)data+0xc,&quot;taobao&quot;)|| strstr((const char *)data+0xc,&quot;qq&quot;) || strstr((const char *)data+0xc,&quot;sogou&quot;) || strstr((const char *)data+0xc,&quot;amap&quot;) || strstr((const char *)data+0xc,&quot;alipay&quot;)|| strstr((const char *)data+0xc,&quot;youku&quot;) || strstr((const char *)data+0xc,&quot;iqiyi&quot;) || strstr((const char *)data+0xc,&quot;baidu&quot;)) &#123; continue; &#125; data[2] |= 0x80; data[3] |= 0x80; data[7] =1; data[len++] =0xc0; data[len++] =0x0c; data[len++] =0x00; data[len++] =0x01; data[len++] =0x00; data[len++] =0x01; data[len++] =0x00; data[len++] =0x00; data[len++] =0x00; data[len++] =0x0A; data[len++] =0x00; data[len++] =0x04; data[len++] =192; data[len++] =168; data[len++] =4; data[len++] =1; sendto(sock,data,len,0,(struct sockaddr*)&amp;client,client_len); vTaskDelay(10); &#125; ESP_LOGE(TAG,&quot;DNS server stop ...&quot;); shutdown(sock, 0); close(sock); vTaskDelete(NULL);&#125;void webserver(void *pvParameters)&#123; int sockfd,new_fd;/*socketå¥æŸ„å’Œå»ºç«‹è¿æ¥åçš„å¥æŸ„*/ struct sockaddr_in my_addr;/*æœ¬æ–¹åœ°å€ä¿¡æ¯ç»“æ„ä½“ï¼Œä¸‹é¢æœ‰å…·ä½“çš„å±æ€§èµ‹å€¼*/ struct sockaddr_in their_addr;/*å¯¹æ–¹åœ°å€ä¿¡æ¯*/ socklen_t sin_size; struct timeval tv;//å‘é€æ¥æ”¶è¶…æ—¶æ—¶é—´ tv.tv_sec = 10; tv.tv_usec = 0; sin_size=sizeof(struct sockaddr_in); sockfd=socket(AF_INET,SOCK_STREAM,0);//å»ºç«‹socket if(sockfd==-1) &#123; ESP_LOGE(TAG, &quot;socket failed:%d&quot;,errno); vTaskDelete(NULL); return; &#125; my_addr.sin_family=AF_INET;/*è¯¥å±æ€§è¡¨ç¤ºæ¥æ”¶æœ¬æœºæˆ–å…¶ä»–æœºå™¨ä¼ è¾“*/ my_addr.sin_port=htons(80);/*ç«¯å£å·*/ my_addr.sin_addr.s_addr=htonl(INADDR_ANY);/*IPï¼Œæ‹¬å·å†…å®¹è¡¨ç¤ºæœ¬æœºIP*/ bzero(&amp;(my_addr.sin_zero),8);/*å°†å…¶ä»–å±æ€§ç½®0*/ if(bind(sockfd,(struct sockaddr*)&amp;my_addr,sizeof(struct sockaddr))&lt;0)//ç»‘å®šåœ°å€ç»“æ„ä½“å’Œsocket &#123; ESP_LOGE(TAG,&quot;bind error&quot;); vTaskDelete(NULL); return; &#125; listen(sockfd,8);//å¼€å¯ç›‘å¬ ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æœ€å¤§ç›‘å¬æ•° ESP_LOGI(TAG, &quot;webserver start...&quot;); while(1) &#123; new_fd=accept(sockfd,(struct sockaddr*)&amp;their_addr,&amp;sin_size);//åœ¨è¿™é‡Œé˜»å¡çŸ¥é“æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œå‚æ•°åˆ†åˆ«æ˜¯socketå¥æŸ„ï¼Œæ¥æ”¶åˆ°çš„åœ°å€ä¿¡æ¯ä»¥åŠå¤§å° if(new_fd==-1) &#123; ESP_LOGE(TAG,&quot;accept failed&quot;); &#125; else &#123; ESP_LOGI(TAG,&quot;Accept new socket: %d&quot;,new_fd); setsockopt(new_fd, SOL_SOCKET, SO_RCVTIMEO, (const char*)&amp;tv, sizeof(tv)); int *para_fd = malloc(sizeof(int)); *para_fd = new_fd; xTaskCreate(&amp;handle_http_request, &quot;socket_task&quot;, 1024*3, para_fd, 6, NULL); &#125; vTaskDelay(10); &#125; vTaskDelete(NULL);&#125;","categories":[{"name":"esp","slug":"esp","permalink":"http://example.com/categories/esp/"}],"tags":[{"name":"esp","slug":"esp","permalink":"http://example.com/tags/esp/"}]},{"title":"linuxå‹ç¼©","slug":"linux/zip","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:14:23.624Z","comments":true,"path":"2024/12/26/linux/zip/","permalink":"http://example.com/2024/12/26/linux/zip/","excerpt":"","text":"linux tarå‘½ä»¤ å‹ç¼©ã€æ‰“åŒ…ã€è§£å‹ è¯¦è§£1ã€å¸¸ç”¨å‹ç¼©å‘½ä»¤tar -czvf å‹ç¼©åçš„æ–‡ä»¶.tar.gz è¦å‹ç¼©çš„æ–‡ä»¶ 2ã€å¸¸ç”¨è§£å‹å‘½ä»¤tar -xzvf è§£å‹åçš„æ–‡ä»¶.tar.gz ã€è¦è§£å‹çš„ç›®å½•ã€‘ 3ã€å‚æ•°æ„ä¹‰-c: å»ºç«‹å‹ç¼©æ¡£æ¡ˆ -f: ä½¿ç”¨æ¡£æ¡ˆåå­—ï¼Œåˆ‡è®°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œåé¢åªèƒ½æ¥æ¡£æ¡ˆåã€‚ -j: æœ‰bz2å±æ€§çš„ -O: å°†æ–‡ä»¶è§£å¼€åˆ°æ ‡å‡†è¾“å‡º -r: å‘å‹ç¼©å½’æ¡£æ–‡ä»¶æœ«å°¾è¿½åŠ æ–‡ä»¶ -t: æŸ¥çœ‹å†…å®¹ -u: æ›´æ–°åŸå‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶ -v: æ˜¾ç¤ºæ‰€æœ‰è¿‡ç¨‹ -x: è§£å‹ -z: æœ‰gzipå±æ€§çš„ -Z: æœ‰compresså±æ€§çš„ 4ã€æ€»ç»“*.tar ç”¨ tar -xvf è§£å‹ *.gz ç”¨ gzip -dæˆ–è€…gunzip è§£å‹ .tar.gzå’Œ.tgz ç”¨ tar -xzf è§£å‹ *.bz2 ç”¨ bzip2 -dæˆ–è€…ç”¨bunzip2 è§£å‹ *.tar.bz2ç”¨tar -xjf è§£å‹ *.Z ç”¨ uncompress è§£å‹ *.tar.Z ç”¨tar -xZf è§£å‹ *.rar ç”¨ unrar eè§£å‹ *.zip ç”¨ unzip è§£å‹","categories":[{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"tar","slug":"tar","permalink":"http://example.com/tags/tar/"}]},{"title":"RTT Viewer","slug":"openocd/RTT_Viewer","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:24:07.490Z","comments":true,"path":"2024/12/26/openocd/RTT_Viewer/","permalink":"http://example.com/2024/12/26/openocd/RTT_Viewer/","excerpt":"","text":"pyOCDæ˜¾ç¤ºç›®æ ‡ 1pyocd list --target RTTè¿æ¥ 1pyocd rtt -t STM32H750VBTx å¦‚æœä¸èƒ½æ˜¾ç¤ºï¼Œéœ€è¦åŠ åœ°å€(.bssæ®µ) 1.bss 0x20000838 Section 1208 segger_rtt.o(.bss) 1pyocd rtt -t target -a `address` æœç´¢åŒ… 1pyocd pack find STM32H750VB å®‰è£…åŒ… 1pyocd pack install STM32H750VB çƒ§å½• 1pyocd flash -t nrf52 xx.hex æ“¦é™¤ 1pyocd erase -t nrf52","categories":[{"name":"OCD","slug":"OCD","permalink":"http://example.com/categories/OCD/"},{"name":"pyocd","slug":"OCD/pyocd","permalink":"http://example.com/categories/OCD/pyocd/"}],"tags":[{"name":"OCD","slug":"OCD","permalink":"http://example.com/tags/OCD/"},{"name":"pyocd","slug":"pyocd","permalink":"http://example.com/tags/pyocd/"}]},{"title":"vscode doxygen","slug":"vscode/setting.json","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:25:12.684Z","comments":true,"path":"2024/12/26/vscode/setting.json/","permalink":"http://example.com/2024/12/26/vscode/setting.json/","excerpt":"","text":"1. ctrl+shift+p2.è¾“å…¥setting3.é€‰æ‹© é¦–é€‰é¡¹ï¼šæ‰“å¼€è®¾ç½®ï¼ˆjsonï¼‰å³å¯.4ã€å°†ä»¥ä¸‹æ–‡ä»¶å¤åˆ¶åˆ°jsonä¸­&#123; &quot;tabnine.experimentalAutoImports&quot;: true, &quot;workbench.iconTheme&quot;: &quot;vscode-icons&quot;, // Doxygen documentation generator set &quot;doxdocgen.file.copyrightTag&quot;: [ &quot;@copyright Copyright (c) &#123;year&#125; æ­¦æ±‰æœ¨ä»“ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸&quot; ], &quot;doxdocgen.file.customTag&quot;: [ &quot;@par ä¿®æ”¹æ—¥å¿—:&quot;, &quot;&lt;table&gt;&quot;, &quot;&lt;tr&gt;&lt;th&gt;Date &lt;th&gt;Version &lt;th&gt;Author &lt;th&gt;Description&quot;, &quot;&lt;tr&gt;&lt;td&gt;&#123;date&#125; &lt;td&gt;1.0 &lt;td&gt;chengxingjun &lt;td&gt;å†…å®¹&quot;, &quot;&lt;/table&gt;&quot;, ], &quot;doxdocgen.file.fileOrder&quot;: [ &quot;file&quot;, &quot;brief&quot;, &quot;author&quot;, &quot;version&quot;, &quot;date&quot;, &quot;empty&quot;, &quot;copyright&quot;, &quot;empty&quot;, &quot;custom&quot; ], &quot;doxdocgen.file.fileTemplate&quot;: &quot;@file &#123;name&#125;&quot;, &quot;doxdocgen.file.versionTag&quot;: &quot;@version 1.0&quot;, &quot;doxdocgen.generic.authorEmail&quot;: &quot;chengxingjun@mucang.cn&quot;, &quot;doxdocgen.generic.authorName&quot;: &quot;chengxingjun&quot;, &quot;doxdocgen.generic.authorTag&quot;: &quot;@author &#123;author&#125; (&#123;email&#125;)&quot;, &quot;doxdocgen.generic.order&quot;: [ &quot;brief&quot;, &quot;tparam&quot;, &quot;param&quot;, &quot;return&quot; ], &quot;doxdocgen.generic.paramTemplate&quot;: &quot;@param&#123;indent:8&#125;&#123;param&#125;&#123;indent:25&#125; [in/out]&quot;, &quot;doxdocgen.generic.returnTemplate&quot;: &quot;@return &#123;type&#125; &quot;, &quot;doxdocgen.generic.splitCasingSmartText&quot;: true, &quot;C_Cpp.updateChannel&quot;: &quot;Insiders&quot;, &quot;vsicons.dontShowNewVersionMessage&quot;: true, &quot;security.workspace.trust.untrustedFiles&quot;: &quot;open&quot;, &quot;cmake.configureOnOpen&quot;: true, &quot;http.proxySupport&quot;: &quot;off&quot;, &quot;cSpell.userWords&quot;: [], &#125;","categories":[{"name":"vscode","slug":"vscode","permalink":"http://example.com/categories/vscode/"}],"tags":[{"name":"vscode","slug":"vscode","permalink":"http://example.com/tags/vscode/"}]},{"title":"CMake","slug":"stm32/cmake","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-27T02:56:06.835Z","comments":true,"path":"2024/12/26/stm32/cmake/","permalink":"http://example.com/2024/12/26/stm32/cmake/","excerpt":"","text":"CMake æ„å»ºä¸‹è½½é“¾æ¥CMake Ninja ç¯å¢ƒæ„å»ºcmake -G æŸ¥çœ‹æ„å»ºç¯å¢ƒ ä½¿ç”¨Make CMake æ„å»ºmakefile ç›®å½•buildä¸‹ 1cmake -B build -G &quot;Unix Makefiles&quot; make ç¼–è¯‘ 1make -C build æˆ– 1cmake --build build ä½¿ç”¨Ninja CMake æ„å»ºNinja ç›®å½•buildä¸‹ 1cmake -B build -G &quot;Ninja&quot; Ninjaç¼–è¯‘ 1ninja -C build æˆ– 1cmake --build build æ¸…ç†æ„å»º1rm -r build æŒ‡å®šæ„å»ºcmake -G æŒ‡å®šæ„å»º3.15ç‰ˆæœ¬åï¼Œæ”¯æŒè®¾å®šæ„å»ºå™¨å˜é‡CMAKE_GENERATOR 1set(CMAKE_GENERATOR &quot;Unix Makefiles&quot;) ? ä¸ç”Ÿæ•ˆ å…¨ç¼–è¯‘1rm -r build;cmake -B build -G &quot;Unix Makefiles&quot;;cmake --build build 1rm -r build;cmake -B build -G &quot;Ninja&quot;;cmake --build build æŒ‡ä»¤æ—¶é—´12Measure-Command &#123;rm -r build;cmake -B build -G &quot;Ninja&quot;;ninja -C build&#125;Measure-Command &#123;rm -r build;make&#125; æŒ‡ä»¤æ‰§è¡Œ powershell ä½¿ç”¨;å°†æŒ‡ä»¤åˆ†éš”å¼€ linux &amp;ï¼šåŒæ—¶è¿è¡Œ &amp;&amp;ï¼šå…ˆåæ‰§è¡Œ,æ‰§è¡ŒæˆåŠŸåæ‰§è¡Œä¸‹ä¸€ä¸ª ||ï¼šæ‰§è¡Œå¤±è´¥åï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ª STM32CubeMX v6.11 å¼€å§‹å¢åŠ cmakeç¼–è¯‘ï¼Œæ­¤ç‰ˆæœ¬makefileä¸­çš„æ–‡ä»¶è·¯å¾„å˜åŒ–ï¼Œå¯¼è‡´ç¼–è¯‘ä¸é”™ï¼Œéœ€è¦ä¿®æ”¹æ–‡ä»¶è·¯å¾„ v6.12 cmakeç¼–è¯‘ä¸è¿‡ï¼Œé“¾æ¥å‡ºé”™","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"CMake","slug":"CMake","permalink":"http://example.com/tags/CMake/"}]},{"title":"mqtt","slug":"stm32/lwip","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:20:43.606Z","comments":true,"path":"2024/12/26/stm32/lwip/","permalink":"http://example.com/2024/12/26/stm32/lwip/","excerpt":"","text":"lwipå®å®šä¹‰ TCPIP_THREAD_PRIO: å®šä¹‰äº†lwIPåè®®æ ˆä¸­çš„TCP&#x2F;IPçº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿéœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç³»ç»Ÿä¸­æœ‰å…¶ä»–é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œå¯ä»¥å°†è¯¥å€¼è®¾ç½®ä¸ºè¾ƒä½çš„ä¼˜å…ˆçº§ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚ DEFAULT_THREAD_PRIO: å®šä¹‰äº†é»˜è®¤çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚åŒæ ·ï¼Œå¯ä»¥æ ¹æ®ç³»ç»Ÿéœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ SYS_LIGHTWEIGHT_PROT: å®šä¹‰äº†ç³»ç»Ÿæ˜¯å¦å¯ç”¨è½»é‡çº§ä¿æŠ¤æœºåˆ¶ã€‚å¦‚æœå¯ç”¨ï¼Œå°†ä½¿ç”¨æ›´è½»é‡çº§çš„ä¿æŠ¤æœºåˆ¶æ¥ä¿æŠ¤å…±äº«èµ„æºï¼Œä»¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ NO_SYS: å®šä¹‰äº†æ˜¯å¦ç¦ç”¨æ“ä½œç³»ç»ŸåŠŸèƒ½ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†ç¦ç”¨æ“ä½œç³»ç»ŸåŠŸèƒ½ï¼ŒlwIPå°†åœ¨è£¸æœºç¯å¢ƒä¸‹è¿è¡Œã€‚ MEM_ALIGNMENT: å®šä¹‰äº†å†…å­˜å¯¹é½æ–¹å¼ã€‚å¯ä»¥æ ¹æ®ç¡¬ä»¶å¹³å°çš„è¦æ±‚è¿›è¡Œè°ƒæ•´ã€‚ MEM_SIZE: å®šä¹‰äº†lwIPåè®®æ ˆä½¿ç”¨çš„å†…å­˜å¤§å°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿéœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç³»ç»Ÿå†…å­˜è¾ƒå°ï¼Œå¯ä»¥å‡å°è¯¥å€¼ä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚ MEMP_NUM_PBUF: å®šä¹‰äº†å¯ç”¨çš„pbufï¼ˆæ•°æ®åŒ…ç¼“å†²åŒºï¼‰æ•°é‡ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„ç½‘ç»œè´Ÿè½½è¿›è¡Œè°ƒæ•´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç³»ç»Ÿéœ€è¦å¤„ç†å¤§é‡çš„ç½‘ç»œæ•°æ®åŒ…ï¼Œå¯ä»¥å¢åŠ è¯¥å€¼ä»¥æé«˜æ€§èƒ½ã€‚ MEMP_NUM_UDP_PCB: å®šä¹‰äº†å¯ç”¨çš„UDPåè®®æ§åˆ¶å—ï¼ˆPCBï¼‰æ•°é‡ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„UDPè¿æ¥æ•°è¿›è¡Œè°ƒæ•´ã€‚ MEMP_NUM_TCP_PCB: å®šä¹‰äº†å¯ç”¨çš„TCPåè®®æ§åˆ¶å—ï¼ˆPCBï¼‰æ•°é‡ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„TCPè¿æ¥æ•°è¿›è¡Œè°ƒæ•´ã€‚ MEMP_NUM_TCP_PCB_LISTEN: å®šä¹‰äº†å¯ç”¨çš„TCPç›‘å¬åè®®æ§åˆ¶å—ï¼ˆPCBï¼‰æ•°é‡ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„TCPç›‘å¬è¿æ¥æ•°è¿›è¡Œè°ƒæ•´ã€‚ MEMP_NUM_TCP_SEG: å®šä¹‰äº†å¯ç”¨çš„TCPåˆ†æ®µæ•°é‡ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„TCPè¿æ¥æ•°å’Œæ•°æ®ä¼ è¾“éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ MEMP_NUM_SYS_TIMEOUT: å®šä¹‰äº†å¯ç”¨çš„ç³»ç»Ÿè¶…æ—¶æ•°é‡ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ MEMP_NUM_NETCONN: å®šä¹‰äº†å¯ç”¨çš„ç½‘ç»œè¿æ¥æ•°é‡ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„ç½‘ç»œè¿æ¥éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ PBUF_POOL_SIZE: å®šä¹‰äº†pbufï¼ˆæ•°æ®åŒ…ç¼“å†²åŒºï¼‰æ± çš„å¤§å°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„ç½‘ç»œè´Ÿè½½è¿›è¡Œè°ƒæ•´ã€‚ PBUF_POOL_BUFSIZE: å®šä¹‰äº†pbufï¼ˆæ•°æ®åŒ…ç¼“å†²åŒºï¼‰çš„å¤§å°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„ç½‘ç»œè´Ÿè½½å’Œæ•°æ®åŒ…å¤§å°è¿›è¡Œè°ƒæ•´ã€‚ LWIP_SUPPORT_CUSTOM_PBUF: å®šä¹‰äº†æ˜¯å¦æ”¯æŒè‡ªå®šä¹‰pbufï¼ˆæ•°æ®åŒ…ç¼“å†²åŒºï¼‰ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„pbufå®ç°ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ã€‚ LWIP_TCP: å®šä¹‰äº†æ˜¯å¦å¯ç”¨TCPåè®®ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨TCPåè®®ã€‚ TCP_TTL: å®šä¹‰äº†TCPæ•°æ®åŒ…çš„ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰ã€‚ TCP_QUEUE_OOSEQ: å®šä¹‰äº†æ˜¯å¦å¯ç”¨TCPä¹±åºé˜Ÿåˆ—ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨TCPä¹±åºé˜Ÿåˆ—ã€‚ TCPIP_MBOX_SIZE: å®šä¹‰äº†TCP&#x2F;IPçº¿ç¨‹çš„é‚®ç®±å¤§å°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ DEFAULT_TCP_RECVMBOX_SIZE: å®šä¹‰äº†TCPæ¥æ”¶é‚®ç®±çš„å¤§å°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ DEFAULT_ACCEPTMBOX_SIZE: å®šä¹‰äº†TCPè¿æ¥æ¥å—é‚®ç®±çš„å¤§å°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ TCP_MSS: å®šä¹‰äº†TCPæœ€å¤§æ®µå¤§å°ï¼ˆMaximum Segment Sizeï¼‰ã€‚å¯ä»¥æ ¹æ®ç½‘ç»œç¯å¢ƒå’Œå¸¦å®½è¿›è¡Œè°ƒæ•´ã€‚ TCP_SND_BUF: å®šä¹‰äº†TCPå‘é€ç¼“å†²åŒºçš„å¤§å°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚å’Œç½‘ç»œå¸¦å®½è¿›è¡Œè°ƒæ•´ã€‚ TCP_SND_QUEUELEN: å®šä¹‰äº†TCPå‘é€é˜Ÿåˆ—çš„é•¿åº¦ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚å’Œç½‘ç»œå¸¦å®½è¿›è¡Œè°ƒæ•´ã€‚ TCP_WND: å®šä¹‰äº†TCPçª—å£å¤§å°ã€‚å¯ä»¥æ ¹æ®ç½‘ç»œç¯å¢ƒå’Œå¸¦å®½è¿›è¡Œè°ƒæ•´ã€‚ LWIP_ICMP: å®šä¹‰äº†æ˜¯å¦å¯ç”¨ICMPåè®®ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨ICMPåè®®ã€‚ LWIP_DHCP: å®šä¹‰äº†æ˜¯å¦å¯ç”¨DHCPåè®®ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨DHCPåè®®ã€‚ LWIP_UDP: å®šä¹‰äº†æ˜¯å¦å¯ç”¨UDPåè®®ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨UDPåè®®ã€‚ UDP_TTL: å®šä¹‰äº†UDPæ•°æ®åŒ…çš„ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰ã€‚ LWIP_STATS: å®šä¹‰äº†æ˜¯å¦å¯ç”¨lwIPç»Ÿè®¡åŠŸèƒ½ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨lwIPçš„ç»Ÿè®¡åŠŸèƒ½ã€‚ LWIP_PROVIDE_ERRNO: å®šä¹‰äº†æ˜¯å¦æä¾›errnoå˜é‡ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†æä¾›errnoå˜é‡ã€‚ CHECKSUM_BY_HARDWARE: å®šä¹‰äº†æ˜¯å¦ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿè®¡ç®—æ ¡éªŒå’Œã€‚å¦‚æœå®šä¹‰äº†è¯¥å®ï¼Œå°†ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿè®¡ç®—æ ¡éªŒå’Œã€‚ CHECKSUM_GEN_IP, CHECKSUM_GEN_UDP, CHECKSUM_GEN_TCP, CHECKSUM_CHECK_IP, CHECKSUM_CHECK_UDP, CHECKSUM_CHECK_TCP, CHECKSUM_GEN_ICMP: è¿™äº›å®å®šä¹‰äº†æ˜¯å¦ç”Ÿæˆå’Œæ£€æŸ¥IPã€UDPã€TCPå’ŒICMPæ•°æ®åŒ…çš„æ ¡éªŒå’Œã€‚æ ¹æ®ç³»ç»Ÿçš„ç¡¬ä»¶å’Œæ€§èƒ½éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ LWIP_NETCONN: å®šä¹‰äº†æ˜¯å¦å¯ç”¨lwIPçš„netconn APIã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨lwIPçš„netconn APIã€‚ LWIP_SOCKET: å®šä¹‰äº†æ˜¯å¦å¯ç”¨lwIPçš„socket APIã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨lwIPçš„socket APIã€‚ LWIP_COMPAT_MUTEX: å®šä¹‰äº†æ˜¯å¦å¯ç”¨lwIPçš„äº’æ–¥é”å…¼å®¹æ¨¡å¼ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨lwIPçš„äº’æ–¥é”å…¼å®¹æ¨¡å¼ã€‚ LWIP_SO_RCVTIMEO: å®šä¹‰äº†æ˜¯å¦å¯ç”¨lwIPçš„æ¥æ”¶è¶…æ—¶åŠŸèƒ½ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨lwIPçš„æ¥æ”¶è¶…æ—¶åŠŸèƒ½ã€‚ TCPIP_THREAD_STACKSIZE: å®šä¹‰äº†TCP&#x2F;IPçº¿ç¨‹çš„å †æ ˆå¤§å°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ DEFAULT_UDP_RECVMBOX_SIZE: å®šä¹‰äº†UDPæ¥æ”¶é‚®ç®±çš„å¤§å°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ DEFAULT_THREAD_STACKSIZE: å®šä¹‰äº†é»˜è®¤çº¿ç¨‹çš„å †æ ˆå¤§å°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ LWIP_TCP_KEEPALIVE, TCP_KEEPIDLE_DEFAULT, TCP_KEEPINTVL_DEFAULT, TCP_KEEPCNT_DEFAULT, TCP_MAXIDLE: è¿™äº›å®å®šä¹‰äº†TCPä¿æŒè¿æ¥çš„ç›¸å…³å‚æ•°ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ LWIP_DEBUG: å®šä¹‰äº†æ˜¯å¦å¯ç”¨lwIPçš„è°ƒè¯•åŠŸèƒ½ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨lwIPçš„è°ƒè¯•åŠŸèƒ½ã€‚ ICMP_DEBUG: å®šä¹‰äº†ICMPè°ƒè¯•çš„çº§åˆ«ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ LWIP_NETIF_LOOPBACK: å®šä¹‰äº†æ˜¯å¦å¯ç”¨lwIPçš„å›ç¯æ¥å£ã€‚å¦‚æœè®¾ç½®ä¸º1ï¼Œå°†å¯ç”¨lwIPçš„å›ç¯æ¥å£ã€‚ LWIP_LOOPBACK_MAX_PBUFS: å®šä¹‰äº†å›ç¯æ¥å£çš„æœ€å¤§pbufï¼ˆæ•°æ®åŒ…ç¼“å†²åŒºï¼‰æ•°é‡ã€‚å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ è¿™äº›å®å®šä¹‰å¯ä»¥æ ¹æ®å…·ä½“çš„ç³»ç»Ÿéœ€æ±‚è¿›è¡Œä¼˜åŒ–é…ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç³»ç»Ÿéœ€è¦å¤„ç†å¤§é‡çš„TCPè¿æ¥ï¼Œå¯ä»¥å¢åŠ MEMP_NUM_TCP_PCBå’ŒMEMP_NUM_TCP_PCB_LISTENçš„å€¼ã€‚å¦‚æœç³»ç»Ÿå†…å­˜è¾ƒå°ï¼Œå¯ä»¥å‡å°MEM_SIZEçš„å€¼ã€‚å¦‚æœç³»ç»Ÿéœ€è¦æ”¯æŒæ›´å¤šçš„UDPè¿æ¥ï¼Œå¯ä»¥å¢åŠ MEMP_NUM_UDP_PCBçš„å€¼ã€‚é€šè¿‡è°ƒæ•´è¿™äº›å®å®šä¹‰çš„å€¼ï¼Œå¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚å’Œç¡¬ä»¶èµ„æºè¿›è¡Œä¼˜åŒ–é…ç½®ï¼Œä»¥æé«˜ç³»ç»Ÿæ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡ã€‚ lwIPæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ lwip æ–‡ä»¶ç”Ÿæˆ 1234567891011TARGET=makefsdataC_INCLUDES = \\-I../../../include/ \\-I../../../../test/unit/#éœ€è¦æ·»åŠ contribä¸‹ports\\unix\\port\\include\\arch\\cc.hall: gcc $(C_INCLUDES) -o $(TARGET).exe makefsdata.cclean: -rm $(TARGET).exe","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"lwip","slug":"stm32/lwip","permalink":"http://example.com/categories/stm32/lwip/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"lwip","slug":"lwip","permalink":"http://example.com/tags/lwip/"}]},{"title":"stm32 cmake","slug":"stm32/stm32cmake","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:26:07.013Z","comments":true,"path":"2024/12/26/stm32/stm32cmake/","permalink":"http://example.com/2024/12/26/stm32/stm32cmake/","excerpt":"","text":"STM32 CMAKEFILE123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199cmake_minimum_required(VERSION 3.22)## This file is generated only once,# and is not re-generated if converter is called multiple times.## User is free to modify the file as much as necessary## Setup compiler settingsset(CMAKE_C_STANDARD 11)set(CMAKE_C_STANDARD_REQUIRED ON)set(CMAKE_C_EXTENSIONS ON)# Define the build typeif(NOT CMAKE_BUILD_TYPE) set(CMAKE_BUILD_TYPE &quot;Debug&quot;)endif()# Set the project nameset(CMAKE_PROJECT_NAME test2)# Include toolchain fileset(CMAKE_SYSTEM_NAME Generic)set(CMAKE_SYSTEM_PROCESSOR arm)set(CMAKE_C_COMPILER_FORCED TRUE)set(CMAKE_CXX_COMPILER_FORCED TRUE)set(CMAKE_C_COMPILER_ID GNU)set(CMAKE_CXX_COMPILER_ID GNU)# Some default GCC settings# arm-none-eabi- must be part of path environmentset(TOOLCHAIN_PREFIX arm-none-eabi-)set(CMAKE_C_COMPILER $&#123;TOOLCHAIN_PREFIX&#125;gcc)set(CMAKE_ASM_COMPILER $&#123;CMAKE_C_COMPILER&#125;)set(CMAKE_CXX_COMPILER $&#123;TOOLCHAIN_PREFIX&#125;g++)set(CMAKE_LINKER $&#123;TOOLCHAIN_PREFIX&#125;g++)set(CMAKE_OBJCOPY $&#123;TOOLCHAIN_PREFIX&#125;objcopy)set(CMAKE_SIZE $&#123;TOOLCHAIN_PREFIX&#125;size)set(CMAKE_EXECUTABLE_SUFFIX_ASM &quot;.elf&quot;)set(CMAKE_EXECUTABLE_SUFFIX_C &quot;.elf&quot;)set(CMAKE_EXECUTABLE_SUFFIX_CXX &quot;.elf&quot;)set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)set(LDSCRIPT STM32F103RCTx_FLASH.ld)# MCU specific flagsset(TARGET_FLAGS &quot;-mcpu=cortex-m3 &quot;)set(CMAKE_C_FLAGS &quot;$&#123;CMAKE_C_FLAGS&#125; $&#123;TARGET_FLAGS&#125;&quot;)set(CMAKE_C_FLAGS &quot;$&#123;CMAKE_C_FLAGS&#125; -Wall -Wextra -Wpedantic -fdata-sections -ffunction-sections&quot;)if(CMAKE_BUILD_TYPE MATCHES Debug) set(CMAKE_C_FLAGS &quot;$&#123;CMAKE_C_FLAGS&#125; -O0 -g3&quot;)endif()if(CMAKE_BUILD_TYPE MATCHES Release) set(CMAKE_C_FLAGS &quot;$&#123;CMAKE_C_FLAGS&#125; -Os -g0&quot;)endif()set(CMAKE_ASM_FLAGS &quot;$&#123;CMAKE_C_FLAGS&#125; -x assembler-with-cpp -MMD -MP&quot;)set(CMAKE_CXX_FLAGS &quot;$&#123;CMAKE_C_FLAGS&#125; -fno-rtti -fno-exceptions -fno-threadsafe-statics&quot;)set(CMAKE_C_LINK_FLAGS &quot;$&#123;TARGET_FLAGS&#125;&quot;)set(CMAKE_C_LINK_FLAGS &quot;$&#123;CMAKE_C_LINK_FLAGS&#125; -T $&#123;CMAKE_SOURCE_DIR&#125;/$&#123;LDSCRIPT&#125;&quot;)set(CMAKE_C_LINK_FLAGS &quot;$&#123;CMAKE_C_LINK_FLAGS&#125; --specs=nano.specs&quot;)set(CMAKE_C_LINK_FLAGS &quot;$&#123;CMAKE_C_LINK_FLAGS&#125; -Wl,-Map=$&#123;CMAKE_PROJECT_NAME&#125;.map -Wl,--gc-sections&quot;)set(CMAKE_C_LINK_FLAGS &quot;$&#123;CMAKE_C_LINK_FLAGS&#125; -Wl,--start-group -lc -lm -Wl,--end-group&quot;)set(CMAKE_C_LINK_FLAGS &quot;$&#123;CMAKE_C_LINK_FLAGS&#125; -Wl,--print-memory-usage&quot;)set(CMAKE_CXX_LINK_FLAGS &quot;$&#123;CMAKE_C_LINK_FLAGS&#125; -Wl,--start-group -lstdc++ -lsupc++ -Wl,--end-group&quot;)# Enable compile command to ease indexing with e.g. clangdset(CMAKE_EXPORT_COMPILE_COMMANDS TRUE)# Core project settingsproject($&#123;CMAKE_PROJECT_NAME&#125;)message(&quot;Build type: &quot; $&#123;CMAKE_BUILD_TYPE&#125;)# Enable CMake support for ASM and C languagesenable_language(C ASM)# Create an executable object typeadd_executable($&#123;CMAKE_PROJECT_NAME&#125;)# Add STM32CubeMX generated sources# add_subdirectory(cmake/stm32cubemx)add_custom_command( TARGET $&#123;CMAKE_PROJECT_NAME&#125; COMMAND $&#123;CMAKE_OBJCOPY&#125; -O binary -S $&#123;CMAKE_PROJECT_NAME&#125;.elf $&#123;CMAKE_PROJECT_NAME&#125;.bin COMMAND $&#123;CMAKE_OBJCOPY&#125; -O ihex $&#123;CMAKE_PROJECT_NAME&#125;.elf $&#123;CMAKE_PROJECT_NAME&#125;.hex )# Link directories setuptarget_link_directories($&#123;CMAKE_PROJECT_NAME&#125; PRIVATE # Add user defined library search paths)# Add sources to executabletarget_sources($&#123;CMAKE_PROJECT_NAME&#125; PRIVATE # Add user sources here)# Add include pathstarget_include_directories($&#123;CMAKE_PROJECT_NAME&#125; PRIVATE # Add user defined include paths)# Add project symbols (macros)target_compile_definitions($&#123;CMAKE_PROJECT_NAME&#125; PRIVATE # Add user defined symbols)# Add linked librariestarget_link_libraries($&#123;CMAKE_PROJECT_NAME&#125; stm32cubemx # Add user defined libraries)# --------------------------------------------------------------------------# åˆ›å»ºæ¥å£åº“# project(stm32cubemx)add_library(stm32cubemx INTERFACE)target_compile_definitions(stm32cubemx INTERFACE USE_HAL_DRIVER STM32F103xE $&lt;$&lt;CONFIG:Debug&gt;:DEBUG&gt;)target_include_directories(stm32cubemx INTERFACE Core/Inc Drivers/STM32F1xx_HAL_Driver/Inc Drivers/STM32F1xx_HAL_Driver/Inc/Legacy Drivers/CMSIS/Device/ST/STM32F1xx/Include Drivers/CMSIS/Include)target_sources(stm32cubemx INTERFACE Core/Src/main.c Core/Src/stm32f1xx_it.c Core/Src/stm32f1xx_hal_msp.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_gpio_ex.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_tim.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_tim_ex.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_rcc.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_rcc_ex.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_gpio.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_dma.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_cortex.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_pwr.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_flash.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_flash_ex.c Drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_exti.c Core/Src/system_stm32f1xx.c Core/Src/sysmem.c Core/Src/syscalls.c startup_stm32f103xe.s)# enable_language(C ASM)# project(lib)# ----------------------------------------------------------------# ç”Ÿæˆé™æ€åº“set(GENLIB 0)if(GENLIB MATCHES 1)add_library(lib STATIC Core/Src/main.cCore/Src/stm32f1xx_it.cCore/Src/stm32f1xx_hal_msp.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_gpio_ex.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_tim.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_tim_ex.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_rcc.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_rcc_ex.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_gpio.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_dma.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_cortex.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_pwr.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_flash.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_flash_ex.cDrivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_exti.cCore/Src/system_stm32f1xx.cCore/Src/sysmem.cCore/Src/syscalls.cstartup_stm32f103xe.s)target_include_directories(lib PUBLIC Core/IncDrivers/STM32F1xx_HAL_Driver/IncDrivers/STM32F1xx_HAL_Driver/Inc/LegacyDrivers/CMSIS/Device/ST/STM32F1xx/IncludeDrivers/CMSIS/Include)target_compile_definitions(lib PUBLIC USE_HAL_DRIVER STM32F103xE)endif()# ---------------------------------------------------------------- CMDæ„å»º ç¼–è¯‘ 1234cmake -B build -G &#x27;Ninja&#x27;cmake -B build -G &#x27;Unix Makefiles&#x27;cmake --build build task.json 1234567891011121314151617181920212223242526272829303132333435&#123; &quot;version&quot;: &quot;2.0.0&quot;, &quot;tasks&quot;: [ &#123; &quot;label&quot;: &quot;ninja&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;cmake -B build -G &#x27;Ninja&#x27;;cmake --build build&quot;, &quot;problemMatcher&quot;: [], &quot;group&quot;: &#123; &quot;kind&quot;: &quot;build&quot;, &quot;isDefault&quot;: true &#125; &#125;, &#123; &quot;label&quot;: &quot;build&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;cmake -B build -G &#x27;Unix Makefiles&#x27;;cmake --build build&quot;, &quot;problemMatcher&quot;: [], &quot;group&quot;: &#123; &quot;kind&quot;: &quot;build&quot;, &quot;isDefault&quot;: true &#125; &#125;, &#123; &quot;label&quot;: &quot;clean&quot;, &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;rm -r build&quot;, &quot;problemMatcher&quot;: [], &quot;group&quot;: &#123; &quot;kind&quot;: &quot;build&quot;, &quot;isDefault&quot;: true &#125; &#125; ] &#125; æå–commitåˆ°æ–‡ä»¶12345678910111213141516171819@echo offsetlocal enabledelayedexpansion :: è·å–å½“å‰è·¯å¾„set CURRENT_DIR=%cd% :: è¿›å…¥æºä»£ç ç›®å½•cd /d %CURRENT_DIR%\\path\\to\\your\\source\\code :: è·å–æœ€æ–°çš„commitå·for /f &quot;delims=#&quot; %%a in (&#x27;git rev-parse --short HEAD&#x27;) do @set commit=%%a :: å°†commitå·å†™å…¥version.hæ–‡ä»¶echo #define COMMIT_HASH &quot;%commit%&quot; &gt; version.h :: é€€å‡ºæºä»£ç ç›®å½•cd /d %CURRENT_DIR% endlocal å®Œæ•´çš„commitå·ï¼ˆ40ä½SHA-1ï¼‰å†™å…¥æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›¿æ¢ 1git rev-parse HEAD &gt; version.h","categories":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"CMake","slug":"stm32/CMake","permalink":"http://example.com/categories/stm32/CMake/"}],"tags":[{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"CMake","slug":"CMake","permalink":"http://example.com/tags/CMake/"}]},{"title":"windows å¸¸ç”¨æ“ä½œ","slug":"windows/windows","date":"2024-12-26T01:43:25.000Z","updated":"2024-12-26T12:23:11.872Z","comments":true,"path":"2024/12/26/windows/windows/","permalink":"http://example.com/2024/12/26/windows/windows/","excerpt":"","text":"ç½‘é¡µç¦æ­¢å¤åˆ¶è§£é™¤win: åœ¨æ§åˆ¶å°F12é¡µé¢Sources å¿«æ·é”® ctrl+shift+p ç„¶åè¾“å…¥ javascript æ‰¾åˆ° disabled javaScript. åˆ‡æ¢åˆ°æ—§ç‰ˆå³é”®èœå•ï¼š1reg add &quot;HKCU\\Software\\Classes\\CLSID\\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;\\InprocServer32&quot; /f /ve æ¢å¤å›Win11å³é”®èœå•ï¼š1reg delete &quot;HKCU\\Software\\Classes\\CLSID\\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;&quot; /f é‡å¯Windowsèµ„æºç®¡ç†å™¨ç”Ÿæ•ˆï¼š1taskkill /f /im explorer.exe &amp; start explorer.exe","categories":[{"name":"windows","slug":"windows","permalink":"http://example.com/categories/windows/"}],"tags":[{"name":"windows","slug":"windows","permalink":"http://example.com/tags/windows/"}]}],"categories":[{"name":"nrf","slug":"nrf","permalink":"http://example.com/categories/nrf/"},{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://example.com/categories/%E5%8D%9A%E5%AE%A2/"},{"name":"hexo","slug":"åšå®¢/hexo","permalink":"http://example.com/categories/%E5%8D%9A%E5%AE%A2/hexo/"},{"name":"markdown","slug":"åšå®¢/markdown","permalink":"http://example.com/categories/%E5%8D%9A%E5%AE%A2/markdown/"},{"name":"esp","slug":"esp","permalink":"http://example.com/categories/esp/"},{"name":"linux","slug":"linux","permalink":"http://example.com/categories/linux/"},{"name":"nodejs","slug":"nodejs","permalink":"http://example.com/categories/nodejs/"},{"name":"OCD","slug":"OCD","permalink":"http://example.com/categories/OCD/"},{"name":"gdb","slug":"OCD/gdb","permalink":"http://example.com/categories/OCD/gdb/"},{"name":"OpenOCD","slug":"OCD/OpenOCD","permalink":"http://example.com/categories/OCD/OpenOCD/"},{"name":"pyocd","slug":"OCD/pyocd","permalink":"http://example.com/categories/OCD/pyocd/"},{"name":"vscode","slug":"vscode","permalink":"http://example.com/categories/vscode/"},{"name":"python","slug":"python","permalink":"http://example.com/categories/python/"},{"name":"çˆ¬è™«","slug":"python/çˆ¬è™«","permalink":"http://example.com/categories/python/%E7%88%AC%E8%99%AB/"},{"name":"qt","slug":"python/qt","permalink":"http://example.com/categories/python/qt/"},{"name":"stm32","slug":"stm32","permalink":"http://example.com/categories/stm32/"},{"name":"crc","slug":"stm32/crc","permalink":"http://example.com/categories/stm32/crc/"},{"name":"usb","slug":"stm32/usb","permalink":"http://example.com/categories/stm32/usb/"},{"name":"DAPLink","slug":"stm32/DAPLink","permalink":"http://example.com/categories/stm32/DAPLink/"},{"name":"objdump","slug":"stm32/objdump","permalink":"http://example.com/categories/stm32/objdump/"},{"name":"HardFault","slug":"stm32/HardFault","permalink":"http://example.com/categories/stm32/HardFault/"},{"name":"mqtt","slug":"stm32/mqtt","permalink":"http://example.com/categories/stm32/mqtt/"},{"name":"hex","slug":"stm32/hex","permalink":"http://example.com/categories/stm32/hex/"},{"name":"ws2812","slug":"stm32/ws2812","permalink":"http://example.com/categories/stm32/ws2812/"},{"name":"Doxygen","slug":"åšå®¢/Doxygen","permalink":"http://example.com/categories/%E5%8D%9A%E5%AE%A2/Doxygen/"},{"name":"lwip","slug":"stm32/lwip","permalink":"http://example.com/categories/stm32/lwip/"},{"name":"CMake","slug":"stm32/CMake","permalink":"http://example.com/categories/stm32/CMake/"},{"name":"windows","slug":"windows","permalink":"http://example.com/categories/windows/"}],"tags":[{"name":"nrf","slug":"nrf","permalink":"http://example.com/tags/nrf/"},{"name":"DFU","slug":"DFU","permalink":"http://example.com/tags/DFU/"},{"name":"hexo","slug":"hexo","permalink":"http://example.com/tags/hexo/"},{"name":"åšå®¢","slug":"åšå®¢","permalink":"http://example.com/tags/%E5%8D%9A%E5%AE%A2/"},{"name":"markdown","slug":"markdown","permalink":"http://example.com/tags/markdown/"},{"name":"esp","slug":"esp","permalink":"http://example.com/tags/esp/"},{"name":"linux","slug":"linux","permalink":"http://example.com/tags/linux/"},{"name":"lvgl","slug":"lvgl","permalink":"http://example.com/tags/lvgl/"},{"name":"git","slug":"git","permalink":"http://example.com/tags/git/"},{"name":"makefile","slug":"makefile","permalink":"http://example.com/tags/makefile/"},{"name":"gcc","slug":"gcc","permalink":"http://example.com/tags/gcc/"},{"name":"Makefile","slug":"Makefile","permalink":"http://example.com/tags/Makefile/"},{"name":"raspberrypi","slug":"raspberrypi","permalink":"http://example.com/tags/raspberrypi/"},{"name":"ffmpeg","slug":"ffmpeg","permalink":"http://example.com/tags/ffmpeg/"},{"name":"nginx","slug":"nginx","permalink":"http://example.com/tags/nginx/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"ssh","slug":"ssh","permalink":"http://example.com/tags/ssh/"},{"name":"TFTP","slug":"TFTP","permalink":"http://example.com/tags/TFTP/"},{"name":"NFS","slug":"NFS","permalink":"http://example.com/tags/NFS/"},{"name":"æ€è€ƒ","slug":"æ€è€ƒ","permalink":"http://example.com/tags/%E6%80%9D%E8%80%83/"},{"name":"vim","slug":"vim","permalink":"http://example.com/tags/vim/"},{"name":"nodejs","slug":"nodejs","permalink":"http://example.com/tags/nodejs/"},{"name":"express","slug":"express","permalink":"http://example.com/tags/express/"},{"name":"OpenOCD","slug":"OpenOCD","permalink":"http://example.com/tags/OpenOCD/"},{"name":"gdb","slug":"gdb","permalink":"http://example.com/tags/gdb/"},{"name":"OCD","slug":"OCD","permalink":"http://example.com/tags/OCD/"},{"name":"pyocd","slug":"pyocd","permalink":"http://example.com/tags/pyocd/"},{"name":"vscode","slug":"vscode","permalink":"http://example.com/tags/vscode/"},{"name":"python","slug":"python","permalink":"http://example.com/tags/python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://example.com/tags/%E7%88%AC%E8%99%AB/"},{"name":"qt","slug":"qt","permalink":"http://example.com/tags/qt/"},{"name":"stm32","slug":"stm32","permalink":"http://example.com/tags/stm32/"},{"name":"crc","slug":"crc","permalink":"http://example.com/tags/crc/"},{"name":"usb","slug":"usb","permalink":"http://example.com/tags/usb/"},{"name":"DAPLink","slug":"DAPLink","permalink":"http://example.com/tags/DAPLink/"},{"name":"objdump","slug":"objdump","permalink":"http://example.com/tags/objdump/"},{"name":"HardFault","slug":"HardFault","permalink":"http://example.com/tags/HardFault/"},{"name":"mqtt","slug":"mqtt","permalink":"http://example.com/tags/mqtt/"},{"name":"hex","slug":"hex","permalink":"http://example.com/tags/hex/"},{"name":"Doxygen","slug":"Doxygen","permalink":"http://example.com/tags/Doxygen/"},{"name":"tar","slug":"tar","permalink":"http://example.com/tags/tar/"},{"name":"CMake","slug":"CMake","permalink":"http://example.com/tags/CMake/"},{"name":"lwip","slug":"lwip","permalink":"http://example.com/tags/lwip/"},{"name":"windows","slug":"windows","permalink":"http://example.com/tags/windows/"}]}